{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/zurb:foundation-sites/test/javascript/components/drilldown.js","filenameRelative":"packages/zurb:foundation-sites/test/javascript/components/drilldown.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/test/javascript/components/drilldown.js.map","sourceFileName":"packages/zurb:foundation-sites/test/javascript/components/drilldown.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"drilldown"},"ignored":false,"code":"describe('Drilldown Menu', function () {\n  var plugin;\n  var $html;\n  var template = \"<ul class=\\\"menu\\\" data-drilldown style=\\\"width: 200px\\\" id=\\\"m1\\\">\\n    <li>\\n      <a href=\\\"#\\\">Item 1</a>\\n      <ul class=\\\"menu\\\">\\n        <li>\\n          <a href=\\\"#\\\">Item 1A</a>\\n          <ul class=\\\"menu\\\">\\n            <li><a href=\\\"#Item-1Aa\\\">Item 1Aa</a></li>\\n            <li><a href=\\\"#Item-1Ba\\\">Item 1Ba</a></li>\\n          </ul>\\n        </li>\\n        <li><a href=\\\"#Item-1B\\\">Item 1B</a></li>\\n        <li><a href=\\\"#Item-1C\\\">Item 1C</a></li>\\n      </ul>\\n    </li>\\n    <li>\\n      <a href=\\\"#\\\">Item 2</a>\\n      <ul class=\\\"menu\\\">\\n        <li><a href=\\\"#Item-2A\\\">Item 2A</a></li>\\n        <li><a href=\\\"#Item-2B\\\">Item 2B</a></li>\\n      </ul>\\n    </li>\\n    <li><a href=\\\"#Item-3\\\"> Item 3</a></li>\\n  </ul>\";\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('stores additional elements', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$submenuAnchors.should.be.an('object');\n      plugin.$submenus.should.be.an('object');\n      plugin.$menuItems.should.be.an('object');\n    });\n  });\n  describe('prepareMenu()', function () {\n    it('wraps the submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n    });\n    it('adds ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$element.should.have.attr('role', 'tree');\n      plugin.$element.find('[data-submenu]').each(function () {\n        $(this).should.have.attr('role', 'group');\n        $(this).should.have.attr('aria-hidden', 'true');\n      });\n      plugin.$element.find('.is-drilldown-submenu-parent').each(function () {\n        $(this).should.have.attr('aria-haspopup', 'true');\n        $(this).should.have.attr('aria-expanded', 'false');\n        $(this).should.have.attr('aria-label', $(this).children('a').first().text());\n      });\n      plugin.$element.find('li:not(.js-drilldown-back)').each(function () {\n        $(this).should.have.attr('role', 'treeitem');\n      });\n    });\n  });\n  describe('show()', function () {\n    it('shows the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0)); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'false');\n    });\n    it('fires open.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.on('open.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n        done();\n      });\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n    });\n  });\n  describe('hide()', function () {\n    it('hides the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul')); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'true');\n    });\n    it('fires hide.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.on('hide.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n        done();\n      });\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n    });\n  });\n  describe('hideAll()', function () {\n    it('hides all submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      plugin._hideAll();\n\n      $html.find('ul[data-submenu].is-active').each(function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $(this).should.have.class('is-closing');\n      });\n    });\n    it('fires closed.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      $html.one('closed.zf.drilldown', function () {\n        $html.find('ul[data-submenu].is-active').each(function () {\n          // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n          $(this).should.have.class('is-closing');\n        });\n        done();\n      });\n\n      plugin._hideAll();\n    });\n  });\n  describe('back()', function () {\n    it('hides current submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click'); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').should.have.class('is-closing');\n    });\n    it('shows parent submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click'); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-active');\n    });\n  });\n  describe('keyboard events', function () {\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going down', function () {\n      $html = $(template).appendTo('body');\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n\n      plugin = new Foundation.Drilldown($html, {}); // Focus last element\n\n      $dummyElement.focus();\n      $html.find('> li:last-child > a').trigger(window.mockKeyboardEvent('TAB'));\n      document.activeElement.should.not.be.equal($html.find('> li:last-child > a')[0]);\n      $dummyElement.remove();\n    }); // Currently not testable, as triggered event won't move on focus\n\n    it.skip('does not trap focus on root element going up', function () {\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Focus first element\n\n      $dummyElement.focus();\n      $html.find('> li:first-child > a').trigger(window.mockKeyboardEvent('TAB', {\n        shift: true\n      }));\n      document.activeElement.should.not.be.equal($html.find('> li:first-child > a')[0]);\n      $dummyElement.remove();\n    });\n    it('closes current sub menu using ESC', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n    it('moves focus to next element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('TAB'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('TAB', {\n        shift: true\n      }));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('moves focus to next element on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('opens child element on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-active');\n    });\n    it('closes child element on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n  });\n});","map":{"version":3,"sources":["packages/zurb:foundation-sites/test/javascript/components/drilldown.js"],"names":["describe","plugin","$html","template","afterEach","destroy","remove","it","$","appendTo","Foundation","Drilldown","$element","should","be","an","options","$submenuAnchors","$submenus","$menuItems","have","attr","find","each","children","first","text","_show","eq","class","done","on","_hide","_hideAll","one","trigger","skip","$dummyElement","focus","window","mockKeyboardEvent","document","activeElement","not","equal","shift"],"mappings":"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","file":"packages/zurb:foundation-sites/test/javascript/components/drilldown.js.map","sourcesContent":["describe('Drilldown Menu', function() {\n  var plugin;\n  var $html;\n  var template = `<ul class=\"menu\" data-drilldown style=\"width: 200px\" id=\"m1\">\n    <li>\n      <a href=\"#\">Item 1</a>\n      <ul class=\"menu\">\n        <li>\n          <a href=\"#\">Item 1A</a>\n          <ul class=\"menu\">\n            <li><a href=\"#Item-1Aa\">Item 1Aa</a></li>\n            <li><a href=\"#Item-1Ba\">Item 1Ba</a></li>\n          </ul>\n        </li>\n        <li><a href=\"#Item-1B\">Item 1B</a></li>\n        <li><a href=\"#Item-1C\">Item 1C</a></li>\n      </ul>\n    </li>\n    <li>\n      <a href=\"#\">Item 2</a>\n      <ul class=\"menu\">\n        <li><a href=\"#Item-2A\">Item 2A</a></li>\n        <li><a href=\"#Item-2B\">Item 2B</a></li>\n      </ul>\n    </li>\n    <li><a href=\"#Item-3\"> Item 3</a></li>\n  </ul>`;\n\n  afterEach(function() {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function() {\n    it('stores the element and plugin options', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function() {\n    it('stores additional elements', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$submenuAnchors.should.be.an('object');\n      plugin.$submenus.should.be.an('object');\n      plugin.$menuItems.should.be.an('object');\n    });\n  });\n\n  describe('prepareMenu()', function() {\n    it('wraps the submenus', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n    });\n    it('adds ARIA attributes', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$element.should.have.attr('role', 'tree');\n\n      plugin.$element.find('[data-submenu]').each(function() {\n        $(this).should.have.attr('role', 'group');\n        $(this).should.have.attr('aria-hidden', 'true');\n      });\n\n      plugin.$element.find('.is-drilldown-submenu-parent').each(function() {\n        $(this).should.have.attr('aria-haspopup', 'true');\n        $(this).should.have.attr('aria-expanded', 'false');\n        $(this).should.have.attr('aria-label', $(this).children('a').first().text());\n      });\n\n      plugin.$element.find('li:not(.js-drilldown-back)').each(function() {\n        $(this).should.have.attr('role', 'treeitem');\n      });\n    });\n  });\n\n  describe('show()', function() {\n    it('shows the given submenu', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n    });\n    it('toggles ARIA attributes', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'false');\n    });\n    it('fires open.zf.drilldown event', function(done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.on('open.zf.drilldown', function() {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n        done();\n      });\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n    });\n  });\n\n  describe('hide()', function() {\n    it('hides the given submenu', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n    });\n    it('toggles ARIA attributes', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'true');\n    });\n    it('fires hide.zf.drilldown event', function(done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.on('hide.zf.drilldown', function() {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n        done();\n      });\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n    });\n  });\n\n  describe('hideAll()', function() {\n    it('hides all submenus', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      plugin._hideAll();\n\n      $html.find('ul[data-submenu].is-active').each(function() {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $(this).should.have.class('is-closing');\n      });\n    });\n    it('fires closed.zf.drilldown event', function(done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n      \n      $html.one('closed.zf.drilldown', function() {\n        $html.find('ul[data-submenu].is-active').each(function() {\n          // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n          $(this).should.have.class('is-closing');\n        });\n        done();\n      });\n\n      plugin._hideAll();\n    });\n  });\n\n  describe('back()', function() {\n    it('hides current submenu', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click');\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').should.have.class('is-closing');\n    });\n    it('shows parent submenu', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click');\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-active');\n    });\n  });\n\n\n  describe('keyboard events', function() {\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going down', function() {\n      $html = $(template).appendTo('body');\n      let $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Focus last element\n      $dummyElement.focus();\n      $html.find('> li:last-child > a').trigger(window.mockKeyboardEvent('TAB'));\n\n      document.activeElement.should.not.be.equal($html.find('> li:last-child > a')[0]);\n\n      $dummyElement.remove();\n    });\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going up', function() {\n      let $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Focus first element\n      $dummyElement.focus();\n      $html.find('> li:first-child > a').trigger(window.mockKeyboardEvent('TAB', {shift: true}));\n\n      document.activeElement.should.not.be.equal($html.find('> li:first-child > a')[0]);\n\n      $dummyElement.remove();\n    });\n    it('closes current sub menu using ESC', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('> li:nth-child(1)'))\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus()\n        .trigger(window.mockKeyboardEvent('ESCAPE'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n    it('moves focus to next element on TAB', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus()\n        .trigger(window.mockKeyboardEvent('TAB'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on TAB', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(2) > a').focus()\n        .trigger(window.mockKeyboardEvent('TAB', {shift: true}));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('moves focus to next element on ARROW_DOWN', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus()\n        .trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on ARROW_UP', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(2) > a').focus()\n        .trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('opens child element on ARROW_RIGHT', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus()\n        .trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-active');\n    });\n    it('closes child element on ARROW_LEFT', function() {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('> li:nth-child(1)'))\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus()\n        .trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n  });\n});"]},"hash":"b9caa6b8f58a8bae98c75c4eb0998b021725abdf"}
