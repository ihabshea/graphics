{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/zurb:foundation-sites/test/javascript/lib/sinon.js","filenameRelative":"packages/zurb:foundation-sites/test/javascript/lib/sinon.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/test/javascript/lib/sinon.js.map","sourceFileName":"packages/zurb:foundation-sites/test/javascript/lib/sinon.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"sinon"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Sinon.JS 1.17.3, 2016/01/27\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS\n *\n * (The BSD License)\n *\n * Copyright (c) 2010-2014, Christian Johansen, christian@cjohansen.no\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *     * Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright notice,\n *       this list of conditions and the following disclaimer in the documentation\n *       and/or other materials provided with the distribution.\n *     * Neither the name of Christian Johansen nor the names of his contributors\n *       may be used to endorse or promote products derived from this software\n *       without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */(function (root, factory) {\n    'use strict';\n\n    if (typeof define === 'function' && define.amd) {\n        define('sinon', [], function () {\n            return root.sinon = factory();\n        });\n    } else if ((typeof exports === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(exports)) === 'object') {\n        module.exports = factory();\n    } else {\n        root.sinon = factory();\n    }\n})(this, function () {\n    'use strict';\n\n    var samsam, formatio, lolex;\n\n    (function () {\n        function define(mod, deps, fn) {\n            if (mod == \"samsam\") {\n                samsam = deps();\n            } else if (typeof deps === \"function\" && mod.length === 0) {\n                lolex = deps();\n            } else if (typeof fn === \"function\") {\n                formatio = fn(samsam);\n            }\n        }\n\n        define.amd = {};\n        (typeof define === \"function\" && define.amd && function (m) {\n            define(\"samsam\", m);\n        } || (typeof module === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(module)) === \"object\" && function (m) {\n            module.exports = m();\n        } || // Node\n        function (m) {\n            this.samsam = m();\n        } // Browser globals\n        )(function () {\n            var o = Object.prototype;\n            var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n\n            function isNaN(value) {\n                // Unlike global isNaN, this avoids type coercion\n                // typeof check avoids IE host object issues, hat tip to\n                // lodash\n                var val = value; // JsLint thinks value !== value is \"weird\"\n\n                return typeof value === \"number\" && value !== val;\n            }\n\n            function getClass(value) {\n                // Returns the internal [[Class]] by calling Object.prototype.toString\n                // with the provided value as this. Return value is a string, naming the\n                // internal class, e.g. \"Array\"\n                return o.toString.call(value).split(/[ \\]]/)[1];\n            } /**\n               * @name samsam.isArguments\n               * @param Object object\n               *\n               * Returns ``true`` if ``object`` is an ``arguments`` object,\n               * ``false`` otherwise.\n               */\n\n            function isArguments(object) {\n                if (getClass(object) === 'Arguments') {\n                    return true;\n                }\n\n                if ((typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) !== \"object\" || typeof object.length !== \"number\" || getClass(object) === \"Array\") {\n                    return false;\n                }\n\n                if (typeof object.callee == \"function\") {\n                    return true;\n                }\n\n                try {\n                    object[object.length] = 6;\n                    delete object[object.length];\n                } catch (e) {\n                    return true;\n                }\n\n                return false;\n            } /**\n               * @name samsam.isElement\n               * @param Object object\n               *\n               * Returns ``true`` if ``object`` is a DOM element node. Unlike\n               * Underscore.js/lodash, this function will return ``false`` if ``object``\n               * is an *element-like* object, i.e. a regular object with a ``nodeType``\n               * property that holds the value ``1``.\n               */\n\n            function isElement(object) {\n                if (!object || object.nodeType !== 1 || !div) {\n                    return false;\n                }\n\n                try {\n                    object.appendChild(div);\n                    object.removeChild(div);\n                } catch (e) {\n                    return false;\n                }\n\n                return true;\n            } /**\n               * @name samsam.keys\n               * @param Object object\n               *\n               * Return an array of own property names.\n               */\n\n            function keys(object) {\n                var ks = [],\n                    prop;\n\n                for (prop in meteorBabelHelpers.sanitizeForInObject(object)) {\n                    if (o.hasOwnProperty.call(object, prop)) {\n                        ks.push(prop);\n                    }\n                }\n\n                return ks;\n            } /**\n               * @name samsam.isDate\n               * @param Object value\n               *\n               * Returns true if the object is a ``Date``, or *date-like*. Duck typing\n               * of date objects work by checking that the object has a ``getTime``\n               * function whose return value equals the return value from the object's\n               * ``valueOf``.\n               */\n\n            function isDate(value) {\n                return typeof value.getTime == \"function\" && value.getTime() == value.valueOf();\n            } /**\n               * @name samsam.isNegZero\n               * @param Object value\n               *\n               * Returns ``true`` if ``value`` is ``-0``.\n               */\n\n            function isNegZero(value) {\n                return value === 0 && 1 / value === -Infinity;\n            } /**\n               * @name samsam.equal\n               * @param Object obj1\n               * @param Object obj2\n               *\n               * Returns ``true`` if two objects are strictly equal. Compared to\n               * ``===`` there are two exceptions:\n               *\n               *   - NaN is considered equal to NaN\n               *   - -0 and +0 are not considered equal\n               */\n\n            function identical(obj1, obj2) {\n                if (obj1 === obj2 || isNaN(obj1) && isNaN(obj2)) {\n                    return obj1 !== 0 || isNegZero(obj1) === isNegZero(obj2);\n                }\n            } /**\n               * @name samsam.deepEqual\n               * @param Object obj1\n               * @param Object obj2\n               *\n               * Deep equal comparison. Two values are \"deep equal\" if:\n               *\n               *   - They are equal, according to samsam.identical\n               *   - They are both date objects representing the same time\n               *   - They are both arrays containing elements that are all deepEqual\n               *   - They are objects with the same set of properties, and each property\n               *     in ``obj1`` is deepEqual to the corresponding property in ``obj2``\n               *\n               * Supports cyclic objects.\n               */\n\n            function deepEqualCyclic(obj1, obj2) {\n                // used for cyclic comparison\n                // contain already visited objects\n                var objects1 = [],\n                    objects2 = [],\n                    // contain pathes (position in the object structure)\n                // of the already visited objects\n                // indexes same as in objects arrays\n                paths1 = [],\n                    paths2 = [],\n                    // contains combinations of already compared objects\n                // in the manner: { \"$1['ref']$2['ref']\": true }\n                compared = {}; /**\n                                * used to check, if the value of a property is an object\n                                * (cyclic logic is only needed for objects)\n                                * only needed for cyclic logic\n                                */\n\n                function isObject(value) {\n                    if ((typeof value === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(value)) === 'object' && value !== null && !(value instanceof Boolean) && !(value instanceof Date) && !(value instanceof Number) && !(value instanceof RegExp) && !(value instanceof String)) {\n                        return true;\n                    }\n\n                    return false;\n                } /**\n                   * returns the index of the given object in the\n                   * given objects array, -1 if not contained\n                   * only needed for cyclic logic\n                   */\n\n                function getIndex(objects, obj) {\n                    var i;\n\n                    for (i = 0; i < objects.length; i++) {\n                        if (objects[i] === obj) {\n                            return i;\n                        }\n                    }\n\n                    return -1;\n                } // does the recursion for the deep equal check\n\n\n                return function () {\n                    function deepEqual(obj1, obj2, path1, path2) {\n                        var type1 = typeof obj1 === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj1);\n                        var type2 = typeof obj2 === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(obj2); // == null also matches undefined\n\n                        if (obj1 === obj2 || isNaN(obj1) || isNaN(obj2) || obj1 == null || obj2 == null || type1 !== \"object\" || type2 !== \"object\") {\n                            return identical(obj1, obj2);\n                        } // Elements are only equal if identical(expected, actual)\n\n\n                        if (isElement(obj1) || isElement(obj2)) {\n                            return false;\n                        }\n\n                        var isDate1 = isDate(obj1),\n                            isDate2 = isDate(obj2);\n\n                        if (isDate1 || isDate2) {\n                            if (!isDate1 || !isDate2 || obj1.getTime() !== obj2.getTime()) {\n                                return false;\n                            }\n                        }\n\n                        if (obj1 instanceof RegExp && obj2 instanceof RegExp) {\n                            if (obj1.toString() !== obj2.toString()) {\n                                return false;\n                            }\n                        }\n\n                        var class1 = getClass(obj1);\n                        var class2 = getClass(obj2);\n                        var keys1 = keys(obj1);\n                        var keys2 = keys(obj2);\n\n                        if (isArguments(obj1) || isArguments(obj2)) {\n                            if (obj1.length !== obj2.length) {\n                                return false;\n                            }\n                        } else {\n                            if (type1 !== type2 || class1 !== class2 || keys1.length !== keys2.length) {\n                                return false;\n                            }\n                        }\n\n                        var key, i, l, // following vars are used for the cyclic logic\n                        value1, value2, isObject1, isObject2, index1, index2, newPath1, newPath2;\n\n                        for (i = 0, l = keys1.length; i < l; i++) {\n                            key = keys1[i];\n\n                            if (!o.hasOwnProperty.call(obj2, key)) {\n                                return false;\n                            } // Start of the cyclic logic\n\n\n                            value1 = obj1[key];\n                            value2 = obj2[key];\n                            isObject1 = isObject(value1);\n                            isObject2 = isObject(value2); // determine, if the objects were already visited\n                            // (it's faster to check for isObject first, than to\n                            // get -1 from getIndex for non objects)\n\n                            index1 = isObject1 ? getIndex(objects1, value1) : -1;\n                            index2 = isObject2 ? getIndex(objects2, value2) : -1; // determine the new pathes of the objects\n                            // - for non cyclic objects the current path will be extended\n                            //   by current property name\n                            // - for cyclic objects the stored path is taken\n\n                            newPath1 = index1 !== -1 ? paths1[index1] : path1 + '[' + JSON.stringify(key) + ']';\n                            newPath2 = index2 !== -1 ? paths2[index2] : path2 + '[' + JSON.stringify(key) + ']'; // stop recursion if current objects are already compared\n\n                            if (compared[newPath1 + newPath2]) {\n                                return true;\n                            } // remember the current objects and their pathes\n\n\n                            if (index1 === -1 && isObject1) {\n                                objects1.push(value1);\n                                paths1.push(newPath1);\n                            }\n\n                            if (index2 === -1 && isObject2) {\n                                objects2.push(value2);\n                                paths2.push(newPath2);\n                            } // remember that the current objects are already compared\n\n\n                            if (isObject1 && isObject2) {\n                                compared[newPath1 + newPath2] = true;\n                            } // End of cyclic logic\n                            // neither value1 nor value2 is a cycle\n                            // continue with next level\n\n\n                            if (!deepEqual(value1, value2, newPath1, newPath2)) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n\n                    return deepEqual;\n                }()(obj1, obj2, '$1', '$2');\n            }\n\n            var match;\n\n            function arrayContains(array, subset) {\n                if (subset.length === 0) {\n                    return true;\n                }\n\n                var i, l, j, k;\n\n                for (i = 0, l = array.length; i < l; ++i) {\n                    if (match(array[i], subset[0])) {\n                        for (j = 0, k = subset.length; j < k; ++j) {\n                            if (!match(array[i + j], subset[j])) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n                }\n\n                return false;\n            } /**\n               * @name samsam.match\n               * @param Object object\n               * @param Object matcher\n               *\n               * Compare arbitrary value ``object`` with matcher.\n               */\n\n            match = function () {\n                function match(object, matcher) {\n                    if (matcher && typeof matcher.test === \"function\") {\n                        return matcher.test(object);\n                    }\n\n                    if (typeof matcher === \"function\") {\n                        return matcher(object) === true;\n                    }\n\n                    if (typeof matcher === \"string\") {\n                        matcher = matcher.toLowerCase();\n                        var notNull = typeof object === \"string\" || !!object;\n                        return notNull && String(object).toLowerCase().indexOf(matcher) >= 0;\n                    }\n\n                    if (typeof matcher === \"number\") {\n                        return matcher === object;\n                    }\n\n                    if (typeof matcher === \"boolean\") {\n                        return matcher === object;\n                    }\n\n                    if (typeof matcher === \"undefined\") {\n                        return typeof object === \"undefined\";\n                    }\n\n                    if (matcher === null) {\n                        return object === null;\n                    }\n\n                    if (getClass(object) === \"Array\" && getClass(matcher) === \"Array\") {\n                        return arrayContains(object, matcher);\n                    }\n\n                    if (matcher && (typeof matcher === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(matcher)) === \"object\") {\n                        if (matcher === object) {\n                            return true;\n                        }\n\n                        var prop;\n\n                        for (prop in meteorBabelHelpers.sanitizeForInObject(matcher)) {\n                            var value = object[prop];\n\n                            if (typeof value === \"undefined\" && typeof object.getAttribute === \"function\") {\n                                value = object.getAttribute(prop);\n                            }\n\n                            if (matcher[prop] === null || typeof matcher[prop] === 'undefined') {\n                                if (value !== matcher[prop]) {\n                                    return false;\n                                }\n                            } else if (typeof value === \"undefined\" || !match(value, matcher[prop])) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n\n                    throw new Error(\"Matcher was not a string, a number, a \" + \"function, a boolean or an object\");\n                }\n\n                return match;\n            }();\n\n            return {\n                isArguments: isArguments,\n                isElement: isElement,\n                isDate: isDate,\n                isNegZero: isNegZero,\n                identical: identical,\n                deepEqual: deepEqualCyclic,\n                match: match,\n                keys: keys\n            };\n        });\n        (typeof define === \"function\" && define.amd && function (m) {\n            define(\"formatio\", [\"samsam\"], m);\n        } || (typeof module === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(module)) === \"object\" && function (m) {\n            module.exports = m(require(\"samsam\"));\n        } || function (m) {\n            this.formatio = m(this.samsam);\n        })(function (samsam) {\n            var formatio = {\n                excludeConstructors: [\"Object\", /^.$/],\n                quoteStrings: true,\n                limitChildrenCount: 0\n            };\n            var hasOwn = Object.prototype.hasOwnProperty;\n            var specialObjects = [];\n\n            if (typeof global !== \"undefined\") {\n                specialObjects.push({\n                    object: global,\n                    value: \"[object global]\"\n                });\n            }\n\n            if (typeof document !== \"undefined\") {\n                specialObjects.push({\n                    object: document,\n                    value: \"[object HTMLDocument]\"\n                });\n            }\n\n            if (typeof window !== \"undefined\") {\n                specialObjects.push({\n                    object: window,\n                    value: \"[object Window]\"\n                });\n            }\n\n            function functionName(func) {\n                if (!func) {\n                    return \"\";\n                }\n\n                if (func.displayName) {\n                    return func.displayName;\n                }\n\n                if (func.name) {\n                    return func.name;\n                }\n\n                var matches = func.toString().match(/function\\s+([^\\(]+)/m);\n                return matches && matches[1] || \"\";\n            }\n\n            function constructorName(f, object) {\n                var name = functionName(object && object.constructor);\n                var excludes = f.excludeConstructors || formatio.excludeConstructors || [];\n                var i, l;\n\n                for (i = 0, l = excludes.length; i < l; ++i) {\n                    if (typeof excludes[i] === \"string\" && excludes[i] === name) {\n                        return \"\";\n                    } else if (excludes[i].test && excludes[i].test(name)) {\n                        return \"\";\n                    }\n                }\n\n                return name;\n            }\n\n            function isCircular(object, objects) {\n                if ((typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) !== \"object\") {\n                    return false;\n                }\n\n                var i, l;\n\n                for (i = 0, l = objects.length; i < l; ++i) {\n                    if (objects[i] === object) {\n                        return true;\n                    }\n                }\n\n                return false;\n            }\n\n            function ascii(f, object, processed, indent) {\n                if (typeof object === \"string\") {\n                    var qs = f.quoteStrings;\n                    var quote = typeof qs !== \"boolean\" || qs;\n                    return processed || quote ? '\"' + object + '\"' : object;\n                }\n\n                if (typeof object === \"function\" && !(object instanceof RegExp)) {\n                    return ascii.func(object);\n                }\n\n                processed = processed || [];\n\n                if (isCircular(object, processed)) {\n                    return \"[Circular]\";\n                }\n\n                if (Object.prototype.toString.call(object) === \"[object Array]\") {\n                    return ascii.array.call(f, object, processed);\n                }\n\n                if (!object) {\n                    return String(1 / object === -Infinity ? \"-0\" : object);\n                }\n\n                if (samsam.isElement(object)) {\n                    return ascii.element(object);\n                }\n\n                if (typeof object.toString === \"function\" && object.toString !== Object.prototype.toString) {\n                    return object.toString();\n                }\n\n                var i, l;\n\n                for (i = 0, l = specialObjects.length; i < l; i++) {\n                    if (object === specialObjects[i].object) {\n                        return specialObjects[i].value;\n                    }\n                }\n\n                return ascii.object.call(f, object, processed, indent);\n            }\n\n            ascii.func = function (func) {\n                return \"function \" + functionName(func) + \"() {}\";\n            };\n\n            ascii.array = function (array, processed) {\n                processed = processed || [];\n                processed.push(array);\n                var pieces = [];\n                var i, l;\n                l = this.limitChildrenCount > 0 ? Math.min(this.limitChildrenCount, array.length) : array.length;\n\n                for (i = 0; i < l; ++i) {\n                    pieces.push(ascii(this, array[i], processed));\n                }\n\n                if (l < array.length) pieces.push(\"[... \" + (array.length - l) + \" more elements]\");\n                return \"[\" + pieces.join(\", \") + \"]\";\n            };\n\n            ascii.object = function (object, processed, indent) {\n                processed = processed || [];\n                processed.push(object);\n                indent = indent || 0;\n                var pieces = [],\n                    properties = samsam.keys(object).sort();\n                var length = 3;\n                var prop, str, obj, i, k, l;\n                l = this.limitChildrenCount > 0 ? Math.min(this.limitChildrenCount, properties.length) : properties.length;\n\n                for (i = 0; i < l; ++i) {\n                    prop = properties[i];\n                    obj = object[prop];\n\n                    if (isCircular(obj, processed)) {\n                        str = \"[Circular]\";\n                    } else {\n                        str = ascii(this, obj, processed, indent + 2);\n                    }\n\n                    str = (/\\s/.test(prop) ? '\"' + prop + '\"' : prop) + \": \" + str;\n                    length += str.length;\n                    pieces.push(str);\n                }\n\n                var cons = constructorName(this, object);\n                var prefix = cons ? \"[\" + cons + \"] \" : \"\";\n                var is = \"\";\n\n                for (i = 0, k = indent; i < k; ++i) {\n                    is += \" \";\n                }\n\n                if (l < properties.length) pieces.push(\"[... \" + (properties.length - l) + \" more elements]\");\n\n                if (length + indent > 80) {\n                    return prefix + \"{\\n  \" + is + pieces.join(\",\\n  \" + is) + \"\\n\" + is + \"}\";\n                }\n\n                return prefix + \"{ \" + pieces.join(\", \") + \" }\";\n            };\n\n            ascii.element = function (element) {\n                var tagName = element.tagName.toLowerCase();\n                var attrs = element.attributes,\n                    attr,\n                    pairs = [],\n                    attrName,\n                    i,\n                    l,\n                    val;\n\n                for (i = 0, l = attrs.length; i < l; ++i) {\n                    attr = attrs.item(i);\n                    attrName = attr.nodeName.toLowerCase().replace(\"html:\", \"\");\n                    val = attr.nodeValue;\n\n                    if (attrName !== \"contenteditable\" || val !== \"inherit\") {\n                        if (!!val) {\n                            pairs.push(attrName + \"=\\\"\" + val + \"\\\"\");\n                        }\n                    }\n                }\n\n                var formatted = \"<\" + tagName + (pairs.length > 0 ? \" \" : \"\");\n                var content = element.innerHTML;\n\n                if (content.length > 20) {\n                    content = content.substr(0, 20) + \"[...]\";\n                }\n\n                var res = formatted + pairs.join(\" \") + \">\" + content + \"</\" + tagName + \">\";\n                return res.replace(/ contentEditable=\"inherit\"/, \"\");\n            };\n\n            function Formatio(options) {\n                for (var opt in meteorBabelHelpers.sanitizeForInObject(options)) {\n                    this[opt] = options[opt];\n                }\n            }\n\n            Formatio.prototype = {\n                functionName: functionName,\n                configure: function (options) {\n                    return new Formatio(options);\n                },\n                constructorName: function (object) {\n                    return constructorName(this, object);\n                },\n                ascii: function (object, processed, indent) {\n                    return ascii(this, object, processed, indent);\n                }\n            };\n            return Formatio.prototype;\n        });\n        !function (e) {\n            if (\"object\" == (typeof exports === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(exports)) && \"undefined\" != typeof module) module.exports = e();else if (\"function\" == typeof define && define.amd) define([], e);else {\n                var f;\n                \"undefined\" != typeof window ? f = window : \"undefined\" != typeof global ? f = global : \"undefined\" != typeof self && (f = self), f.lolex = e();\n            }\n        }(function () {\n            var define, module, exports;\n            return function () {\n                function e(t, n, r) {\n                    function s(o, u) {\n                        if (!n[o]) {\n                            if (!t[o]) {\n                                var a = typeof require == \"function\" && require;\n                                if (!u && a) return a(o, !0);\n                                if (i) return i(o, !0);\n                                var f = new Error(\"Cannot find module '\" + o + \"'\");\n                                throw f.code = \"MODULE_NOT_FOUND\", f;\n                            }\n\n                            var l = n[o] = {\n                                exports: {}\n                            };\n                            t[o][0].call(l.exports, function (e) {\n                                var n = t[o][1][e];\n                                return s(n ? n : e);\n                            }, l, l.exports, e, t, n, r);\n                        }\n\n                        return n[o].exports;\n                    }\n\n                    var i = typeof require == \"function\" && require;\n\n                    for (var o = 0; o < r.length; o++) {\n                        s(r[o]);\n                    }\n\n                    return s;\n                }\n\n                return e;\n            }()({\n                1: [function (require, module, exports) {\n                    (function (global) {\n                        /*global global, window*/ /**\n                                                   * @author Christian Johansen (christian@cjohansen.no) and contributors\n                                                   * @license BSD\n                                                   *\n                                                   * Copyright (c) 2010-2014 Christian Johansen\n                                                   */(function (global) {\n                            // Make properties writable in IE, as per\n                            // http://www.adequatelygood.com/Replacing-setTimeout-Globally.html\n                            // JSLint being anal\n                            var glbl = global;\n                            global.setTimeout = glbl.setTimeout;\n                            global.clearTimeout = glbl.clearTimeout;\n                            global.setInterval = glbl.setInterval;\n                            global.clearInterval = glbl.clearInterval;\n                            global.Date = glbl.Date; // setImmediate is not a standard function\n                            // avoid adding the prop to the window object if not present\n\n                            if ('setImmediate' in global) {\n                                global.setImmediate = glbl.setImmediate;\n                                global.clearImmediate = glbl.clearImmediate;\n                            } // node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n                            // browsers, a number.\n                            // see https://github.com/cjohansen/Sinon.JS/pull/436\n\n\n                            var NOOP = function () {\n                                return undefined;\n                            };\n\n                            var timeoutResult = setTimeout(NOOP, 0);\n                            var addTimerReturnsObject = (typeof timeoutResult === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(timeoutResult)) === \"object\";\n                            clearTimeout(timeoutResult);\n                            var NativeDate = Date;\n                            var uniqueTimerId = 1; /**\n                                                    * Parse strings like \"01:10:00\" (meaning 1 hour, 10 minutes, 0 seconds) into\n                                                    * number of milliseconds. This is used to support human-readable strings passed\n                                                    * to clock.tick()\n                                                    */\n\n                            function parseTime(str) {\n                                if (!str) {\n                                    return 0;\n                                }\n\n                                var strings = str.split(\":\");\n                                var l = strings.length,\n                                    i = l;\n                                var ms = 0,\n                                    parsed;\n\n                                if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n                                    throw new Error(\"tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits\");\n                                }\n\n                                while (i--) {\n                                    parsed = parseInt(strings[i], 10);\n\n                                    if (parsed >= 60) {\n                                        throw new Error(\"Invalid time \" + str);\n                                    }\n\n                                    ms += parsed * Math.pow(60, l - i - 1);\n                                }\n\n                                return ms * 1000;\n                            } /**\n                               * Used to grok the `now` parameter to createClock.\n                               */\n\n                            function getEpoch(epoch) {\n                                if (!epoch) {\n                                    return 0;\n                                }\n\n                                if (typeof epoch.getTime === \"function\") {\n                                    return epoch.getTime();\n                                }\n\n                                if (typeof epoch === \"number\") {\n                                    return epoch;\n                                }\n\n                                throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n                            }\n\n                            function inRange(from, to, timer) {\n                                return timer && timer.callAt >= from && timer.callAt <= to;\n                            }\n\n                            function mirrorDateProperties(target, source) {\n                                var prop;\n\n                                for (prop in meteorBabelHelpers.sanitizeForInObject(source)) {\n                                    if (source.hasOwnProperty(prop)) {\n                                        target[prop] = source[prop];\n                                    }\n                                } // set special now implementation\n\n\n                                if (source.now) {\n                                    target.now = function () {\n                                        function now() {\n                                            return target.clock.now;\n                                        }\n\n                                        return now;\n                                    }();\n                                } else {\n                                    delete target.now;\n                                } // set special toSource implementation\n\n\n                                if (source.toSource) {\n                                    target.toSource = function () {\n                                        function toSource() {\n                                            return source.toSource();\n                                        }\n\n                                        return toSource;\n                                    }();\n                                } else {\n                                    delete target.toSource;\n                                } // set special toString implementation\n\n\n                                target.toString = function () {\n                                    function toString() {\n                                        return source.toString();\n                                    }\n\n                                    return toString;\n                                }();\n\n                                target.prototype = source.prototype;\n                                target.parse = source.parse;\n                                target.UTC = source.UTC;\n                                target.prototype.toUTCString = source.prototype.toUTCString;\n                                return target;\n                            }\n\n                            function createDate() {\n                                function ClockDate(year, month, date, hour, minute, second, ms) {\n                                    // Defensive and verbose to avoid potential harm in passing\n                                    // explicit undefined when user does not pass argument\n                                    switch (arguments.length) {\n                                        case 0:\n                                            return new NativeDate(ClockDate.clock.now);\n\n                                        case 1:\n                                            return new NativeDate(year);\n\n                                        case 2:\n                                            return new NativeDate(year, month);\n\n                                        case 3:\n                                            return new NativeDate(year, month, date);\n\n                                        case 4:\n                                            return new NativeDate(year, month, date, hour);\n\n                                        case 5:\n                                            return new NativeDate(year, month, date, hour, minute);\n\n                                        case 6:\n                                            return new NativeDate(year, month, date, hour, minute, second);\n\n                                        default:\n                                            return new NativeDate(year, month, date, hour, minute, second, ms);\n                                    }\n                                }\n\n                                return mirrorDateProperties(ClockDate, NativeDate);\n                            }\n\n                            function addTimer(clock, timer) {\n                                if (timer.func === undefined) {\n                                    throw new Error(\"Callback must be provided to timer calls\");\n                                }\n\n                                if (!clock.timers) {\n                                    clock.timers = {};\n                                }\n\n                                timer.id = uniqueTimerId++;\n                                timer.createdAt = clock.now;\n                                timer.callAt = clock.now + (timer.delay || (clock.duringTick ? 1 : 0));\n                                clock.timers[timer.id] = timer;\n\n                                if (addTimerReturnsObject) {\n                                    return {\n                                        id: timer.id,\n                                        ref: NOOP,\n                                        unref: NOOP\n                                    };\n                                }\n\n                                return timer.id;\n                            }\n\n                            function compareTimers(a, b) {\n                                // Sort first by absolute timing\n                                if (a.callAt < b.callAt) {\n                                    return -1;\n                                }\n\n                                if (a.callAt > b.callAt) {\n                                    return 1;\n                                } // Sort next by immediate, immediate timers take precedence\n\n\n                                if (a.immediate && !b.immediate) {\n                                    return -1;\n                                }\n\n                                if (!a.immediate && b.immediate) {\n                                    return 1;\n                                } // Sort next by creation time, earlier-created timers take precedence\n\n\n                                if (a.createdAt < b.createdAt) {\n                                    return -1;\n                                }\n\n                                if (a.createdAt > b.createdAt) {\n                                    return 1;\n                                } // Sort next by id, lower-id timers take precedence\n\n\n                                if (a.id < b.id) {\n                                    return -1;\n                                }\n\n                                if (a.id > b.id) {\n                                    return 1;\n                                } // As timer ids are unique, no fallback `0` is necessary\n\n                            }\n\n                            function firstTimerInRange(clock, from, to) {\n                                var timers = clock.timers,\n                                    timer = null,\n                                    id,\n                                    isInRange;\n\n                                for (id in meteorBabelHelpers.sanitizeForInObject(timers)) {\n                                    if (timers.hasOwnProperty(id)) {\n                                        isInRange = inRange(from, to, timers[id]);\n\n                                        if (isInRange && (!timer || compareTimers(timer, timers[id]) === 1)) {\n                                            timer = timers[id];\n                                        }\n                                    }\n                                }\n\n                                return timer;\n                            }\n\n                            function firstTimer(clock) {\n                                var timers = clock.timers,\n                                    timer = null,\n                                    id;\n\n                                for (id in meteorBabelHelpers.sanitizeForInObject(timers)) {\n                                    if (timers.hasOwnProperty(id)) {\n                                        if (!timer || compareTimers(timer, timers[id]) === 1) {\n                                            timer = timers[id];\n                                        }\n                                    }\n                                }\n\n                                return timer;\n                            }\n\n                            function callTimer(clock, timer) {\n                                var exception;\n\n                                if (typeof timer.interval === \"number\") {\n                                    clock.timers[timer.id].callAt += timer.interval;\n                                } else {\n                                    delete clock.timers[timer.id];\n                                }\n\n                                try {\n                                    if (typeof timer.func === \"function\") {\n                                        timer.func.apply(null, timer.args);\n                                    } else {\n                                        eval(timer.func);\n                                    }\n                                } catch (e) {\n                                    exception = e;\n                                }\n\n                                if (!clock.timers[timer.id]) {\n                                    if (exception) {\n                                        throw exception;\n                                    }\n\n                                    return;\n                                }\n\n                                if (exception) {\n                                    throw exception;\n                                }\n                            }\n\n                            function timerType(timer) {\n                                if (timer.immediate) {\n                                    return \"Immediate\";\n                                } else if (typeof timer.interval !== \"undefined\") {\n                                    return \"Interval\";\n                                } else {\n                                    return \"Timeout\";\n                                }\n                            }\n\n                            function clearTimer(clock, timerId, ttype) {\n                                if (!timerId) {\n                                    // null appears to be allowed in most browsers, and appears to be\n                                    // relied upon by some libraries, like Bootstrap carousel\n                                    return;\n                                }\n\n                                if (!clock.timers) {\n                                    clock.timers = [];\n                                } // in Node, timerId is an object with .ref()/.unref(), and\n                                // its .id field is the actual timer id.\n\n\n                                if ((typeof timerId === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(timerId)) === \"object\") {\n                                    timerId = timerId.id;\n                                }\n\n                                if (clock.timers.hasOwnProperty(timerId)) {\n                                    // check that the ID matches a timer of the correct type\n                                    var timer = clock.timers[timerId];\n\n                                    if (timerType(timer) === ttype) {\n                                        delete clock.timers[timerId];\n                                    } else {\n                                        throw new Error(\"Cannot clear timer: timer created with set\" + ttype + \"() but cleared with clear\" + timerType(timer) + \"()\");\n                                    }\n                                }\n                            }\n\n                            function uninstall(clock, target) {\n                                var method, i, l;\n\n                                for (i = 0, l = clock.methods.length; i < l; i++) {\n                                    method = clock.methods[i];\n\n                                    if (target[method].hadOwnProperty) {\n                                        target[method] = clock[\"_\" + method];\n                                    } else {\n                                        try {\n                                            delete target[method];\n                                        } catch (ignore) {}\n                                    }\n                                } // Prevent multiple executions which will completely remove these props\n\n\n                                clock.methods = [];\n                            }\n\n                            function hijackMethod(target, method, clock) {\n                                var prop;\n                                clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(target, method);\n                                clock[\"_\" + method] = target[method];\n\n                                if (method === \"Date\") {\n                                    var date = mirrorDateProperties(clock[method], target[method]);\n                                    target[method] = date;\n                                } else {\n                                    target[method] = function () {\n                                        return clock[method].apply(clock, arguments);\n                                    };\n\n                                    for (prop in meteorBabelHelpers.sanitizeForInObject(clock[method])) {\n                                        if (clock[method].hasOwnProperty(prop)) {\n                                            target[method][prop] = clock[method][prop];\n                                        }\n                                    }\n                                }\n\n                                target[method].clock = clock;\n                            }\n\n                            var timers = {\n                                setTimeout: setTimeout,\n                                clearTimeout: clearTimeout,\n                                setImmediate: global.setImmediate,\n                                clearImmediate: global.clearImmediate,\n                                setInterval: setInterval,\n                                clearInterval: clearInterval,\n                                Date: Date\n                            };\n\n                            var keys = Object.keys || function (obj) {\n                                var ks = [],\n                                    key;\n\n                                for (key in meteorBabelHelpers.sanitizeForInObject(obj)) {\n                                    if (obj.hasOwnProperty(key)) {\n                                        ks.push(key);\n                                    }\n                                }\n\n                                return ks;\n                            };\n\n                            exports.timers = timers;\n\n                            function createClock(now) {\n                                var clock = {\n                                    now: getEpoch(now),\n                                    timeouts: {},\n                                    Date: createDate()\n                                };\n                                clock.Date.clock = clock;\n\n                                clock.setTimeout = function () {\n                                    function setTimeout(func, timeout) {\n                                        return addTimer(clock, {\n                                            func: func,\n                                            args: Array.prototype.slice.call(arguments, 2),\n                                            delay: timeout\n                                        });\n                                    }\n\n                                    return setTimeout;\n                                }();\n\n                                clock.clearTimeout = function () {\n                                    function clearTimeout(timerId) {\n                                        return clearTimer(clock, timerId, \"Timeout\");\n                                    }\n\n                                    return clearTimeout;\n                                }();\n\n                                clock.setInterval = function () {\n                                    function setInterval(func, timeout) {\n                                        return addTimer(clock, {\n                                            func: func,\n                                            args: Array.prototype.slice.call(arguments, 2),\n                                            delay: timeout,\n                                            interval: timeout\n                                        });\n                                    }\n\n                                    return setInterval;\n                                }();\n\n                                clock.clearInterval = function () {\n                                    function clearInterval(timerId) {\n                                        return clearTimer(clock, timerId, \"Interval\");\n                                    }\n\n                                    return clearInterval;\n                                }();\n\n                                clock.setImmediate = function () {\n                                    function setImmediate(func) {\n                                        return addTimer(clock, {\n                                            func: func,\n                                            args: Array.prototype.slice.call(arguments, 1),\n                                            immediate: true\n                                        });\n                                    }\n\n                                    return setImmediate;\n                                }();\n\n                                clock.clearImmediate = function () {\n                                    function clearImmediate(timerId) {\n                                        return clearTimer(clock, timerId, \"Immediate\");\n                                    }\n\n                                    return clearImmediate;\n                                }();\n\n                                clock.tick = function () {\n                                    function tick(ms) {\n                                        ms = typeof ms === \"number\" ? ms : parseTime(ms);\n                                        var tickFrom = clock.now,\n                                            tickTo = clock.now + ms,\n                                            previous = clock.now;\n                                        var timer = firstTimerInRange(clock, tickFrom, tickTo);\n                                        var oldNow;\n                                        clock.duringTick = true;\n                                        var firstException;\n\n                                        while (timer && tickFrom <= tickTo) {\n                                            if (clock.timers[timer.id]) {\n                                                tickFrom = clock.now = timer.callAt;\n\n                                                try {\n                                                    oldNow = clock.now;\n                                                    callTimer(clock, timer); // compensate for any setSystemTime() call during timer callback\n\n                                                    if (oldNow !== clock.now) {\n                                                        tickFrom += clock.now - oldNow;\n                                                        tickTo += clock.now - oldNow;\n                                                        previous += clock.now - oldNow;\n                                                    }\n                                                } catch (e) {\n                                                    firstException = firstException || e;\n                                                }\n                                            }\n\n                                            timer = firstTimerInRange(clock, previous, tickTo);\n                                            previous = tickFrom;\n                                        }\n\n                                        clock.duringTick = false;\n                                        clock.now = tickTo;\n\n                                        if (firstException) {\n                                            throw firstException;\n                                        }\n\n                                        return clock.now;\n                                    }\n\n                                    return tick;\n                                }();\n\n                                clock.next = function () {\n                                    function next() {\n                                        var timer = firstTimer(clock);\n\n                                        if (!timer) {\n                                            return clock.now;\n                                        }\n\n                                        clock.duringTick = true;\n\n                                        try {\n                                            clock.now = timer.callAt;\n                                            callTimer(clock, timer);\n                                            return clock.now;\n                                        } finally {\n                                            clock.duringTick = false;\n                                        }\n                                    }\n\n                                    return next;\n                                }();\n\n                                clock.reset = function () {\n                                    function reset() {\n                                        clock.timers = {};\n                                    }\n\n                                    return reset;\n                                }();\n\n                                clock.setSystemTime = function () {\n                                    function setSystemTime(now) {\n                                        // determine time difference\n                                        var newNow = getEpoch(now);\n                                        var difference = newNow - clock.now; // update 'system clock'\n\n                                        clock.now = newNow; // update timers and intervals to keep them stable\n\n                                        for (var id in meteorBabelHelpers.sanitizeForInObject(clock.timers)) {\n                                            if (clock.timers.hasOwnProperty(id)) {\n                                                var timer = clock.timers[id];\n                                                timer.createdAt += difference;\n                                                timer.callAt += difference;\n                                            }\n                                        }\n                                    }\n\n                                    return setSystemTime;\n                                }();\n\n                                return clock;\n                            }\n\n                            exports.createClock = createClock;\n\n                            exports.install = function () {\n                                function install(target, now, toFake) {\n                                    var i, l;\n\n                                    if (typeof target === \"number\") {\n                                        toFake = now;\n                                        now = target;\n                                        target = null;\n                                    }\n\n                                    if (!target) {\n                                        target = global;\n                                    }\n\n                                    var clock = createClock(now);\n\n                                    clock.uninstall = function () {\n                                        uninstall(clock, target);\n                                    };\n\n                                    clock.methods = toFake || [];\n\n                                    if (clock.methods.length === 0) {\n                                        clock.methods = keys(timers);\n                                    }\n\n                                    for (i = 0, l = clock.methods.length; i < l; i++) {\n                                        hijackMethod(target, clock.methods[i], clock);\n                                    }\n\n                                    return clock;\n                                }\n\n                                return install;\n                            }();\n                        })(global || this);\n                    }).call(this, typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {});\n                }, {}]\n            }, {}, [1])(1);\n        });\n    })();\n\n    var define; /**\n                 * Sinon core utilities. For internal use only.\n                 *\n                 * @author Christian Johansen (christian@cjohansen.no)\n                 * @license BSD\n                 *\n                 * Copyright (c) 2010-2013 Christian Johansen\n                 */\n\n    var sinon = function () {\n        \"use strict\"; // eslint-disable-line no-unused-vars\n\n        var sinonModule;\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            sinonModule = module.exports = require(\"./sinon/util/core\");\n\n            require(\"./sinon/extend\");\n\n            require(\"./sinon/walk\");\n\n            require(\"./sinon/typeOf\");\n\n            require(\"./sinon/times_in_words\");\n\n            require(\"./sinon/spy\");\n\n            require(\"./sinon/call\");\n\n            require(\"./sinon/behavior\");\n\n            require(\"./sinon/stub\");\n\n            require(\"./sinon/mock\");\n\n            require(\"./sinon/collection\");\n\n            require(\"./sinon/assert\");\n\n            require(\"./sinon/sandbox\");\n\n            require(\"./sinon/test\");\n\n            require(\"./sinon/test_case\");\n\n            require(\"./sinon/match\");\n\n            require(\"./sinon/format\");\n\n            require(\"./sinon/log_error\");\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require, module.exports, module);\n            sinonModule = module.exports;\n        } else {\n            sinonModule = {};\n        }\n\n        return sinonModule;\n    }(); /**\n          * @depend ../../sinon.js\n          */ /**\n              * Sinon core utilities. For internal use only.\n              *\n              * @author Christian Johansen (christian@cjohansen.no)\n              * @license BSD\n              *\n              * Copyright (c) 2010-2013 Christian Johansen\n              */\n\n    (function (sinonGlobal) {\n        var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n        var hasOwn = Object.prototype.hasOwnProperty;\n\n        function isDOMNode(obj) {\n            var success = false;\n\n            try {\n                obj.appendChild(div);\n                success = div.parentNode === obj;\n            } catch (e) {\n                return false;\n            } finally {\n                try {\n                    obj.removeChild(div);\n                } catch (e) {// Remove failed, not much we can do about that\n                }\n            }\n\n            return success;\n        }\n\n        function isElement(obj) {\n            return div && obj && obj.nodeType === 1 && isDOMNode(obj);\n        }\n\n        function isFunction(obj) {\n            return typeof obj === \"function\" || !!(obj && obj.constructor && obj.call && obj.apply);\n        }\n\n        function isReallyNaN(val) {\n            return typeof val === \"number\" && isNaN(val);\n        }\n\n        function mirrorProperties(target, source) {\n            for (var prop in meteorBabelHelpers.sanitizeForInObject(source)) {\n                if (!hasOwn.call(target, prop)) {\n                    target[prop] = source[prop];\n                }\n            }\n        }\n\n        function isRestorable(obj) {\n            return typeof obj === \"function\" && typeof obj.restore === \"function\" && obj.restore.sinon;\n        } // Cheap way to detect if we have ES5 support.\n\n\n        var hasES5Support = \"keys\" in Object;\n\n        function makeApi(sinon) {\n            sinon.wrapMethod = function () {\n                function wrapMethod(object, property, method) {\n                    if (!object) {\n                        throw new TypeError(\"Should wrap property of object\");\n                    }\n\n                    if (typeof method !== \"function\" && (typeof method === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(method)) !== \"object\") {\n                        throw new TypeError(\"Method wrapper should be a function or a property descriptor\");\n                    }\n\n                    function checkWrappedMethod(wrappedMethod) {\n                        var error;\n\n                        if (!isFunction(wrappedMethod)) {\n                            error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(wrappedMethod)) + \" property \" + property + \" as function\");\n                        } else if (wrappedMethod.restore && wrappedMethod.restore.sinon) {\n                            error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                        } else if (wrappedMethod.calledBefore) {\n                            var verb = wrappedMethod.returns ? \"stubbed\" : \"spied on\";\n                            error = new TypeError(\"Attempted to wrap \" + property + \" which is already \" + verb);\n                        }\n\n                        if (error) {\n                            if (wrappedMethod && wrappedMethod.stackTrace) {\n                                error.stack += \"\\n--------------\\n\" + wrappedMethod.stackTrace;\n                            }\n\n                            throw error;\n                        }\n                    }\n\n                    var error, wrappedMethod, i; // IE 8 does not support hasOwnProperty on the window object and Firefox has a problem\n                    // when using hasOwn.call on objects from other frames.\n\n                    var owned = object.hasOwnProperty ? object.hasOwnProperty(property) : hasOwn.call(object, property);\n\n                    if (hasES5Support) {\n                        var methodDesc = typeof method === \"function\" ? {\n                            value: method\n                        } : method;\n                        var wrappedMethodDesc = sinon.getPropertyDescriptor(object, property);\n\n                        if (!wrappedMethodDesc) {\n                            error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(wrappedMethod)) + \" property \" + property + \" as function\");\n                        } else if (wrappedMethodDesc.restore && wrappedMethodDesc.restore.sinon) {\n                            error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                        }\n\n                        if (error) {\n                            if (wrappedMethodDesc && wrappedMethodDesc.stackTrace) {\n                                error.stack += \"\\n--------------\\n\" + wrappedMethodDesc.stackTrace;\n                            }\n\n                            throw error;\n                        }\n\n                        var types = sinon.objectKeys(methodDesc);\n\n                        for (i = 0; i < types.length; i++) {\n                            wrappedMethod = wrappedMethodDesc[types[i]];\n                            checkWrappedMethod(wrappedMethod);\n                        }\n\n                        mirrorProperties(methodDesc, wrappedMethodDesc);\n\n                        for (i = 0; i < types.length; i++) {\n                            mirrorProperties(methodDesc[types[i]], wrappedMethodDesc[types[i]]);\n                        }\n\n                        Object.defineProperty(object, property, methodDesc);\n                    } else {\n                        wrappedMethod = object[property];\n                        checkWrappedMethod(wrappedMethod);\n                        object[property] = method;\n                        method.displayName = property;\n                    }\n\n                    method.displayName = property; // Set up a stack trace which can be used later to find what line of\n                    // code the original method was created on.\n\n                    method.stackTrace = new Error(\"Stack Trace for original\").stack;\n\n                    method.restore = function () {\n                        // For prototype properties try to reset by delete first.\n                        // If this fails (ex: localStorage on mobile safari) then force a reset\n                        // via direct assignment.\n                        if (!owned) {\n                            // In some cases `delete` may throw an error\n                            try {\n                                delete object[property];\n                            } catch (e) {} // eslint-disable-line no-empty\n                            // For native code functions `delete` fails without throwing an error\n                            // on Chrome < 43, PhantomJS, etc.\n\n                        } else if (hasES5Support) {\n                            Object.defineProperty(object, property, wrappedMethodDesc);\n                        } // Use strict equality comparison to check failures then force a reset\n                        // via direct assignment.\n\n\n                        if (object[property] === method) {\n                            object[property] = wrappedMethod;\n                        }\n                    };\n\n                    method.restore.sinon = true;\n\n                    if (!hasES5Support) {\n                        mirrorProperties(method, wrappedMethod);\n                    }\n\n                    return method;\n                }\n\n                return wrapMethod;\n            }();\n\n            sinon.create = function () {\n                function create(proto) {\n                    var F = function () {};\n\n                    F.prototype = proto;\n                    return new F();\n                }\n\n                return create;\n            }();\n\n            sinon.deepEqual = function () {\n                function deepEqual(a, b) {\n                    if (sinon.match && sinon.match.isMatcher(a)) {\n                        return a.test(b);\n                    }\n\n                    if ((typeof a === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(a)) !== \"object\" || (typeof b === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(b)) !== \"object\") {\n                        return isReallyNaN(a) && isReallyNaN(b) || a === b;\n                    }\n\n                    if (isElement(a) || isElement(b)) {\n                        return a === b;\n                    }\n\n                    if (a === b) {\n                        return true;\n                    }\n\n                    if (a === null && b !== null || a !== null && b === null) {\n                        return false;\n                    }\n\n                    if (a instanceof RegExp && b instanceof RegExp) {\n                        return a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline;\n                    }\n\n                    var aString = Object.prototype.toString.call(a);\n\n                    if (aString !== Object.prototype.toString.call(b)) {\n                        return false;\n                    }\n\n                    if (aString === \"[object Date]\") {\n                        return a.valueOf() === b.valueOf();\n                    }\n\n                    var prop;\n                    var aLength = 0;\n                    var bLength = 0;\n\n                    if (aString === \"[object Array]\" && a.length !== b.length) {\n                        return false;\n                    }\n\n                    for (prop in meteorBabelHelpers.sanitizeForInObject(a)) {\n                        if (a.hasOwnProperty(prop)) {\n                            aLength += 1;\n\n                            if (!(prop in b)) {\n                                return false;\n                            }\n\n                            if (!deepEqual(a[prop], b[prop])) {\n                                return false;\n                            }\n                        }\n                    }\n\n                    for (prop in meteorBabelHelpers.sanitizeForInObject(b)) {\n                        if (b.hasOwnProperty(prop)) {\n                            bLength += 1;\n                        }\n                    }\n\n                    return aLength === bLength;\n                }\n\n                return deepEqual;\n            }();\n\n            sinon.functionName = function () {\n                function functionName(func) {\n                    var name = func.displayName || func.name; // Use function decomposition as a last resort to get function\n                    // name. Does not rely on function decomposition to work - if it\n                    // doesn't debugging will be slightly less informative\n                    // (i.e. toString will say 'spy' rather than 'myFunc').\n\n                    if (!name) {\n                        var matches = func.toString().match(/function ([^\\s\\(]+)/);\n                        name = matches && matches[1];\n                    }\n\n                    return name;\n                }\n\n                return functionName;\n            }();\n\n            sinon.functionToString = function () {\n                function toString() {\n                    if (this.getCall && this.callCount) {\n                        var thisValue, prop;\n                        var i = this.callCount;\n\n                        while (i--) {\n                            thisValue = this.getCall(i).thisValue;\n\n                            for (prop in meteorBabelHelpers.sanitizeForInObject(thisValue)) {\n                                if (thisValue[prop] === this) {\n                                    return prop;\n                                }\n                            }\n                        }\n                    }\n\n                    return this.displayName || \"sinon fake\";\n                }\n\n                return toString;\n            }();\n\n            sinon.objectKeys = function () {\n                function objectKeys(obj) {\n                    if (obj !== Object(obj)) {\n                        throw new TypeError(\"sinon.objectKeys called on a non-object\");\n                    }\n\n                    var keys = [];\n                    var key;\n\n                    for (key in meteorBabelHelpers.sanitizeForInObject(obj)) {\n                        if (hasOwn.call(obj, key)) {\n                            keys.push(key);\n                        }\n                    }\n\n                    return keys;\n                }\n\n                return objectKeys;\n            }();\n\n            sinon.getPropertyDescriptor = function () {\n                function getPropertyDescriptor(object, property) {\n                    var proto = object;\n                    var descriptor;\n\n                    while (proto && !(descriptor = Object.getOwnPropertyDescriptor(proto, property))) {\n                        proto = Object.getPrototypeOf(proto);\n                    }\n\n                    return descriptor;\n                }\n\n                return getPropertyDescriptor;\n            }();\n\n            sinon.getConfig = function (custom) {\n                var config = {};\n                custom = custom || {};\n                var defaults = sinon.defaultConfig;\n\n                for (var prop in meteorBabelHelpers.sanitizeForInObject(defaults)) {\n                    if (defaults.hasOwnProperty(prop)) {\n                        config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];\n                    }\n                }\n\n                return config;\n            };\n\n            sinon.defaultConfig = {\n                injectIntoThis: true,\n                injectInto: null,\n                properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n                useFakeTimers: true,\n                useFakeServer: true\n            };\n\n            sinon.timesInWords = function () {\n                function timesInWords(count) {\n                    return count === 1 && \"once\" || count === 2 && \"twice\" || count === 3 && \"thrice\" || (count || 0) + \" times\";\n                }\n\n                return timesInWords;\n            }();\n\n            sinon.calledInOrder = function (spies) {\n                for (var i = 1, l = spies.length; i < l; i++) {\n                    if (!spies[i - 1].calledBefore(spies[i]) || !spies[i].called) {\n                        return false;\n                    }\n                }\n\n                return true;\n            };\n\n            sinon.orderByFirstCall = function (spies) {\n                return spies.sort(function (a, b) {\n                    // uuid, won't ever be equal\n                    var aCall = a.getCall(0);\n                    var bCall = b.getCall(0);\n                    var aId = aCall && aCall.callId || -1;\n                    var bId = bCall && bCall.callId || -1;\n                    return aId < bId ? -1 : 1;\n                });\n            };\n\n            sinon.createStubInstance = function (constructor) {\n                if (typeof constructor !== \"function\") {\n                    throw new TypeError(\"The constructor should be a function.\");\n                }\n\n                return sinon.stub(sinon.create(constructor.prototype));\n            };\n\n            sinon.restore = function (object) {\n                if (object !== null && (typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) === \"object\") {\n                    for (var prop in meteorBabelHelpers.sanitizeForInObject(object)) {\n                        if (isRestorable(object[prop])) {\n                            object[prop].restore();\n                        }\n                    }\n                } else if (isRestorable(object)) {\n                    object.restore();\n                }\n            };\n\n            return sinon;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports) {\n            makeApi(exports);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            // Adapted from https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n            var hasDontEnumBug = function () {\n                var obj = {\n                    constructor: function () {\n                        return \"0\";\n                    },\n                    toString: function () {\n                        return \"1\";\n                    },\n                    valueOf: function () {\n                        return \"2\";\n                    },\n                    toLocaleString: function () {\n                        return \"3\";\n                    },\n                    prototype: function () {\n                        return \"4\";\n                    },\n                    isPrototypeOf: function () {\n                        return \"5\";\n                    },\n                    propertyIsEnumerable: function () {\n                        return \"6\";\n                    },\n                    hasOwnProperty: function () {\n                        return \"7\";\n                    },\n                    length: function () {\n                        return \"8\";\n                    },\n                    unique: function () {\n                        return \"9\";\n                    }\n                };\n                var result = [];\n\n                for (var prop in meteorBabelHelpers.sanitizeForInObject(obj)) {\n                    if (obj.hasOwnProperty(prop)) {\n                        result.push(obj[prop]());\n                    }\n                }\n\n                return result.join(\"\") !== \"0123456789\";\n            }(); /* Public: Extend target in place with all (own) properties from sources in-order. Thus, last source will\n                  *         override properties in previous sources.\n                  *\n                  * target - The Object to extend\n                  * sources - Objects to copy properties from.\n                  *\n                  * Returns the extended target\n                  */\n\n            function extend(target /*, sources */) {\n                var sources = Array.prototype.slice.call(arguments, 1);\n                var source, i, prop;\n\n                for (i = 0; i < sources.length; i++) {\n                    source = sources[i];\n\n                    for (prop in meteorBabelHelpers.sanitizeForInObject(source)) {\n                        if (source.hasOwnProperty(prop)) {\n                            target[prop] = source[prop];\n                        }\n                    } // Make sure we copy (own) toString method even when in JScript with DontEnum bug\n                    // See https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n\n\n                    if (hasDontEnumBug && source.hasOwnProperty(\"toString\") && source.toString !== target.toString) {\n                        target.toString = source.toString;\n                    }\n                }\n\n                return target;\n            }\n\n            sinon.extend = extend;\n            return sinon.extend;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            function timesInWords(count) {\n                switch (count) {\n                    case 1:\n                        return \"once\";\n\n                    case 2:\n                        return \"twice\";\n\n                    case 3:\n                        return \"thrice\";\n\n                    default:\n                        return (count || 0) + \" times\";\n                }\n            }\n\n            sinon.timesInWords = timesInWords;\n            return sinon.timesInWords;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            module.exports = makeApi(core);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        */ /**\n            * Format functions\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2014 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            function typeOf(value) {\n                if (value === null) {\n                    return \"null\";\n                } else if (value === undefined) {\n                    return \"undefined\";\n                }\n\n                var string = Object.prototype.toString.call(value);\n                return string.substring(8, string.length - 1).toLowerCase();\n            }\n\n            sinon.typeOf = typeOf;\n            return sinon.typeOf;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            module.exports = makeApi(core);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        * @depend typeOf.js\n        */ /*jslint eqeqeq: false, onevar: false, plusplus: false*/ /*global module, require, sinon*/ /**\n                                                                                                       * Match functions\n                                                                                                       *\n                                                                                                       * @author Maximilian Antoni (mail@maxantoni.de)\n                                                                                                       * @license BSD\n                                                                                                       *\n                                                                                                       * Copyright (c) 2012 Maximilian Antoni\n                                                                                                       */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            function assertType(value, type, name) {\n                var actual = sinon.typeOf(value);\n\n                if (actual !== type) {\n                    throw new TypeError(\"Expected type of \" + name + \" to be \" + type + \", but was \" + actual);\n                }\n            }\n\n            var matcher = {\n                toString: function () {\n                    return this.message;\n                }\n            };\n\n            function isMatcher(object) {\n                return matcher.isPrototypeOf(object);\n            }\n\n            function matchObject(expectation, actual) {\n                if (actual === null || actual === undefined) {\n                    return false;\n                }\n\n                for (var key in meteorBabelHelpers.sanitizeForInObject(expectation)) {\n                    if (expectation.hasOwnProperty(key)) {\n                        var exp = expectation[key];\n                        var act = actual[key];\n\n                        if (isMatcher(exp)) {\n                            if (!exp.test(act)) {\n                                return false;\n                            }\n                        } else if (sinon.typeOf(exp) === \"object\") {\n                            if (!matchObject(exp, act)) {\n                                return false;\n                            }\n                        } else if (!sinon.deepEqual(exp, act)) {\n                            return false;\n                        }\n                    }\n                }\n\n                return true;\n            }\n\n            function match(expectation, message) {\n                var m = sinon.create(matcher);\n                var type = sinon.typeOf(expectation);\n\n                switch (type) {\n                    case \"object\":\n                        if (typeof expectation.test === \"function\") {\n                            m.test = function (actual) {\n                                return expectation.test(actual) === true;\n                            };\n\n                            m.message = \"match(\" + sinon.functionName(expectation.test) + \")\";\n                            return m;\n                        }\n\n                        var str = [];\n\n                        for (var key in meteorBabelHelpers.sanitizeForInObject(expectation)) {\n                            if (expectation.hasOwnProperty(key)) {\n                                str.push(key + \": \" + expectation[key]);\n                            }\n                        }\n\n                        m.test = function (actual) {\n                            return matchObject(expectation, actual);\n                        };\n\n                        m.message = \"match(\" + str.join(\", \") + \")\";\n                        break;\n\n                    case \"number\":\n                        m.test = function (actual) {\n                            // we need type coercion here\n                            return expectation == actual; // eslint-disable-line eqeqeq\n                        };\n\n                        break;\n\n                    case \"string\":\n                        m.test = function (actual) {\n                            if (typeof actual !== \"string\") {\n                                return false;\n                            }\n\n                            return actual.indexOf(expectation) !== -1;\n                        };\n\n                        m.message = \"match(\\\"\" + expectation + \"\\\")\";\n                        break;\n\n                    case \"regexp\":\n                        m.test = function (actual) {\n                            if (typeof actual !== \"string\") {\n                                return false;\n                            }\n\n                            return expectation.test(actual);\n                        };\n\n                        break;\n\n                    case \"function\":\n                        m.test = expectation;\n\n                        if (message) {\n                            m.message = message;\n                        } else {\n                            m.message = \"match(\" + sinon.functionName(expectation) + \")\";\n                        }\n\n                        break;\n\n                    default:\n                        m.test = function (actual) {\n                            return sinon.deepEqual(expectation, actual);\n                        };\n\n                }\n\n                if (!m.message) {\n                    m.message = \"match(\" + expectation + \")\";\n                }\n\n                return m;\n            }\n\n            matcher.or = function (m2) {\n                if (!arguments.length) {\n                    throw new TypeError(\"Matcher expected\");\n                } else if (!isMatcher(m2)) {\n                    m2 = match(m2);\n                }\n\n                var m1 = this;\n                var or = sinon.create(matcher);\n\n                or.test = function (actual) {\n                    return m1.test(actual) || m2.test(actual);\n                };\n\n                or.message = m1.message + \".or(\" + m2.message + \")\";\n                return or;\n            };\n\n            matcher.and = function (m2) {\n                if (!arguments.length) {\n                    throw new TypeError(\"Matcher expected\");\n                } else if (!isMatcher(m2)) {\n                    m2 = match(m2);\n                }\n\n                var m1 = this;\n                var and = sinon.create(matcher);\n\n                and.test = function (actual) {\n                    return m1.test(actual) && m2.test(actual);\n                };\n\n                and.message = m1.message + \".and(\" + m2.message + \")\";\n                return and;\n            };\n\n            match.isMatcher = isMatcher;\n            match.any = match(function () {\n                return true;\n            }, \"any\");\n            match.defined = match(function (actual) {\n                return actual !== null && actual !== undefined;\n            }, \"defined\");\n            match.truthy = match(function (actual) {\n                return !!actual;\n            }, \"truthy\");\n            match.falsy = match(function (actual) {\n                return !actual;\n            }, \"falsy\");\n\n            match.same = function (expectation) {\n                return match(function (actual) {\n                    return expectation === actual;\n                }, \"same(\" + expectation + \")\");\n            };\n\n            match.typeOf = function (type) {\n                assertType(type, \"string\", \"type\");\n                return match(function (actual) {\n                    return sinon.typeOf(actual) === type;\n                }, \"typeOf(\\\"\" + type + \"\\\")\");\n            };\n\n            match.instanceOf = function (type) {\n                assertType(type, \"function\", \"type\");\n                return match(function (actual) {\n                    return actual instanceof type;\n                }, \"instanceOf(\" + sinon.functionName(type) + \")\");\n            };\n\n            function createPropertyMatcher(propertyTest, messagePrefix) {\n                return function (property, value) {\n                    assertType(property, \"string\", \"property\");\n                    var onlyProperty = arguments.length === 1;\n                    var message = messagePrefix + \"(\\\"\" + property + \"\\\"\";\n\n                    if (!onlyProperty) {\n                        message += \", \" + value;\n                    }\n\n                    message += \")\";\n                    return match(function (actual) {\n                        if (actual === undefined || actual === null || !propertyTest(actual, property)) {\n                            return false;\n                        }\n\n                        return onlyProperty || sinon.deepEqual(value, actual[property]);\n                    }, message);\n                };\n            }\n\n            match.has = createPropertyMatcher(function (actual, property) {\n                if ((typeof actual === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(actual)) === \"object\") {\n                    return property in actual;\n                }\n\n                return actual[property] !== undefined;\n            }, \"has\");\n            match.hasOwn = createPropertyMatcher(function (actual, property) {\n                return actual.hasOwnProperty(property);\n            }, \"hasOwn\");\n            match.bool = match.typeOf(\"boolean\");\n            match.number = match.typeOf(\"number\");\n            match.string = match.typeOf(\"string\");\n            match.object = match.typeOf(\"object\");\n            match.func = match.typeOf(\"function\");\n            match.array = match.typeOf(\"array\");\n            match.regexp = match.typeOf(\"regexp\");\n            match.date = match.typeOf(\"date\");\n            sinon.match = match;\n            return match;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./typeOf\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        */ /**\n            * Format functions\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2014 Christian Johansen\n            */\n\n    (function (sinonGlobal, formatio) {\n        function makeApi(sinon) {\n            function valueFormatter(value) {\n                return \"\" + value;\n            }\n\n            function getFormatioFormatter() {\n                var formatter = formatio.configure({\n                    quoteStrings: false,\n                    limitChildrenCount: 250\n                });\n\n                function format() {\n                    return formatter.ascii.apply(formatter, arguments);\n                }\n\n                return format;\n            }\n\n            function getNodeFormatter() {\n                try {\n                    var util = require(\"util\");\n                } catch (e) {/* Node, but no util module - would be very old, but better safe than sorry */}\n\n                function format(v) {\n                    var isObjectWithNativeToString = (typeof v === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(v)) === \"object\" && v.toString === Object.prototype.toString;\n                    return isObjectWithNativeToString ? util.inspect(v) : v;\n                }\n\n                return util ? format : valueFormatter;\n            }\n\n            var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n            var formatter;\n\n            if (isNode) {\n                try {\n                    formatio = require(\"formatio\");\n                } catch (e) {} // eslint-disable-line no-empty\n\n            }\n\n            if (formatio) {\n                formatter = getFormatioFormatter();\n            } else if (isNode) {\n                formatter = getNodeFormatter();\n            } else {\n                formatter = valueFormatter;\n            }\n\n            sinon.format = formatter;\n            return sinon.format;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon, // eslint-disable-line no-undef\n    (typeof formatio === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(formatio)) === \"object\" && formatio // eslint-disable-line no-undef\n    ); /**\n         * @depend util/core.js\n         * @depend match.js\n         * @depend format.js\n         */ /**\n              * Spy calls\n              *\n              * @author Christian Johansen (christian@cjohansen.no)\n              * @author Maximilian Antoni (mail@maxantoni.de)\n              * @license BSD\n              *\n              * Copyright (c) 2010-2013 Christian Johansen\n              * Copyright (c) 2013 Maximilian Antoni\n              */\n\n    (function (sinonGlobal) {\n        var slice = Array.prototype.slice;\n\n        function makeApi(sinon) {\n            function throwYieldError(proxy, text, args) {\n                var msg = sinon.functionName(proxy) + text;\n\n                if (args.length) {\n                    msg += \" Received [\" + slice.call(args).join(\", \") + \"]\";\n                }\n\n                throw new Error(msg);\n            }\n\n            var callProto = {\n                calledOn: function () {\n                    function calledOn(thisValue) {\n                        if (sinon.match && sinon.match.isMatcher(thisValue)) {\n                            return thisValue.test(this.thisValue);\n                        }\n\n                        return this.thisValue === thisValue;\n                    }\n\n                    return calledOn;\n                }(),\n                calledWith: function () {\n                    function calledWith() {\n                        var l = arguments.length;\n\n                        if (l > this.args.length) {\n                            return false;\n                        }\n\n                        for (var i = 0; i < l; i += 1) {\n                            if (!sinon.deepEqual(arguments[i], this.args[i])) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n\n                    return calledWith;\n                }(),\n                calledWithMatch: function () {\n                    function calledWithMatch() {\n                        var l = arguments.length;\n\n                        if (l > this.args.length) {\n                            return false;\n                        }\n\n                        for (var i = 0; i < l; i += 1) {\n                            var actual = this.args[i];\n                            var expectation = arguments[i];\n\n                            if (!sinon.match || !sinon.match(expectation).test(actual)) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n\n                    return calledWithMatch;\n                }(),\n                calledWithExactly: function () {\n                    function calledWithExactly() {\n                        return arguments.length === this.args.length && this.calledWith.apply(this, arguments);\n                    }\n\n                    return calledWithExactly;\n                }(),\n                notCalledWith: function () {\n                    function notCalledWith() {\n                        return !this.calledWith.apply(this, arguments);\n                    }\n\n                    return notCalledWith;\n                }(),\n                notCalledWithMatch: function () {\n                    function notCalledWithMatch() {\n                        return !this.calledWithMatch.apply(this, arguments);\n                    }\n\n                    return notCalledWithMatch;\n                }(),\n                returned: function () {\n                    function returned(value) {\n                        return sinon.deepEqual(value, this.returnValue);\n                    }\n\n                    return returned;\n                }(),\n                threw: function () {\n                    function threw(error) {\n                        if (typeof error === \"undefined\" || !this.exception) {\n                            return !!this.exception;\n                        }\n\n                        return this.exception === error || this.exception.name === error;\n                    }\n\n                    return threw;\n                }(),\n                calledWithNew: function () {\n                    function calledWithNew() {\n                        return this.proxy.prototype && this.thisValue instanceof this.proxy;\n                    }\n\n                    return calledWithNew;\n                }(),\n                calledBefore: function (other) {\n                    return this.callId < other.callId;\n                },\n                calledAfter: function (other) {\n                    return this.callId > other.callId;\n                },\n                callArg: function (pos) {\n                    this.args[pos]();\n                },\n                callArgOn: function (pos, thisValue) {\n                    this.args[pos].apply(thisValue);\n                },\n                callArgWith: function (pos) {\n                    this.callArgOnWith.apply(this, [pos, null].concat(slice.call(arguments, 1)));\n                },\n                callArgOnWith: function (pos, thisValue) {\n                    var args = slice.call(arguments, 2);\n                    this.args[pos].apply(thisValue, args);\n                },\n                \"yield\": function () {\n                    this.yieldOn.apply(this, [null].concat(slice.call(arguments, 0)));\n                },\n                yieldOn: function (thisValue) {\n                    var args = this.args;\n\n                    for (var i = 0, l = args.length; i < l; ++i) {\n                        if (typeof args[i] === \"function\") {\n                            args[i].apply(thisValue, slice.call(arguments, 1));\n                            return;\n                        }\n                    }\n\n                    throwYieldError(this.proxy, \" cannot yield since no callback was passed.\", args);\n                },\n                yieldTo: function (prop) {\n                    this.yieldToOn.apply(this, [prop, null].concat(slice.call(arguments, 1)));\n                },\n                yieldToOn: function (prop, thisValue) {\n                    var args = this.args;\n\n                    for (var i = 0, l = args.length; i < l; ++i) {\n                        if (args[i] && typeof args[i][prop] === \"function\") {\n                            args[i][prop].apply(thisValue, slice.call(arguments, 2));\n                            return;\n                        }\n                    }\n\n                    throwYieldError(this.proxy, \" cannot yield to '\" + prop + \"' since no callback was passed.\", args);\n                },\n                getStackFrames: function () {\n                    // Omit the error message and the two top stack frames in sinon itself:\n                    return this.stack && this.stack.split(\"\\n\").slice(3);\n                },\n                toString: function () {\n                    var callStr = this.proxy ? this.proxy.toString() + \"(\" : \"\";\n                    var args = [];\n\n                    if (!this.args) {\n                        return \":(\";\n                    }\n\n                    for (var i = 0, l = this.args.length; i < l; ++i) {\n                        args.push(sinon.format(this.args[i]));\n                    }\n\n                    callStr = callStr + args.join(\", \") + \")\";\n\n                    if (typeof this.returnValue !== \"undefined\") {\n                        callStr += \" => \" + sinon.format(this.returnValue);\n                    }\n\n                    if (this.exception) {\n                        callStr += \" !\" + this.exception.name;\n\n                        if (this.exception.message) {\n                            callStr += \"(\" + this.exception.message + \")\";\n                        }\n                    }\n\n                    if (this.stack) {\n                        callStr += this.getStackFrames()[0].replace(/^\\s*(?:at\\s+|@)?/, \" at \");\n                    }\n\n                    return callStr;\n                }\n            };\n            callProto.invokeCallback = callProto.yield;\n\n            function createSpyCall(spy, thisValue, args, returnValue, exception, id, stack) {\n                if (typeof id !== \"number\") {\n                    throw new TypeError(\"Call id is not a number\");\n                }\n\n                var proxyCall = sinon.create(callProto);\n                proxyCall.proxy = spy;\n                proxyCall.thisValue = thisValue;\n                proxyCall.args = args;\n                proxyCall.returnValue = returnValue;\n                proxyCall.exception = exception;\n                proxyCall.callId = id;\n                proxyCall.stack = stack;\n                return proxyCall;\n            }\n\n            createSpyCall.toString = callProto.toString; // used by mocks\n\n            sinon.spyCall = createSpyCall;\n            return createSpyCall;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./match\");\n\n            require(\"./format\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n         * @depend times_in_words.js\n         * @depend util/core.js\n         * @depend extend.js\n         * @depend call.js\n         * @depend format.js\n         */ /**\n              * Spy functions\n              *\n              * @author Christian Johansen (christian@cjohansen.no)\n              * @license BSD\n              *\n              * Copyright (c) 2010-2013 Christian Johansen\n              */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            var push = Array.prototype.push;\n            var slice = Array.prototype.slice;\n            var callId = 0;\n\n            function spy(object, property, types) {\n                if (!property && typeof object === \"function\") {\n                    return spy.create(object);\n                }\n\n                if (!object && !property) {\n                    return spy.create(function () {});\n                }\n\n                if (types) {\n                    var methodDesc = sinon.getPropertyDescriptor(object, property);\n\n                    for (var i = 0; i < types.length; i++) {\n                        methodDesc[types[i]] = spy.create(methodDesc[types[i]]);\n                    }\n\n                    return sinon.wrapMethod(object, property, methodDesc);\n                }\n\n                return sinon.wrapMethod(object, property, spy.create(object[property]));\n            }\n\n            function matchingFake(fakes, args, strict) {\n                if (!fakes) {\n                    return undefined;\n                }\n\n                for (var i = 0, l = fakes.length; i < l; i++) {\n                    if (fakes[i].matches(args, strict)) {\n                        return fakes[i];\n                    }\n                }\n            }\n\n            function incrementCallCount() {\n                this.called = true;\n                this.callCount += 1;\n                this.notCalled = false;\n                this.calledOnce = this.callCount === 1;\n                this.calledTwice = this.callCount === 2;\n                this.calledThrice = this.callCount === 3;\n            }\n\n            function createCallProperties() {\n                this.firstCall = this.getCall(0);\n                this.secondCall = this.getCall(1);\n                this.thirdCall = this.getCall(2);\n                this.lastCall = this.getCall(this.callCount - 1);\n            }\n\n            var vars = \"a,b,c,d,e,f,g,h,i,j,k,l\";\n\n            function createProxy(func, proxyLength) {\n                // Retain the function length:\n                var p;\n\n                if (proxyLength) {\n                    eval(\"p = (function proxy(\" + vars.substring(0, proxyLength * 2 - 1) + // eslint-disable-line no-eval\n                    \") { return p.invoke(func, this, slice.call(arguments)); });\");\n                } else {\n                    p = function () {\n                        function proxy() {\n                            return p.invoke(func, this, slice.call(arguments));\n                        }\n\n                        return proxy;\n                    }();\n                }\n\n                p.isSinonProxy = true;\n                return p;\n            }\n\n            var uuid = 0; // Public API\n\n            var spyApi = {\n                reset: function () {\n                    if (this.invoking) {\n                        var err = new Error(\"Cannot reset Sinon function while invoking it. \" + \"Move the call to .reset outside of the callback.\");\n                        err.name = \"InvalidResetException\";\n                        throw err;\n                    }\n\n                    this.called = false;\n                    this.notCalled = true;\n                    this.calledOnce = false;\n                    this.calledTwice = false;\n                    this.calledThrice = false;\n                    this.callCount = 0;\n                    this.firstCall = null;\n                    this.secondCall = null;\n                    this.thirdCall = null;\n                    this.lastCall = null;\n                    this.args = [];\n                    this.returnValues = [];\n                    this.thisValues = [];\n                    this.exceptions = [];\n                    this.callIds = [];\n                    this.stacks = [];\n\n                    if (this.fakes) {\n                        for (var i = 0; i < this.fakes.length; i++) {\n                            this.fakes[i].reset();\n                        }\n                    }\n\n                    return this;\n                },\n                create: function () {\n                    function create(func, spyLength) {\n                        var name;\n\n                        if (typeof func !== \"function\") {\n                            func = function () {};\n                        } else {\n                            name = sinon.functionName(func);\n                        }\n\n                        if (!spyLength) {\n                            spyLength = func.length;\n                        }\n\n                        var proxy = createProxy(func, spyLength);\n                        sinon.extend(proxy, spy);\n                        delete proxy.create;\n                        sinon.extend(proxy, func);\n                        proxy.reset();\n                        proxy.prototype = func.prototype;\n                        proxy.displayName = name || \"spy\";\n                        proxy.toString = sinon.functionToString;\n                        proxy.instantiateFake = sinon.spy.create;\n                        proxy.id = \"spy#\" + uuid++;\n                        return proxy;\n                    }\n\n                    return create;\n                }(),\n                invoke: function () {\n                    function invoke(func, thisValue, args) {\n                        var matching = matchingFake(this.fakes, args);\n                        var exception, returnValue;\n                        incrementCallCount.call(this);\n                        push.call(this.thisValues, thisValue);\n                        push.call(this.args, args);\n                        push.call(this.callIds, callId++); // Make call properties available from within the spied function:\n\n                        createCallProperties.call(this);\n\n                        try {\n                            this.invoking = true;\n\n                            if (matching) {\n                                returnValue = matching.invoke(func, thisValue, args);\n                            } else {\n                                returnValue = (this.func || func).apply(thisValue, args);\n                            }\n\n                            var thisCall = this.getCall(this.callCount - 1);\n\n                            if (thisCall.calledWithNew() && (typeof returnValue === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(returnValue)) !== \"object\") {\n                                returnValue = thisValue;\n                            }\n                        } catch (e) {\n                            exception = e;\n                        } finally {\n                            delete this.invoking;\n                        }\n\n                        push.call(this.exceptions, exception);\n                        push.call(this.returnValues, returnValue);\n                        push.call(this.stacks, new Error().stack); // Make return value and exception available in the calls:\n\n                        createCallProperties.call(this);\n\n                        if (exception !== undefined) {\n                            throw exception;\n                        }\n\n                        return returnValue;\n                    }\n\n                    return invoke;\n                }(),\n                named: function () {\n                    function named(name) {\n                        this.displayName = name;\n                        return this;\n                    }\n\n                    return named;\n                }(),\n                getCall: function () {\n                    function getCall(i) {\n                        if (i < 0 || i >= this.callCount) {\n                            return null;\n                        }\n\n                        return sinon.spyCall(this, this.thisValues[i], this.args[i], this.returnValues[i], this.exceptions[i], this.callIds[i], this.stacks[i]);\n                    }\n\n                    return getCall;\n                }(),\n                getCalls: function () {\n                    var calls = [];\n                    var i;\n\n                    for (i = 0; i < this.callCount; i++) {\n                        calls.push(this.getCall(i));\n                    }\n\n                    return calls;\n                },\n                calledBefore: function () {\n                    function calledBefore(spyFn) {\n                        if (!this.called) {\n                            return false;\n                        }\n\n                        if (!spyFn.called) {\n                            return true;\n                        }\n\n                        return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n                    }\n\n                    return calledBefore;\n                }(),\n                calledAfter: function () {\n                    function calledAfter(spyFn) {\n                        if (!this.called || !spyFn.called) {\n                            return false;\n                        }\n\n                        return this.callIds[this.callCount - 1] > spyFn.callIds[spyFn.callCount - 1];\n                    }\n\n                    return calledAfter;\n                }(),\n                withArgs: function () {\n                    var args = slice.call(arguments);\n\n                    if (this.fakes) {\n                        var match = matchingFake(this.fakes, args, true);\n\n                        if (match) {\n                            return match;\n                        }\n                    } else {\n                        this.fakes = [];\n                    }\n\n                    var original = this;\n                    var fake = this.instantiateFake();\n                    fake.matchingAguments = args;\n                    fake.parent = this;\n                    push.call(this.fakes, fake);\n\n                    fake.withArgs = function () {\n                        return original.withArgs.apply(original, arguments);\n                    };\n\n                    for (var i = 0; i < this.args.length; i++) {\n                        if (fake.matches(this.args[i])) {\n                            incrementCallCount.call(fake);\n                            push.call(fake.thisValues, this.thisValues[i]);\n                            push.call(fake.args, this.args[i]);\n                            push.call(fake.returnValues, this.returnValues[i]);\n                            push.call(fake.exceptions, this.exceptions[i]);\n                            push.call(fake.callIds, this.callIds[i]);\n                        }\n                    }\n\n                    createCallProperties.call(fake);\n                    return fake;\n                },\n                matches: function (args, strict) {\n                    var margs = this.matchingAguments;\n\n                    if (margs.length <= args.length && sinon.deepEqual(margs, args.slice(0, margs.length))) {\n                        return !strict || margs.length === args.length;\n                    }\n                },\n                printf: function (format) {\n                    var spyInstance = this;\n                    var args = slice.call(arguments, 1);\n                    var formatter;\n                    return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n                        formatter = spyApi.formatters[specifyer];\n\n                        if (typeof formatter === \"function\") {\n                            return formatter.call(null, spyInstance, args);\n                        } else if (!isNaN(parseInt(specifyer, 10))) {\n                            return sinon.format(args[specifyer - 1]);\n                        }\n\n                        return \"%\" + specifyer;\n                    });\n                }\n            };\n\n            function delegateToCalls(method, matchAny, actual, notCalled) {\n                spyApi[method] = function () {\n                    if (!this.called) {\n                        if (notCalled) {\n                            return notCalled.apply(this, arguments);\n                        }\n\n                        return false;\n                    }\n\n                    var currentCall;\n                    var matches = 0;\n\n                    for (var i = 0, l = this.callCount; i < l; i += 1) {\n                        currentCall = this.getCall(i);\n\n                        if (currentCall[actual || method].apply(currentCall, arguments)) {\n                            matches += 1;\n\n                            if (matchAny) {\n                                return true;\n                            }\n                        }\n                    }\n\n                    return matches === this.callCount;\n                };\n            }\n\n            delegateToCalls(\"calledOn\", true);\n            delegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\n            delegateToCalls(\"calledWith\", true);\n            delegateToCalls(\"calledWithMatch\", true);\n            delegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\n            delegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\n            delegateToCalls(\"calledWithExactly\", true);\n            delegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\n            delegateToCalls(\"neverCalledWith\", false, \"notCalledWith\", function () {\n                return true;\n            });\n            delegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\", function () {\n                return true;\n            });\n            delegateToCalls(\"threw\", true);\n            delegateToCalls(\"alwaysThrew\", false, \"threw\");\n            delegateToCalls(\"returned\", true);\n            delegateToCalls(\"alwaysReturned\", false, \"returned\");\n            delegateToCalls(\"calledWithNew\", true);\n            delegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\n            delegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n                throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n            });\n            spyApi.callArgWith = spyApi.callArg;\n            delegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n                throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n            });\n            spyApi.callArgOnWith = spyApi.callArgOn;\n            delegateToCalls(\"yield\", false, \"yield\", function () {\n                throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n            }); // \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\n\n            spyApi.invokeCallback = spyApi.yield;\n            delegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n                throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n            });\n            delegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n                throw new Error(this.toString() + \" cannot yield to '\" + property + \"' since it was not yet invoked.\");\n            });\n            delegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n                throw new Error(this.toString() + \" cannot yield to '\" + property + \"' since it was not yet invoked.\");\n            });\n            spyApi.formatters = {\n                c: function (spyInstance) {\n                    return sinon.timesInWords(spyInstance.callCount);\n                },\n                n: function (spyInstance) {\n                    return spyInstance.toString();\n                },\n                C: function (spyInstance) {\n                    var calls = [];\n\n                    for (var i = 0, l = spyInstance.callCount; i < l; ++i) {\n                        var stringifiedCall = \"    \" + spyInstance.getCall(i).toString();\n\n                        if (/\\n/.test(calls[i - 1])) {\n                            stringifiedCall = \"\\n\" + stringifiedCall;\n                        }\n\n                        push.call(calls, stringifiedCall);\n                    }\n\n                    return calls.length > 0 ? \"\\n\" + calls.join(\"\\n\") : \"\";\n                },\n                t: function (spyInstance) {\n                    var objects = [];\n\n                    for (var i = 0, l = spyInstance.callCount; i < l; ++i) {\n                        push.call(objects, sinon.format(spyInstance.thisValues[i]));\n                    }\n\n                    return objects.join(\", \");\n                },\n                \"*\": function (spyInstance, args) {\n                    var formatted = [];\n\n                    for (var i = 0, l = args.length; i < l; ++i) {\n                        push.call(formatted, sinon.format(args[i]));\n                    }\n\n                    return formatted.join(\", \");\n                }\n            };\n            sinon.extend(spy, spyApi);\n            spy.spyCall = sinon.spyCall;\n            sinon.spy = spy;\n            return spy;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            require(\"./call\");\n\n            require(\"./extend\");\n\n            require(\"./times_in_words\");\n\n            require(\"./format\");\n\n            module.exports = makeApi(core);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        * @depend extend.js\n        */ /**\n            * Stub behavior\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @author Tim Fischbach (mail@timfischbach.de)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        var slice = Array.prototype.slice;\n        var join = Array.prototype.join;\n        var useLeftMostCallback = -1;\n        var useRightMostCallback = -2;\n\n        var nextTick = function () {\n            if ((typeof process === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(process)) === \"object\" && typeof process.nextTick === \"function\") {\n                return process.nextTick;\n            }\n\n            if (typeof setImmediate === \"function\") {\n                return setImmediate;\n            }\n\n            return function (callback) {\n                setTimeout(callback, 0);\n            };\n        }();\n\n        function throwsException(error, message) {\n            if (typeof error === \"string\") {\n                this.exception = new Error(message || \"\");\n                this.exception.name = error;\n            } else if (!error) {\n                this.exception = new Error(\"Error\");\n            } else {\n                this.exception = error;\n            }\n\n            return this;\n        }\n\n        function getCallback(behavior, args) {\n            var callArgAt = behavior.callArgAt;\n\n            if (callArgAt >= 0) {\n                return args[callArgAt];\n            }\n\n            var argumentList;\n\n            if (callArgAt === useLeftMostCallback) {\n                argumentList = args;\n            }\n\n            if (callArgAt === useRightMostCallback) {\n                argumentList = slice.call(args).reverse();\n            }\n\n            var callArgProp = behavior.callArgProp;\n\n            for (var i = 0, l = argumentList.length; i < l; ++i) {\n                if (!callArgProp && typeof argumentList[i] === \"function\") {\n                    return argumentList[i];\n                }\n\n                if (callArgProp && argumentList[i] && typeof argumentList[i][callArgProp] === \"function\") {\n                    return argumentList[i][callArgProp];\n                }\n            }\n\n            return null;\n        }\n\n        function makeApi(sinon) {\n            function getCallbackError(behavior, func, args) {\n                if (behavior.callArgAt < 0) {\n                    var msg;\n\n                    if (behavior.callArgProp) {\n                        msg = sinon.functionName(behavior.stub) + \" expected to yield to '\" + behavior.callArgProp + \"', but no object with such a property was passed.\";\n                    } else {\n                        msg = sinon.functionName(behavior.stub) + \" expected to yield, but no callback was passed.\";\n                    }\n\n                    if (args.length > 0) {\n                        msg += \" Received [\" + join.call(args, \", \") + \"]\";\n                    }\n\n                    return msg;\n                }\n\n                return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n            }\n\n            function callCallback(behavior, args) {\n                if (typeof behavior.callArgAt === \"number\") {\n                    var func = getCallback(behavior, args);\n\n                    if (typeof func !== \"function\") {\n                        throw new TypeError(getCallbackError(behavior, func, args));\n                    }\n\n                    if (behavior.callbackAsync) {\n                        nextTick(function () {\n                            func.apply(behavior.callbackContext, behavior.callbackArguments);\n                        });\n                    } else {\n                        func.apply(behavior.callbackContext, behavior.callbackArguments);\n                    }\n                }\n            }\n\n            var proto = {\n                create: function () {\n                    function create(stub) {\n                        var behavior = sinon.extend({}, sinon.behavior);\n                        delete behavior.create;\n                        behavior.stub = stub;\n                        return behavior;\n                    }\n\n                    return create;\n                }(),\n                isPresent: function () {\n                    function isPresent() {\n                        return typeof this.callArgAt === \"number\" || this.exception || typeof this.returnArgAt === \"number\" || this.returnThis || this.returnValueDefined;\n                    }\n\n                    return isPresent;\n                }(),\n                invoke: function () {\n                    function invoke(context, args) {\n                        callCallback(this, args);\n\n                        if (this.exception) {\n                            throw this.exception;\n                        } else if (typeof this.returnArgAt === \"number\") {\n                            return args[this.returnArgAt];\n                        } else if (this.returnThis) {\n                            return context;\n                        }\n\n                        return this.returnValue;\n                    }\n\n                    return invoke;\n                }(),\n                onCall: function () {\n                    function onCall(index) {\n                        return this.stub.onCall(index);\n                    }\n\n                    return onCall;\n                }(),\n                onFirstCall: function () {\n                    function onFirstCall() {\n                        return this.stub.onFirstCall();\n                    }\n\n                    return onFirstCall;\n                }(),\n                onSecondCall: function () {\n                    function onSecondCall() {\n                        return this.stub.onSecondCall();\n                    }\n\n                    return onSecondCall;\n                }(),\n                onThirdCall: function () {\n                    function onThirdCall() {\n                        return this.stub.onThirdCall();\n                    }\n\n                    return onThirdCall;\n                }(),\n                withArgs: function () {\n                    function withArgs() /* arguments */{\n                        throw new Error(\"Defining a stub by invoking \\\"stub.onCall(...).withArgs(...)\\\" \" + \"is not supported. Use \\\"stub.withArgs(...).onCall(...)\\\" \" + \"to define sequential behavior for calls with certain arguments.\");\n                    }\n\n                    return withArgs;\n                }(),\n                callsArg: function () {\n                    function callsArg(pos) {\n                        if (typeof pos !== \"number\") {\n                            throw new TypeError(\"argument index is not number\");\n                        }\n\n                        this.callArgAt = pos;\n                        this.callbackArguments = [];\n                        this.callbackContext = undefined;\n                        this.callArgProp = undefined;\n                        this.callbackAsync = false;\n                        return this;\n                    }\n\n                    return callsArg;\n                }(),\n                callsArgOn: function () {\n                    function callsArgOn(pos, context) {\n                        if (typeof pos !== \"number\") {\n                            throw new TypeError(\"argument index is not number\");\n                        }\n\n                        if ((typeof context === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(context)) !== \"object\") {\n                            throw new TypeError(\"argument context is not an object\");\n                        }\n\n                        this.callArgAt = pos;\n                        this.callbackArguments = [];\n                        this.callbackContext = context;\n                        this.callArgProp = undefined;\n                        this.callbackAsync = false;\n                        return this;\n                    }\n\n                    return callsArgOn;\n                }(),\n                callsArgWith: function () {\n                    function callsArgWith(pos) {\n                        if (typeof pos !== \"number\") {\n                            throw new TypeError(\"argument index is not number\");\n                        }\n\n                        this.callArgAt = pos;\n                        this.callbackArguments = slice.call(arguments, 1);\n                        this.callbackContext = undefined;\n                        this.callArgProp = undefined;\n                        this.callbackAsync = false;\n                        return this;\n                    }\n\n                    return callsArgWith;\n                }(),\n                callsArgOnWith: function () {\n                    function callsArgWith(pos, context) {\n                        if (typeof pos !== \"number\") {\n                            throw new TypeError(\"argument index is not number\");\n                        }\n\n                        if ((typeof context === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(context)) !== \"object\") {\n                            throw new TypeError(\"argument context is not an object\");\n                        }\n\n                        this.callArgAt = pos;\n                        this.callbackArguments = slice.call(arguments, 2);\n                        this.callbackContext = context;\n                        this.callArgProp = undefined;\n                        this.callbackAsync = false;\n                        return this;\n                    }\n\n                    return callsArgWith;\n                }(),\n                yields: function () {\n                    this.callArgAt = useLeftMostCallback;\n                    this.callbackArguments = slice.call(arguments, 0);\n                    this.callbackContext = undefined;\n                    this.callArgProp = undefined;\n                    this.callbackAsync = false;\n                    return this;\n                },\n                yieldsRight: function () {\n                    this.callArgAt = useRightMostCallback;\n                    this.callbackArguments = slice.call(arguments, 0);\n                    this.callbackContext = undefined;\n                    this.callArgProp = undefined;\n                    this.callbackAsync = false;\n                    return this;\n                },\n                yieldsOn: function (context) {\n                    if ((typeof context === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(context)) !== \"object\") {\n                        throw new TypeError(\"argument context is not an object\");\n                    }\n\n                    this.callArgAt = useLeftMostCallback;\n                    this.callbackArguments = slice.call(arguments, 1);\n                    this.callbackContext = context;\n                    this.callArgProp = undefined;\n                    this.callbackAsync = false;\n                    return this;\n                },\n                yieldsTo: function (prop) {\n                    this.callArgAt = useLeftMostCallback;\n                    this.callbackArguments = slice.call(arguments, 1);\n                    this.callbackContext = undefined;\n                    this.callArgProp = prop;\n                    this.callbackAsync = false;\n                    return this;\n                },\n                yieldsToOn: function (prop, context) {\n                    if ((typeof context === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(context)) !== \"object\") {\n                        throw new TypeError(\"argument context is not an object\");\n                    }\n\n                    this.callArgAt = useLeftMostCallback;\n                    this.callbackArguments = slice.call(arguments, 2);\n                    this.callbackContext = context;\n                    this.callArgProp = prop;\n                    this.callbackAsync = false;\n                    return this;\n                },\n                throws: throwsException,\n                throwsException: throwsException,\n                returns: function () {\n                    function returns(value) {\n                        this.returnValue = value;\n                        this.returnValueDefined = true;\n                        this.exception = undefined;\n                        return this;\n                    }\n\n                    return returns;\n                }(),\n                returnsArg: function () {\n                    function returnsArg(pos) {\n                        if (typeof pos !== \"number\") {\n                            throw new TypeError(\"argument index is not number\");\n                        }\n\n                        this.returnArgAt = pos;\n                        return this;\n                    }\n\n                    return returnsArg;\n                }(),\n                returnsThis: function () {\n                    function returnsThis() {\n                        this.returnThis = true;\n                        return this;\n                    }\n\n                    return returnsThis;\n                }()\n            };\n\n            function createAsyncVersion(syncFnName) {\n                return function () {\n                    var result = this[syncFnName].apply(this, arguments);\n                    this.callbackAsync = true;\n                    return result;\n                };\n            } // create asynchronous versions of callsArg* and yields* methods\n\n\n            for (var method in meteorBabelHelpers.sanitizeForInObject(proto)) {\n                // need to avoid creating anotherasync versions of the newly added async methods\n                if (proto.hasOwnProperty(method) && method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {\n                    proto[method + \"Async\"] = createAsyncVersion(method);\n                }\n            }\n\n            sinon.behavior = proto;\n            return proto;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./extend\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            function walkInternal(obj, iterator, context, originalObj, seen) {\n                var proto, prop;\n\n                if (typeof Object.getOwnPropertyNames !== \"function\") {\n                    // We explicitly want to enumerate through all of the prototype's properties\n                    // in this case, therefore we deliberately leave out an own property check.\n                    /* eslint-disable guard-for-in */for (prop in meteorBabelHelpers.sanitizeForInObject(obj)) {\n                        iterator.call(context, obj[prop], prop, obj);\n                    } /* eslint-enable guard-for-in */\n\n                    return;\n                }\n\n                Object.getOwnPropertyNames(obj).forEach(function (k) {\n                    if (!seen[k]) {\n                        seen[k] = true;\n                        var target = typeof Object.getOwnPropertyDescriptor(obj, k).get === \"function\" ? originalObj : obj;\n                        iterator.call(context, target[k], k, target);\n                    }\n                });\n                proto = Object.getPrototypeOf(obj);\n\n                if (proto) {\n                    walkInternal(proto, iterator, context, originalObj, seen);\n                }\n            } /* Public: walks the prototype chain of an object and iterates over every own property\n               * name encountered. The iterator is called in the same fashion that Array.prototype.forEach\n               * works, where it is passed the value, key, and own object as the 1st, 2nd, and 3rd positional\n               * argument, respectively. In cases where Object.getOwnPropertyNames is not available, walk will\n               * default to using a simple for..in loop.\n               *\n               * obj - The object to walk the prototype chain for.\n               * iterator - The function to be called on each pass of the walk.\n               * context - (Optional) When given, the iterator will be called with this object as the receiver.\n               */\n\n            function walk(obj, iterator, context) {\n                return walkInternal(obj, iterator, context, obj, {});\n            }\n\n            sinon.walk = walk;\n            return sinon.walk;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        * @depend extend.js\n        * @depend spy.js\n        * @depend behavior.js\n        * @depend walk.js\n        */ /**\n            * Stub functions\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            function stub(object, property, func) {\n                if (!!func && typeof func !== \"function\" && (typeof func === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(func)) !== \"object\") {\n                    throw new TypeError(\"Custom stub should be a function or a property descriptor\");\n                }\n\n                var wrapper;\n\n                if (func) {\n                    if (typeof func === \"function\") {\n                        wrapper = sinon.spy && sinon.spy.create ? sinon.spy.create(func) : func;\n                    } else {\n                        wrapper = func;\n\n                        if (sinon.spy && sinon.spy.create) {\n                            var types = sinon.objectKeys(wrapper);\n\n                            for (var i = 0; i < types.length; i++) {\n                                wrapper[types[i]] = sinon.spy.create(wrapper[types[i]]);\n                            }\n                        }\n                    }\n                } else {\n                    var stubLength = 0;\n\n                    if ((typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) === \"object\" && typeof object[property] === \"function\") {\n                        stubLength = object[property].length;\n                    }\n\n                    wrapper = stub.create(stubLength);\n                }\n\n                if (!object && typeof property === \"undefined\") {\n                    return sinon.stub.create();\n                }\n\n                if (typeof property === \"undefined\" && (typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) === \"object\") {\n                    sinon.walk(object || {}, function (value, prop, propOwner) {\n                        // we don't want to stub things like toString(), valueOf(), etc. so we only stub if the object\n                        // is not Object.prototype\n                        if (propOwner !== Object.prototype && prop !== \"constructor\" && typeof sinon.getPropertyDescriptor(propOwner, prop).value === \"function\") {\n                            stub(object, prop);\n                        }\n                    });\n                    return object;\n                }\n\n                return sinon.wrapMethod(object, property, wrapper);\n            } /*eslint-disable no-use-before-define*/\n\n            function getParentBehaviour(stubInstance) {\n                return stubInstance.parent && getCurrentBehavior(stubInstance.parent);\n            }\n\n            function getDefaultBehavior(stubInstance) {\n                return stubInstance.defaultBehavior || getParentBehaviour(stubInstance) || sinon.behavior.create(stubInstance);\n            }\n\n            function getCurrentBehavior(stubInstance) {\n                var behavior = stubInstance.behaviors[stubInstance.callCount - 1];\n                return behavior && behavior.isPresent() ? behavior : getDefaultBehavior(stubInstance);\n            } /*eslint-enable no-use-before-define*/\n\n            var uuid = 0;\n            var proto = {\n                create: function () {\n                    function create(stubLength) {\n                        var functionStub = function () {\n                            return getCurrentBehavior(functionStub).invoke(this, arguments);\n                        };\n\n                        functionStub.id = \"stub#\" + uuid++;\n                        var orig = functionStub;\n                        functionStub = sinon.spy.create(functionStub, stubLength);\n                        functionStub.func = orig;\n                        sinon.extend(functionStub, stub);\n                        functionStub.instantiateFake = sinon.stub.create;\n                        functionStub.displayName = \"stub\";\n                        functionStub.toString = sinon.functionToString;\n                        functionStub.defaultBehavior = null;\n                        functionStub.behaviors = [];\n                        return functionStub;\n                    }\n\n                    return create;\n                }(),\n                resetBehavior: function () {\n                    var i;\n                    this.defaultBehavior = null;\n                    this.behaviors = [];\n                    delete this.returnValue;\n                    delete this.returnArgAt;\n                    this.returnThis = false;\n\n                    if (this.fakes) {\n                        for (i = 0; i < this.fakes.length; i++) {\n                            this.fakes[i].resetBehavior();\n                        }\n                    }\n                },\n                onCall: function () {\n                    function onCall(index) {\n                        if (!this.behaviors[index]) {\n                            this.behaviors[index] = sinon.behavior.create(this);\n                        }\n\n                        return this.behaviors[index];\n                    }\n\n                    return onCall;\n                }(),\n                onFirstCall: function () {\n                    function onFirstCall() {\n                        return this.onCall(0);\n                    }\n\n                    return onFirstCall;\n                }(),\n                onSecondCall: function () {\n                    function onSecondCall() {\n                        return this.onCall(1);\n                    }\n\n                    return onSecondCall;\n                }(),\n                onThirdCall: function () {\n                    function onThirdCall() {\n                        return this.onCall(2);\n                    }\n\n                    return onThirdCall;\n                }()\n            };\n\n            function createBehavior(behaviorMethod) {\n                return function () {\n                    this.defaultBehavior = this.defaultBehavior || sinon.behavior.create(this);\n                    this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n                    return this;\n                };\n            }\n\n            for (var method in meteorBabelHelpers.sanitizeForInObject(sinon.behavior)) {\n                if (sinon.behavior.hasOwnProperty(method) && !proto.hasOwnProperty(method) && method !== \"create\" && method !== \"withArgs\" && method !== \"invoke\") {\n                    proto[method] = createBehavior(method);\n                }\n            }\n\n            sinon.extend(stub, proto);\n            sinon.stub = stub;\n            return stub;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            require(\"./behavior\");\n\n            require(\"./spy\");\n\n            require(\"./extend\");\n\n            module.exports = makeApi(core);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend times_in_words.js\n        * @depend util/core.js\n        * @depend call.js\n        * @depend extend.js\n        * @depend match.js\n        * @depend spy.js\n        * @depend stub.js\n        * @depend format.js\n        */ /**\n            * Mock functions.\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            var push = [].push;\n            var match = sinon.match;\n\n            function mock(object) {\n                // if (typeof console !== undefined && console.warn) {\n                //     console.warn(\"mock will be removed from Sinon.JS v2.0\");\n                // }\n                if (!object) {\n                    return sinon.expectation.create(\"Anonymous mock\");\n                }\n\n                return mock.create(object);\n            }\n\n            function each(collection, callback) {\n                if (!collection) {\n                    return;\n                }\n\n                for (var i = 0, l = collection.length; i < l; i += 1) {\n                    callback(collection[i]);\n                }\n            }\n\n            function arrayEquals(arr1, arr2, compareLength) {\n                if (compareLength && arr1.length !== arr2.length) {\n                    return false;\n                }\n\n                for (var i = 0, l = arr1.length; i < l; i++) {\n                    if (!sinon.deepEqual(arr1[i], arr2[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            }\n\n            sinon.extend(mock, {\n                create: function () {\n                    function create(object) {\n                        if (!object) {\n                            throw new TypeError(\"object is null\");\n                        }\n\n                        var mockObject = sinon.extend({}, mock);\n                        mockObject.object = object;\n                        delete mockObject.create;\n                        return mockObject;\n                    }\n\n                    return create;\n                }(),\n                expects: function () {\n                    function expects(method) {\n                        if (!method) {\n                            throw new TypeError(\"method is falsy\");\n                        }\n\n                        if (!this.expectations) {\n                            this.expectations = {};\n                            this.proxies = [];\n                        }\n\n                        if (!this.expectations[method]) {\n                            this.expectations[method] = [];\n                            var mockObject = this;\n                            sinon.wrapMethod(this.object, method, function () {\n                                return mockObject.invokeMethod(method, this, arguments);\n                            });\n                            push.call(this.proxies, method);\n                        }\n\n                        var expectation = sinon.expectation.create(method);\n                        push.call(this.expectations[method], expectation);\n                        return expectation;\n                    }\n\n                    return expects;\n                }(),\n                restore: function () {\n                    function restore() {\n                        var object = this.object;\n                        each(this.proxies, function (proxy) {\n                            if (typeof object[proxy].restore === \"function\") {\n                                object[proxy].restore();\n                            }\n                        });\n                    }\n\n                    return restore;\n                }(),\n                verify: function () {\n                    function verify() {\n                        var expectations = this.expectations || {};\n                        var messages = [];\n                        var met = [];\n                        each(this.proxies, function (proxy) {\n                            each(expectations[proxy], function (expectation) {\n                                if (!expectation.met()) {\n                                    push.call(messages, expectation.toString());\n                                } else {\n                                    push.call(met, expectation.toString());\n                                }\n                            });\n                        });\n                        this.restore();\n\n                        if (messages.length > 0) {\n                            sinon.expectation.fail(messages.concat(met).join(\"\\n\"));\n                        } else if (met.length > 0) {\n                            sinon.expectation.pass(messages.concat(met).join(\"\\n\"));\n                        }\n\n                        return true;\n                    }\n\n                    return verify;\n                }(),\n                invokeMethod: function () {\n                    function invokeMethod(method, thisValue, args) {\n                        var expectations = this.expectations && this.expectations[method] ? this.expectations[method] : [];\n                        var expectationsWithMatchingArgs = [];\n                        var currentArgs = args || [];\n                        var i, available;\n\n                        for (i = 0; i < expectations.length; i += 1) {\n                            var expectedArgs = expectations[i].expectedArguments || [];\n\n                            if (arrayEquals(expectedArgs, currentArgs, expectations[i].expectsExactArgCount)) {\n                                expectationsWithMatchingArgs.push(expectations[i]);\n                            }\n                        }\n\n                        for (i = 0; i < expectationsWithMatchingArgs.length; i += 1) {\n                            if (!expectationsWithMatchingArgs[i].met() && expectationsWithMatchingArgs[i].allowsCall(thisValue, args)) {\n                                return expectationsWithMatchingArgs[i].apply(thisValue, args);\n                            }\n                        }\n\n                        var messages = [];\n                        var exhausted = 0;\n\n                        for (i = 0; i < expectationsWithMatchingArgs.length; i += 1) {\n                            if (expectationsWithMatchingArgs[i].allowsCall(thisValue, args)) {\n                                available = available || expectationsWithMatchingArgs[i];\n                            } else {\n                                exhausted += 1;\n                            }\n                        }\n\n                        if (available && exhausted === 0) {\n                            return available.apply(thisValue, args);\n                        }\n\n                        for (i = 0; i < expectations.length; i += 1) {\n                            push.call(messages, \"    \" + expectations[i].toString());\n                        }\n\n                        messages.unshift(\"Unexpected call: \" + sinon.spyCall.toString.call({\n                            proxy: method,\n                            args: args\n                        }));\n                        sinon.expectation.fail(messages.join(\"\\n\"));\n                    }\n\n                    return invokeMethod;\n                }()\n            });\n            var times = sinon.timesInWords;\n            var slice = Array.prototype.slice;\n\n            function callCountInWords(callCount) {\n                if (callCount === 0) {\n                    return \"never called\";\n                }\n\n                return \"called \" + times(callCount);\n            }\n\n            function expectedCallCountInWords(expectation) {\n                var min = expectation.minCalls;\n                var max = expectation.maxCalls;\n\n                if (typeof min === \"number\" && typeof max === \"number\") {\n                    var str = times(min);\n\n                    if (min !== max) {\n                        str = \"at least \" + str + \" and at most \" + times(max);\n                    }\n\n                    return str;\n                }\n\n                if (typeof min === \"number\") {\n                    return \"at least \" + times(min);\n                }\n\n                return \"at most \" + times(max);\n            }\n\n            function receivedMinCalls(expectation) {\n                var hasMinLimit = typeof expectation.minCalls === \"number\";\n                return !hasMinLimit || expectation.callCount >= expectation.minCalls;\n            }\n\n            function receivedMaxCalls(expectation) {\n                if (typeof expectation.maxCalls !== \"number\") {\n                    return false;\n                }\n\n                return expectation.callCount === expectation.maxCalls;\n            }\n\n            function verifyMatcher(possibleMatcher, arg) {\n                var isMatcher = match && match.isMatcher(possibleMatcher);\n                return isMatcher && possibleMatcher.test(arg) || true;\n            }\n\n            sinon.expectation = {\n                minCalls: 1,\n                maxCalls: 1,\n                create: function () {\n                    function create(methodName) {\n                        var expectation = sinon.extend(sinon.stub.create(), sinon.expectation);\n                        delete expectation.create;\n                        expectation.method = methodName;\n                        return expectation;\n                    }\n\n                    return create;\n                }(),\n                invoke: function () {\n                    function invoke(func, thisValue, args) {\n                        this.verifyCallAllowed(thisValue, args);\n                        return sinon.spy.invoke.apply(this, arguments);\n                    }\n\n                    return invoke;\n                }(),\n                atLeast: function () {\n                    function atLeast(num) {\n                        if (typeof num !== \"number\") {\n                            throw new TypeError(\"'\" + num + \"' is not number\");\n                        }\n\n                        if (!this.limitsSet) {\n                            this.maxCalls = null;\n                            this.limitsSet = true;\n                        }\n\n                        this.minCalls = num;\n                        return this;\n                    }\n\n                    return atLeast;\n                }(),\n                atMost: function () {\n                    function atMost(num) {\n                        if (typeof num !== \"number\") {\n                            throw new TypeError(\"'\" + num + \"' is not number\");\n                        }\n\n                        if (!this.limitsSet) {\n                            this.minCalls = null;\n                            this.limitsSet = true;\n                        }\n\n                        this.maxCalls = num;\n                        return this;\n                    }\n\n                    return atMost;\n                }(),\n                never: function () {\n                    function never() {\n                        return this.exactly(0);\n                    }\n\n                    return never;\n                }(),\n                once: function () {\n                    function once() {\n                        return this.exactly(1);\n                    }\n\n                    return once;\n                }(),\n                twice: function () {\n                    function twice() {\n                        return this.exactly(2);\n                    }\n\n                    return twice;\n                }(),\n                thrice: function () {\n                    function thrice() {\n                        return this.exactly(3);\n                    }\n\n                    return thrice;\n                }(),\n                exactly: function () {\n                    function exactly(num) {\n                        if (typeof num !== \"number\") {\n                            throw new TypeError(\"'\" + num + \"' is not a number\");\n                        }\n\n                        this.atLeast(num);\n                        return this.atMost(num);\n                    }\n\n                    return exactly;\n                }(),\n                met: function () {\n                    function met() {\n                        return !this.failed && receivedMinCalls(this);\n                    }\n\n                    return met;\n                }(),\n                verifyCallAllowed: function () {\n                    function verifyCallAllowed(thisValue, args) {\n                        if (receivedMaxCalls(this)) {\n                            this.failed = true;\n                            sinon.expectation.fail(this.method + \" already called \" + times(this.maxCalls));\n                        }\n\n                        if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                            sinon.expectation.fail(this.method + \" called with \" + thisValue + \" as thisValue, expected \" + this.expectedThis);\n                        }\n\n                        if (!(\"expectedArguments\" in this)) {\n                            return;\n                        }\n\n                        if (!args) {\n                            sinon.expectation.fail(this.method + \" received no arguments, expected \" + sinon.format(this.expectedArguments));\n                        }\n\n                        if (args.length < this.expectedArguments.length) {\n                            sinon.expectation.fail(this.method + \" received too few arguments (\" + sinon.format(args) + \"), expected \" + sinon.format(this.expectedArguments));\n                        }\n\n                        if (this.expectsExactArgCount && args.length !== this.expectedArguments.length) {\n                            sinon.expectation.fail(this.method + \" received too many arguments (\" + sinon.format(args) + \"), expected \" + sinon.format(this.expectedArguments));\n                        }\n\n                        for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n                            if (!verifyMatcher(this.expectedArguments[i], args[i])) {\n                                sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) + \", didn't match \" + this.expectedArguments.toString());\n                            }\n\n                            if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                                sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) + \", expected \" + sinon.format(this.expectedArguments));\n                            }\n                        }\n                    }\n\n                    return verifyCallAllowed;\n                }(),\n                allowsCall: function () {\n                    function allowsCall(thisValue, args) {\n                        if (this.met() && receivedMaxCalls(this)) {\n                            return false;\n                        }\n\n                        if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                            return false;\n                        }\n\n                        if (!(\"expectedArguments\" in this)) {\n                            return true;\n                        }\n\n                        args = args || [];\n\n                        if (args.length < this.expectedArguments.length) {\n                            return false;\n                        }\n\n                        if (this.expectsExactArgCount && args.length !== this.expectedArguments.length) {\n                            return false;\n                        }\n\n                        for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n                            if (!verifyMatcher(this.expectedArguments[i], args[i])) {\n                                return false;\n                            }\n\n                            if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                                return false;\n                            }\n                        }\n\n                        return true;\n                    }\n\n                    return allowsCall;\n                }(),\n                withArgs: function () {\n                    function withArgs() {\n                        this.expectedArguments = slice.call(arguments);\n                        return this;\n                    }\n\n                    return withArgs;\n                }(),\n                withExactArgs: function () {\n                    function withExactArgs() {\n                        this.withArgs.apply(this, arguments);\n                        this.expectsExactArgCount = true;\n                        return this;\n                    }\n\n                    return withExactArgs;\n                }(),\n                on: function () {\n                    function on(thisValue) {\n                        this.expectedThis = thisValue;\n                        return this;\n                    }\n\n                    return on;\n                }(),\n                toString: function () {\n                    var args = (this.expectedArguments || []).slice();\n\n                    if (!this.expectsExactArgCount) {\n                        push.call(args, \"[...]\");\n                    }\n\n                    var callStr = sinon.spyCall.toString.call({\n                        proxy: this.method || \"anonymous mock expectation\",\n                        args: args\n                    });\n                    var message = callStr.replace(\", [...\", \"[, ...\") + \" \" + expectedCallCountInWords(this);\n\n                    if (this.met()) {\n                        return \"Expectation met: \" + message;\n                    }\n\n                    return \"Expected \" + message + \" (\" + callCountInWords(this.callCount) + \")\";\n                },\n                verify: function () {\n                    function verify() {\n                        if (!this.met()) {\n                            sinon.expectation.fail(this.toString());\n                        } else {\n                            sinon.expectation.pass(this.toString());\n                        }\n\n                        return true;\n                    }\n\n                    return verify;\n                }(),\n                pass: function () {\n                    function pass(message) {\n                        sinon.assert.pass(message);\n                    }\n\n                    return pass;\n                }(),\n                fail: function () {\n                    function fail(message) {\n                        var exception = new Error(message);\n                        exception.name = \"ExpectationError\";\n                        throw exception;\n                    }\n\n                    return fail;\n                }()\n            };\n            sinon.mock = mock;\n            return mock;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./times_in_words\");\n\n            require(\"./call\");\n\n            require(\"./extend\");\n\n            require(\"./match\");\n\n            require(\"./spy\");\n\n            require(\"./stub\");\n\n            require(\"./format\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        * @depend spy.js\n        * @depend stub.js\n        * @depend mock.js\n        */ /**\n            * Collections of stubs, spies and mocks.\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        var push = [].push;\n        var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n        function getFakes(fakeCollection) {\n            if (!fakeCollection.fakes) {\n                fakeCollection.fakes = [];\n            }\n\n            return fakeCollection.fakes;\n        }\n\n        function each(fakeCollection, method) {\n            var fakes = getFakes(fakeCollection);\n\n            for (var i = 0, l = fakes.length; i < l; i += 1) {\n                if (typeof fakes[i][method] === \"function\") {\n                    fakes[i][method]();\n                }\n            }\n        }\n\n        function compact(fakeCollection) {\n            var fakes = getFakes(fakeCollection);\n            var i = 0;\n\n            while (i < fakes.length) {\n                fakes.splice(i, 1);\n            }\n        }\n\n        function makeApi(sinon) {\n            var collection = {\n                verify: function () {\n                    function resolve() {\n                        each(this, \"verify\");\n                    }\n\n                    return resolve;\n                }(),\n                restore: function () {\n                    function restore() {\n                        each(this, \"restore\");\n                        compact(this);\n                    }\n\n                    return restore;\n                }(),\n                reset: function () {\n                    function restore() {\n                        each(this, \"reset\");\n                    }\n\n                    return restore;\n                }(),\n                verifyAndRestore: function () {\n                    function verifyAndRestore() {\n                        var exception;\n\n                        try {\n                            this.verify();\n                        } catch (e) {\n                            exception = e;\n                        }\n\n                        this.restore();\n\n                        if (exception) {\n                            throw exception;\n                        }\n                    }\n\n                    return verifyAndRestore;\n                }(),\n                add: function () {\n                    function add(fake) {\n                        push.call(getFakes(this), fake);\n                        return fake;\n                    }\n\n                    return add;\n                }(),\n                spy: function () {\n                    function spy() {\n                        return this.add(sinon.spy.apply(sinon, arguments));\n                    }\n\n                    return spy;\n                }(),\n                stub: function () {\n                    function stub(object, property, value) {\n                        if (property) {\n                            var original = object[property];\n\n                            if (typeof original !== \"function\") {\n                                if (!hasOwnProperty.call(object, property)) {\n                                    throw new TypeError(\"Cannot stub non-existent own property \" + property);\n                                }\n\n                                object[property] = value;\n                                return this.add({\n                                    restore: function () {\n                                        object[property] = original;\n                                    }\n                                });\n                            }\n                        }\n\n                        if (!property && !!object && (typeof object === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(object)) === \"object\") {\n                            var stubbedObj = sinon.stub.apply(sinon, arguments);\n\n                            for (var prop in meteorBabelHelpers.sanitizeForInObject(stubbedObj)) {\n                                if (typeof stubbedObj[prop] === \"function\") {\n                                    this.add(stubbedObj[prop]);\n                                }\n                            }\n\n                            return stubbedObj;\n                        }\n\n                        return this.add(sinon.stub.apply(sinon, arguments));\n                    }\n\n                    return stub;\n                }(),\n                mock: function () {\n                    function mock() {\n                        return this.add(sinon.mock.apply(sinon, arguments));\n                    }\n\n                    return mock;\n                }(),\n                inject: function () {\n                    function inject(obj) {\n                        var col = this;\n\n                        obj.spy = function () {\n                            return col.spy.apply(col, arguments);\n                        };\n\n                        obj.stub = function () {\n                            return col.stub.apply(col, arguments);\n                        };\n\n                        obj.mock = function () {\n                            return col.mock.apply(col, arguments);\n                        };\n\n                        return obj;\n                    }\n\n                    return inject;\n                }()\n            };\n            sinon.collection = collection;\n            return collection;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./mock\");\n\n            require(\"./spy\");\n\n            require(\"./stub\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * Fake timer API\n        * setTimeout\n        * setInterval\n        * clearTimeout\n        * clearInterval\n        * tick\n        * reset\n        * Date\n        *\n        * Inspired by jsUnitMockTimeOut from JsUnit\n        *\n        * @author Christian Johansen (christian@cjohansen.no)\n        * @license BSD\n        *\n        * Copyright (c) 2010-2013 Christian Johansen\n        */\n\n    (function () {\n        function makeApi(s, lol) {\n            /*global lolex */var llx = typeof lolex !== \"undefined\" ? lolex : lol;\n\n            s.useFakeTimers = function () {\n                var now;\n                var methods = Array.prototype.slice.call(arguments);\n\n                if (typeof methods[0] === \"string\") {\n                    now = 0;\n                } else {\n                    now = methods.shift();\n                }\n\n                var clock = llx.install(now || 0, methods);\n                clock.restore = clock.uninstall;\n                return clock;\n            };\n\n            s.clock = {\n                create: function (now) {\n                    return llx.createClock(now);\n                }\n            };\n            s.timers = {\n                setTimeout: setTimeout,\n                clearTimeout: clearTimeout,\n                setImmediate: typeof setImmediate !== \"undefined\" ? setImmediate : undefined,\n                clearImmediate: typeof clearImmediate !== \"undefined\" ? clearImmediate : undefined,\n                setInterval: setInterval,\n                clearInterval: clearInterval,\n                Date: Date\n            };\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, epxorts, module, lolex) {\n            var core = require(\"./core\");\n\n            makeApi(core, lolex);\n            module.exports = core;\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require, module.exports, module, require(\"lolex\"));\n        } else {\n            makeApi(sinon); // eslint-disable-line no-undef\n        }\n    })(); /**\n           * Minimal Event interface implementation\n           *\n           * Original implementation by Sven Fuchs: https://gist.github.com/995028\n           * Modifications and tests by Christian Johansen.\n           *\n           * @author Sven Fuchs (svenfuchs@artweb-design.de)\n           * @author Christian Johansen (christian@cjohansen.no)\n           * @license BSD\n           *\n           * Copyright (c) 2011 Sven Fuchs, Christian Johansen\n           */\n\n    if (typeof sinon === \"undefined\") {\n        this.sinon = {};\n    }\n\n    (function () {\n        var push = [].push;\n\n        function makeApi(sinon) {\n            sinon.Event = function () {\n                function Event(type, bubbles, cancelable, target) {\n                    this.initEvent(type, bubbles, cancelable, target);\n                }\n\n                return Event;\n            }();\n\n            sinon.Event.prototype = {\n                initEvent: function (type, bubbles, cancelable, target) {\n                    this.type = type;\n                    this.bubbles = bubbles;\n                    this.cancelable = cancelable;\n                    this.target = target;\n                },\n                stopPropagation: function () {},\n                preventDefault: function () {\n                    this.defaultPrevented = true;\n                }\n            };\n\n            sinon.ProgressEvent = function () {\n                function ProgressEvent(type, progressEventRaw, target) {\n                    this.initEvent(type, false, false, target);\n                    this.loaded = progressEventRaw.loaded || null;\n                    this.total = progressEventRaw.total || null;\n                    this.lengthComputable = !!progressEventRaw.total;\n                }\n\n                return ProgressEvent;\n            }();\n\n            sinon.ProgressEvent.prototype = new sinon.Event();\n            sinon.ProgressEvent.prototype.constructor = sinon.ProgressEvent;\n\n            sinon.CustomEvent = function () {\n                function CustomEvent(type, customData, target) {\n                    this.initEvent(type, false, false, target);\n                    this.detail = customData.detail || null;\n                }\n\n                return CustomEvent;\n            }();\n\n            sinon.CustomEvent.prototype = new sinon.Event();\n            sinon.CustomEvent.prototype.constructor = sinon.CustomEvent;\n            sinon.EventTarget = {\n                addEventListener: function () {\n                    function addEventListener(event, listener) {\n                        this.eventListeners = this.eventListeners || {};\n                        this.eventListeners[event] = this.eventListeners[event] || [];\n                        push.call(this.eventListeners[event], listener);\n                    }\n\n                    return addEventListener;\n                }(),\n                removeEventListener: function () {\n                    function removeEventListener(event, listener) {\n                        var listeners = this.eventListeners && this.eventListeners[event] || [];\n\n                        for (var i = 0, l = listeners.length; i < l; ++i) {\n                            if (listeners[i] === listener) {\n                                return listeners.splice(i, 1);\n                            }\n                        }\n                    }\n\n                    return removeEventListener;\n                }(),\n                dispatchEvent: function () {\n                    function dispatchEvent(event) {\n                        var type = event.type;\n                        var listeners = this.eventListeners && this.eventListeners[type] || [];\n\n                        for (var i = 0; i < listeners.length; i++) {\n                            if (typeof listeners[i] === \"function\") {\n                                listeners[i].call(this, event);\n                            } else {\n                                listeners[i].handleEvent(event);\n                            }\n                        }\n\n                        return !!event.defaultPrevented;\n                    }\n\n                    return dispatchEvent;\n                }()\n            };\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require) {\n            var sinon = require(\"./core\");\n\n            makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require);\n        } else {\n            makeApi(sinon); // eslint-disable-line no-undef\n        }\n    })(); /**\n           * @depend util/core.js\n           */ /**\n               * Logs errors\n               *\n               * @author Christian Johansen (christian@cjohansen.no)\n               * @license BSD\n               *\n               * Copyright (c) 2010-2014 Christian Johansen\n               */\n\n    (function (sinonGlobal) {\n        // cache a reference to setTimeout, so that our reference won't be stubbed out\n        // when using fake timers and errors will still get logged\n        // https://github.com/cjohansen/Sinon.JS/issues/381\n        var realSetTimeout = setTimeout;\n\n        function makeApi(sinon) {\n            function log() {}\n\n            function logError(label, err) {\n                var msg = label + \" threw exception: \";\n\n                function throwLoggedError() {\n                    err.message = msg + err.message;\n                    throw err;\n                }\n\n                sinon.log(msg + \"[\" + err.name + \"] \" + err.message);\n\n                if (err.stack) {\n                    sinon.log(err.stack);\n                }\n\n                if (logError.useImmediateExceptions) {\n                    throwLoggedError();\n                } else {\n                    logError.setTimeout(throwLoggedError, 0);\n                }\n            } // When set to true, any errors logged will be thrown immediately;\n            // If set to false, the errors will be thrown in separate execution frame.\n\n\n            logError.useImmediateExceptions = false; // wrap realSetTimeout with something we can stub in tests\n\n            logError.setTimeout = function (func, timeout) {\n                realSetTimeout(func, timeout);\n            };\n\n            var exports = {};\n            exports.log = sinon.log = log;\n            exports.logError = sinon.logError = logError;\n            return exports;\n        }\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend core.js\n        * @depend ../extend.js\n        * @depend event.js\n        * @depend ../log_error.js\n        */ /**\n            * Fake XDomainRequest object\n            */ /**\n                * Returns the global to prevent assigning values to 'this' when this is undefined.\n                * This can occur when files are interpreted by node in strict mode.\n                * @private\n                */\n\n    function getGlobal() {\n        return typeof window !== \"undefined\" ? window : global;\n    }\n\n    if (typeof sinon === \"undefined\") {\n        if (typeof this === \"undefined\") {\n            getGlobal().sinon = {};\n        } else {\n            this.sinon = {};\n        }\n    } // wrapper for global\n\n\n    (function (global) {\n        var xdr = {\n            XDomainRequest: global.XDomainRequest\n        };\n        xdr.GlobalXDomainRequest = global.XDomainRequest;\n        xdr.supportsXDR = typeof xdr.GlobalXDomainRequest !== \"undefined\";\n        xdr.workingXDR = xdr.supportsXDR ? xdr.GlobalXDomainRequest : false;\n\n        function makeApi(sinon) {\n            sinon.xdr = xdr;\n\n            function FakeXDomainRequest() {\n                this.readyState = FakeXDomainRequest.UNSENT;\n                this.requestBody = null;\n                this.requestHeaders = {};\n                this.status = 0;\n                this.timeout = null;\n\n                if (typeof FakeXDomainRequest.onCreate === \"function\") {\n                    FakeXDomainRequest.onCreate(this);\n                }\n            }\n\n            function verifyState(x) {\n                if (x.readyState !== FakeXDomainRequest.OPENED) {\n                    throw new Error(\"INVALID_STATE_ERR\");\n                }\n\n                if (x.sendFlag) {\n                    throw new Error(\"INVALID_STATE_ERR\");\n                }\n            }\n\n            function verifyRequestSent(x) {\n                if (x.readyState === FakeXDomainRequest.UNSENT) {\n                    throw new Error(\"Request not sent\");\n                }\n\n                if (x.readyState === FakeXDomainRequest.DONE) {\n                    throw new Error(\"Request done\");\n                }\n            }\n\n            function verifyResponseBodyType(body) {\n                if (typeof body !== \"string\") {\n                    var error = new Error(\"Attempted to respond to fake XDomainRequest with \" + body + \", which is not a string.\");\n                    error.name = \"InvalidBodyException\";\n                    throw error;\n                }\n            }\n\n            sinon.extend(FakeXDomainRequest.prototype, sinon.EventTarget, {\n                open: function () {\n                    function open(method, url) {\n                        this.method = method;\n                        this.url = url;\n                        this.responseText = null;\n                        this.sendFlag = false;\n                        this.readyStateChange(FakeXDomainRequest.OPENED);\n                    }\n\n                    return open;\n                }(),\n                readyStateChange: function () {\n                    function readyStateChange(state) {\n                        this.readyState = state;\n                        var eventName = \"\";\n\n                        switch (this.readyState) {\n                            case FakeXDomainRequest.UNSENT:\n                                break;\n\n                            case FakeXDomainRequest.OPENED:\n                                break;\n\n                            case FakeXDomainRequest.LOADING:\n                                if (this.sendFlag) {\n                                    //raise the progress event\n                                    eventName = \"onprogress\";\n                                }\n\n                                break;\n\n                            case FakeXDomainRequest.DONE:\n                                if (this.isTimeout) {\n                                    eventName = \"ontimeout\";\n                                } else if (this.errorFlag || this.status < 200 || this.status > 299) {\n                                    eventName = \"onerror\";\n                                } else {\n                                    eventName = \"onload\";\n                                }\n\n                                break;\n                        } // raising event (if defined)\n\n\n                        if (eventName) {\n                            if (typeof this[eventName] === \"function\") {\n                                try {\n                                    this[eventName]();\n                                } catch (e) {\n                                    sinon.logError(\"Fake XHR \" + eventName + \" handler\", e);\n                                }\n                            }\n                        }\n                    }\n\n                    return readyStateChange;\n                }(),\n                send: function () {\n                    function send(data) {\n                        verifyState(this);\n\n                        if (!/^(get|head)$/i.test(this.method)) {\n                            this.requestBody = data;\n                        }\n\n                        this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                        this.errorFlag = false;\n                        this.sendFlag = true;\n                        this.readyStateChange(FakeXDomainRequest.OPENED);\n\n                        if (typeof this.onSend === \"function\") {\n                            this.onSend(this);\n                        }\n                    }\n\n                    return send;\n                }(),\n                abort: function () {\n                    function abort() {\n                        this.aborted = true;\n                        this.responseText = null;\n                        this.errorFlag = true;\n\n                        if (this.readyState > sinon.FakeXDomainRequest.UNSENT && this.sendFlag) {\n                            this.readyStateChange(sinon.FakeXDomainRequest.DONE);\n                            this.sendFlag = false;\n                        }\n                    }\n\n                    return abort;\n                }(),\n                setResponseBody: function () {\n                    function setResponseBody(body) {\n                        verifyRequestSent(this);\n                        verifyResponseBodyType(body);\n                        var chunkSize = this.chunkSize || 10;\n                        var index = 0;\n                        this.responseText = \"\";\n\n                        do {\n                            this.readyStateChange(FakeXDomainRequest.LOADING);\n                            this.responseText += body.substring(index, index + chunkSize);\n                            index += chunkSize;\n                        } while (index < body.length);\n\n                        this.readyStateChange(FakeXDomainRequest.DONE);\n                    }\n\n                    return setResponseBody;\n                }(),\n                respond: function () {\n                    function respond(status, contentType, body) {\n                        // content-type ignored, since XDomainRequest does not carry this\n                        // we keep the same syntax for respond(...) as for FakeXMLHttpRequest to ease\n                        // test integration across browsers\n                        this.status = typeof status === \"number\" ? status : 200;\n                        this.setResponseBody(body || \"\");\n                    }\n\n                    return respond;\n                }(),\n                simulatetimeout: function () {\n                    function simulatetimeout() {\n                        this.status = 0;\n                        this.isTimeout = true; // Access to this should actually throw an error\n\n                        this.responseText = undefined;\n                        this.readyStateChange(FakeXDomainRequest.DONE);\n                    }\n\n                    return simulatetimeout;\n                }()\n            });\n            sinon.extend(FakeXDomainRequest, {\n                UNSENT: 0,\n                OPENED: 1,\n                LOADING: 3,\n                DONE: 4\n            });\n\n            sinon.useFakeXDomainRequest = function () {\n                function useFakeXDomainRequest() {\n                    sinon.FakeXDomainRequest.restore = function () {\n                        function restore(keepOnCreate) {\n                            if (xdr.supportsXDR) {\n                                global.XDomainRequest = xdr.GlobalXDomainRequest;\n                            }\n\n                            delete sinon.FakeXDomainRequest.restore;\n\n                            if (keepOnCreate !== true) {\n                                delete sinon.FakeXDomainRequest.onCreate;\n                            }\n                        }\n\n                        return restore;\n                    }();\n\n                    if (xdr.supportsXDR) {\n                        global.XDomainRequest = sinon.FakeXDomainRequest;\n                    }\n\n                    return sinon.FakeXDomainRequest;\n                }\n\n                return useFakeXDomainRequest;\n            }();\n\n            sinon.FakeXDomainRequest = FakeXDomainRequest;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./core\");\n\n            require(\"../extend\");\n\n            require(\"./event\");\n\n            require(\"../log_error\");\n\n            makeApi(sinon);\n            module.exports = sinon;\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require, module.exports, module);\n        } else {\n            makeApi(sinon); // eslint-disable-line no-undef\n        }\n    })(typeof global !== \"undefined\" ? global : self); /**\n                                                        * @depend core.js\n                                                        * @depend ../extend.js\n                                                        * @depend event.js\n                                                        * @depend ../log_error.js\n                                                        */ /**\n                                                            * Fake XMLHttpRequest object\n                                                            *\n                                                            * @author Christian Johansen (christian@cjohansen.no)\n                                                            * @license BSD\n                                                            *\n                                                            * Copyright (c) 2010-2013 Christian Johansen\n                                                            */\n\n    (function (sinonGlobal, global) {\n        function getWorkingXHR(globalScope) {\n            var supportsXHR = typeof globalScope.XMLHttpRequest !== \"undefined\";\n\n            if (supportsXHR) {\n                return globalScope.XMLHttpRequest;\n            }\n\n            var supportsActiveX = typeof globalScope.ActiveXObject !== \"undefined\";\n\n            if (supportsActiveX) {\n                return function () {\n                    return new globalScope.ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n                };\n            }\n\n            return false;\n        }\n\n        var supportsProgress = typeof ProgressEvent !== \"undefined\";\n        var supportsCustomEvent = typeof CustomEvent !== \"undefined\";\n        var supportsFormData = typeof FormData !== \"undefined\";\n        var supportsArrayBuffer = typeof ArrayBuffer !== \"undefined\";\n        var supportsBlob = typeof Blob === \"function\";\n        var sinonXhr = {\n            XMLHttpRequest: global.XMLHttpRequest\n        };\n        sinonXhr.GlobalXMLHttpRequest = global.XMLHttpRequest;\n        sinonXhr.GlobalActiveXObject = global.ActiveXObject;\n        sinonXhr.supportsActiveX = typeof sinonXhr.GlobalActiveXObject !== \"undefined\";\n        sinonXhr.supportsXHR = typeof sinonXhr.GlobalXMLHttpRequest !== \"undefined\";\n        sinonXhr.workingXHR = getWorkingXHR(global);\n        sinonXhr.supportsCORS = sinonXhr.supportsXHR && \"withCredentials\" in new sinonXhr.GlobalXMLHttpRequest();\n        var unsafeHeaders = {\n            \"Accept-Charset\": true,\n            \"Accept-Encoding\": true,\n            Connection: true,\n            \"Content-Length\": true,\n            Cookie: true,\n            Cookie2: true,\n            \"Content-Transfer-Encoding\": true,\n            Date: true,\n            Expect: true,\n            Host: true,\n            \"Keep-Alive\": true,\n            Referer: true,\n            TE: true,\n            Trailer: true,\n            \"Transfer-Encoding\": true,\n            Upgrade: true,\n            \"User-Agent\": true,\n            Via: true\n        }; // An upload object is created for each\n        // FakeXMLHttpRequest and allows upload\n        // events to be simulated using uploadProgress\n        // and uploadError.\n\n        function UploadProgress() {\n            this.eventListeners = {\n                progress: [],\n                load: [],\n                abort: [],\n                error: []\n            };\n        }\n\n        UploadProgress.prototype.addEventListener = function () {\n            function addEventListener(event, listener) {\n                this.eventListeners[event].push(listener);\n            }\n\n            return addEventListener;\n        }();\n\n        UploadProgress.prototype.removeEventListener = function () {\n            function removeEventListener(event, listener) {\n                var listeners = this.eventListeners[event] || [];\n\n                for (var i = 0, l = listeners.length; i < l; ++i) {\n                    if (listeners[i] === listener) {\n                        return listeners.splice(i, 1);\n                    }\n                }\n            }\n\n            return removeEventListener;\n        }();\n\n        UploadProgress.prototype.dispatchEvent = function () {\n            function dispatchEvent(event) {\n                var listeners = this.eventListeners[event.type] || [];\n\n                for (var i = 0, listener; (listener = listeners[i]) != null; i++) {\n                    listener(event);\n                }\n            }\n\n            return dispatchEvent;\n        }(); // Note that for FakeXMLHttpRequest to work pre ES5\n        // we lose some of the alignment with the spec.\n        // To ensure as close a match as possible,\n        // set responseType before calling open, send or respond;\n\n\n        function FakeXMLHttpRequest() {\n            this.readyState = FakeXMLHttpRequest.UNSENT;\n            this.requestHeaders = {};\n            this.requestBody = null;\n            this.status = 0;\n            this.statusText = \"\";\n            this.upload = new UploadProgress();\n            this.responseType = \"\";\n            this.response = \"\";\n\n            if (sinonXhr.supportsCORS) {\n                this.withCredentials = false;\n            }\n\n            var xhr = this;\n            var events = [\"loadstart\", \"load\", \"abort\", \"loadend\"];\n\n            function addEventListener(eventName) {\n                xhr.addEventListener(eventName, function (event) {\n                    var listener = xhr[\"on\" + eventName];\n\n                    if (listener && typeof listener === \"function\") {\n                        listener.call(this, event);\n                    }\n                });\n            }\n\n            for (var i = events.length - 1; i >= 0; i--) {\n                addEventListener(events[i]);\n            }\n\n            if (typeof FakeXMLHttpRequest.onCreate === \"function\") {\n                FakeXMLHttpRequest.onCreate(this);\n            }\n        }\n\n        function verifyState(xhr) {\n            if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n\n            if (xhr.sendFlag) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n        }\n\n        function getHeader(headers, header) {\n            header = header.toLowerCase();\n\n            for (var h in meteorBabelHelpers.sanitizeForInObject(headers)) {\n                if (h.toLowerCase() === header) {\n                    return h;\n                }\n            }\n\n            return null;\n        } // filtering to enable a white-list version of Sinon FakeXhr,\n        // where whitelisted requests are passed through to real XHR\n\n\n        function each(collection, callback) {\n            if (!collection) {\n                return;\n            }\n\n            for (var i = 0, l = collection.length; i < l; i += 1) {\n                callback(collection[i]);\n            }\n        }\n\n        function some(collection, callback) {\n            for (var index = 0; index < collection.length; index++) {\n                if (callback(collection[index]) === true) {\n                    return true;\n                }\n            }\n\n            return false;\n        } // largest arity in XHR is 5 - XHR#open\n\n\n        var apply = function (obj, method, args) {\n            switch (args.length) {\n                case 0:\n                    return obj[method]();\n\n                case 1:\n                    return obj[method](args[0]);\n\n                case 2:\n                    return obj[method](args[0], args[1]);\n\n                case 3:\n                    return obj[method](args[0], args[1], args[2]);\n\n                case 4:\n                    return obj[method](args[0], args[1], args[2], args[3]);\n\n                case 5:\n                    return obj[method](args[0], args[1], args[2], args[3], args[4]);\n            }\n        };\n\n        FakeXMLHttpRequest.filters = [];\n\n        FakeXMLHttpRequest.addFilter = function () {\n            function addFilter(fn) {\n                this.filters.push(fn);\n            }\n\n            return addFilter;\n        }();\n\n        var IE6Re = /MSIE 6/;\n\n        FakeXMLHttpRequest.defake = function () {\n            function defake(fakeXhr, xhrArgs) {\n                var xhr = new sinonXhr.workingXHR(); // eslint-disable-line new-cap\n\n                each([\"open\", \"setRequestHeader\", \"send\", \"abort\", \"getResponseHeader\", \"getAllResponseHeaders\", \"addEventListener\", \"overrideMimeType\", \"removeEventListener\"], function (method) {\n                    fakeXhr[method] = function () {\n                        return apply(xhr, method, arguments);\n                    };\n                });\n\n                var copyAttrs = function (args) {\n                    each(args, function (attr) {\n                        try {\n                            fakeXhr[attr] = xhr[attr];\n                        } catch (e) {\n                            if (!IE6Re.test(navigator.userAgent)) {\n                                throw e;\n                            }\n                        }\n                    });\n                };\n\n                var stateChange = function () {\n                    function stateChange() {\n                        fakeXhr.readyState = xhr.readyState;\n\n                        if (xhr.readyState >= FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                            copyAttrs([\"status\", \"statusText\"]);\n                        }\n\n                        if (xhr.readyState >= FakeXMLHttpRequest.LOADING) {\n                            copyAttrs([\"responseText\", \"response\"]);\n                        }\n\n                        if (xhr.readyState === FakeXMLHttpRequest.DONE) {\n                            copyAttrs([\"responseXML\"]);\n                        }\n\n                        if (fakeXhr.onreadystatechange) {\n                            fakeXhr.onreadystatechange.call(fakeXhr, {\n                                target: fakeXhr\n                            });\n                        }\n                    }\n\n                    return stateChange;\n                }();\n\n                if (xhr.addEventListener) {\n                    for (var event in meteorBabelHelpers.sanitizeForInObject(fakeXhr.eventListeners)) {\n                        if (fakeXhr.eventListeners.hasOwnProperty(event)) {\n                            /*eslint-disable no-loop-func*/each(fakeXhr.eventListeners[event], function (handler) {\n                                xhr.addEventListener(event, handler);\n                            }); /*eslint-enable no-loop-func*/\n                        }\n                    }\n\n                    xhr.addEventListener(\"readystatechange\", stateChange);\n                } else {\n                    xhr.onreadystatechange = stateChange;\n                }\n\n                apply(xhr, \"open\", xhrArgs);\n            }\n\n            return defake;\n        }();\n\n        FakeXMLHttpRequest.useFilters = false;\n\n        function verifyRequestOpened(xhr) {\n            if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n                throw new Error(\"INVALID_STATE_ERR - \" + xhr.readyState);\n            }\n        }\n\n        function verifyRequestSent(xhr) {\n            if (xhr.readyState === FakeXMLHttpRequest.DONE) {\n                throw new Error(\"Request done\");\n            }\n        }\n\n        function verifyHeadersReceived(xhr) {\n            if (xhr.async && xhr.readyState !== FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                throw new Error(\"No headers received\");\n            }\n        }\n\n        function verifyResponseBodyType(body) {\n            if (typeof body !== \"string\") {\n                var error = new Error(\"Attempted to respond to fake XMLHttpRequest with \" + body + \", which is not a string.\");\n                error.name = \"InvalidBodyException\";\n                throw error;\n            }\n        }\n\n        function convertToArrayBuffer(body) {\n            var buffer = new ArrayBuffer(body.length);\n            var view = new Uint8Array(buffer);\n\n            for (var i = 0; i < body.length; i++) {\n                var charCode = body.charCodeAt(i);\n\n                if (charCode >= 256) {\n                    throw new TypeError(\"arraybuffer or blob responseTypes require binary string, \" + \"invalid character \" + body[i] + \" found.\");\n                }\n\n                view[i] = charCode;\n            }\n\n            return buffer;\n        }\n\n        function isXmlContentType(contentType) {\n            return !contentType || /(text\\/xml)|(application\\/xml)|(\\+xml)/.test(contentType);\n        }\n\n        function convertResponseBody(responseType, contentType, body) {\n            if (responseType === \"\" || responseType === \"text\") {\n                return body;\n            } else if (supportsArrayBuffer && responseType === \"arraybuffer\") {\n                return convertToArrayBuffer(body);\n            } else if (responseType === \"json\") {\n                try {\n                    return JSON.parse(body);\n                } catch (e) {\n                    // Return parsing failure as null\n                    return null;\n                }\n            } else if (supportsBlob && responseType === \"blob\") {\n                var blobOptions = {};\n\n                if (contentType) {\n                    blobOptions.type = contentType;\n                }\n\n                return new Blob([convertToArrayBuffer(body)], blobOptions);\n            } else if (responseType === \"document\") {\n                if (isXmlContentType(contentType)) {\n                    return FakeXMLHttpRequest.parseXML(body);\n                }\n\n                return null;\n            }\n\n            throw new Error(\"Invalid responseType \" + responseType);\n        }\n\n        function clearResponse(xhr) {\n            if (xhr.responseType === \"\" || xhr.responseType === \"text\") {\n                xhr.response = xhr.responseText = \"\";\n            } else {\n                xhr.response = xhr.responseText = null;\n            }\n\n            xhr.responseXML = null;\n        }\n\n        FakeXMLHttpRequest.parseXML = function () {\n            function parseXML(text) {\n                // Treat empty string as parsing failure\n                if (text !== \"\") {\n                    try {\n                        if (typeof DOMParser !== \"undefined\") {\n                            var parser = new DOMParser();\n                            return parser.parseFromString(text, \"text/xml\");\n                        }\n\n                        var xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                        xmlDoc.async = \"false\";\n                        xmlDoc.loadXML(text);\n                        return xmlDoc;\n                    } catch (e) {// Unable to parse XML - no biggie\n                    }\n                }\n\n                return null;\n            }\n\n            return parseXML;\n        }();\n\n        FakeXMLHttpRequest.statusCodes = {\n            100: \"Continue\",\n            101: \"Switching Protocols\",\n            200: \"OK\",\n            201: \"Created\",\n            202: \"Accepted\",\n            203: \"Non-Authoritative Information\",\n            204: \"No Content\",\n            205: \"Reset Content\",\n            206: \"Partial Content\",\n            207: \"Multi-Status\",\n            300: \"Multiple Choice\",\n            301: \"Moved Permanently\",\n            302: \"Found\",\n            303: \"See Other\",\n            304: \"Not Modified\",\n            305: \"Use Proxy\",\n            307: \"Temporary Redirect\",\n            400: \"Bad Request\",\n            401: \"Unauthorized\",\n            402: \"Payment Required\",\n            403: \"Forbidden\",\n            404: \"Not Found\",\n            405: \"Method Not Allowed\",\n            406: \"Not Acceptable\",\n            407: \"Proxy Authentication Required\",\n            408: \"Request Timeout\",\n            409: \"Conflict\",\n            410: \"Gone\",\n            411: \"Length Required\",\n            412: \"Precondition Failed\",\n            413: \"Request Entity Too Large\",\n            414: \"Request-URI Too Long\",\n            415: \"Unsupported Media Type\",\n            416: \"Requested Range Not Satisfiable\",\n            417: \"Expectation Failed\",\n            422: \"Unprocessable Entity\",\n            500: \"Internal Server Error\",\n            501: \"Not Implemented\",\n            502: \"Bad Gateway\",\n            503: \"Service Unavailable\",\n            504: \"Gateway Timeout\",\n            505: \"HTTP Version Not Supported\"\n        };\n\n        function makeApi(sinon) {\n            sinon.xhr = sinonXhr;\n            sinon.extend(FakeXMLHttpRequest.prototype, sinon.EventTarget, {\n                async: true,\n                open: function () {\n                    function open(method, url, async, username, password) {\n                        this.method = method;\n                        this.url = url;\n                        this.async = typeof async === \"boolean\" ? async : true;\n                        this.username = username;\n                        this.password = password;\n                        clearResponse(this);\n                        this.requestHeaders = {};\n                        this.sendFlag = false;\n\n                        if (FakeXMLHttpRequest.useFilters === true) {\n                            var xhrArgs = arguments;\n                            var defake = some(FakeXMLHttpRequest.filters, function (filter) {\n                                return filter.apply(this, xhrArgs);\n                            });\n\n                            if (defake) {\n                                return FakeXMLHttpRequest.defake(this, arguments);\n                            }\n                        }\n\n                        this.readyStateChange(FakeXMLHttpRequest.OPENED);\n                    }\n\n                    return open;\n                }(),\n                readyStateChange: function () {\n                    function readyStateChange(state) {\n                        this.readyState = state;\n                        var readyStateChangeEvent = new sinon.Event(\"readystatechange\", false, false, this);\n\n                        if (typeof this.onreadystatechange === \"function\") {\n                            try {\n                                this.onreadystatechange(readyStateChangeEvent);\n                            } catch (e) {\n                                sinon.logError(\"Fake XHR onreadystatechange handler\", e);\n                            }\n                        }\n\n                        switch (this.readyState) {\n                            case FakeXMLHttpRequest.DONE:\n                                if (supportsProgress) {\n                                    this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", {\n                                        loaded: 100,\n                                        total: 100\n                                    }));\n                                    this.dispatchEvent(new sinon.ProgressEvent(\"progress\", {\n                                        loaded: 100,\n                                        total: 100\n                                    }));\n                                }\n\n                                this.upload.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                                this.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                                this.dispatchEvent(new sinon.Event(\"loadend\", false, false, this));\n                                break;\n                        }\n\n                        this.dispatchEvent(readyStateChangeEvent);\n                    }\n\n                    return readyStateChange;\n                }(),\n                setRequestHeader: function () {\n                    function setRequestHeader(header, value) {\n                        verifyState(this);\n\n                        if (unsafeHeaders[header] || /^(Sec-|Proxy-)/.test(header)) {\n                            throw new Error(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n                        }\n\n                        if (this.requestHeaders[header]) {\n                            this.requestHeaders[header] += \",\" + value;\n                        } else {\n                            this.requestHeaders[header] = value;\n                        }\n                    }\n\n                    return setRequestHeader;\n                }(),\n                // Helps testing\n                setResponseHeaders: function () {\n                    function setResponseHeaders(headers) {\n                        verifyRequestOpened(this);\n                        this.responseHeaders = {};\n\n                        for (var header in meteorBabelHelpers.sanitizeForInObject(headers)) {\n                            if (headers.hasOwnProperty(header)) {\n                                this.responseHeaders[header] = headers[header];\n                            }\n                        }\n\n                        if (this.async) {\n                            this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED);\n                        } else {\n                            this.readyState = FakeXMLHttpRequest.HEADERS_RECEIVED;\n                        }\n                    }\n\n                    return setResponseHeaders;\n                }(),\n                // Currently treats ALL data as a DOMString (i.e. no Document)\n                send: function () {\n                    function send(data) {\n                        verifyState(this);\n\n                        if (!/^(get|head)$/i.test(this.method)) {\n                            var contentType = getHeader(this.requestHeaders, \"Content-Type\");\n\n                            if (this.requestHeaders[contentType]) {\n                                var value = this.requestHeaders[contentType].split(\";\");\n                                this.requestHeaders[contentType] = value[0] + \";charset=utf-8\";\n                            } else if (supportsFormData && !(data instanceof FormData)) {\n                                this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                            }\n\n                            this.requestBody = data;\n                        }\n\n                        this.errorFlag = false;\n                        this.sendFlag = this.async;\n                        clearResponse(this);\n                        this.readyStateChange(FakeXMLHttpRequest.OPENED);\n\n                        if (typeof this.onSend === \"function\") {\n                            this.onSend(this);\n                        }\n\n                        this.dispatchEvent(new sinon.Event(\"loadstart\", false, false, this));\n                    }\n\n                    return send;\n                }(),\n                abort: function () {\n                    function abort() {\n                        this.aborted = true;\n                        clearResponse(this);\n                        this.errorFlag = true;\n                        this.requestHeaders = {};\n                        this.responseHeaders = {};\n\n                        if (this.readyState > FakeXMLHttpRequest.UNSENT && this.sendFlag) {\n                            this.readyStateChange(FakeXMLHttpRequest.DONE);\n                            this.sendFlag = false;\n                        }\n\n                        this.readyState = FakeXMLHttpRequest.UNSENT;\n                        this.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n                        this.upload.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n                        if (typeof this.onerror === \"function\") {\n                            this.onerror();\n                        }\n                    }\n\n                    return abort;\n                }(),\n                getResponseHeader: function () {\n                    function getResponseHeader(header) {\n                        if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                            return null;\n                        }\n\n                        if (/^Set-Cookie2?$/i.test(header)) {\n                            return null;\n                        }\n\n                        header = getHeader(this.responseHeaders, header);\n                        return this.responseHeaders[header] || null;\n                    }\n\n                    return getResponseHeader;\n                }(),\n                getAllResponseHeaders: function () {\n                    function getAllResponseHeaders() {\n                        if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                            return \"\";\n                        }\n\n                        var headers = \"\";\n\n                        for (var header in meteorBabelHelpers.sanitizeForInObject(this.responseHeaders)) {\n                            if (this.responseHeaders.hasOwnProperty(header) && !/^Set-Cookie2?$/i.test(header)) {\n                                headers += header + \": \" + this.responseHeaders[header] + \"\\r\\n\";\n                            }\n                        }\n\n                        return headers;\n                    }\n\n                    return getAllResponseHeaders;\n                }(),\n                setResponseBody: function () {\n                    function setResponseBody(body) {\n                        verifyRequestSent(this);\n                        verifyHeadersReceived(this);\n                        verifyResponseBodyType(body);\n                        var contentType = this.getResponseHeader(\"Content-Type\");\n                        var isTextResponse = this.responseType === \"\" || this.responseType === \"text\";\n                        clearResponse(this);\n\n                        if (this.async) {\n                            var chunkSize = this.chunkSize || 10;\n                            var index = 0;\n\n                            do {\n                                this.readyStateChange(FakeXMLHttpRequest.LOADING);\n\n                                if (isTextResponse) {\n                                    this.responseText = this.response += body.substring(index, index + chunkSize);\n                                }\n\n                                index += chunkSize;\n                            } while (index < body.length);\n                        }\n\n                        this.response = convertResponseBody(this.responseType, contentType, body);\n\n                        if (isTextResponse) {\n                            this.responseText = this.response;\n                        }\n\n                        if (this.responseType === \"document\") {\n                            this.responseXML = this.response;\n                        } else if (this.responseType === \"\" && isXmlContentType(contentType)) {\n                            this.responseXML = FakeXMLHttpRequest.parseXML(this.responseText);\n                        }\n\n                        this.readyStateChange(FakeXMLHttpRequest.DONE);\n                    }\n\n                    return setResponseBody;\n                }(),\n                respond: function () {\n                    function respond(status, headers, body) {\n                        this.status = typeof status === \"number\" ? status : 200;\n                        this.statusText = FakeXMLHttpRequest.statusCodes[this.status];\n                        this.setResponseHeaders(headers || {});\n                        this.setResponseBody(body || \"\");\n                    }\n\n                    return respond;\n                }(),\n                uploadProgress: function () {\n                    function uploadProgress(progressEventRaw) {\n                        if (supportsProgress) {\n                            this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                        }\n                    }\n\n                    return uploadProgress;\n                }(),\n                downloadProgress: function () {\n                    function downloadProgress(progressEventRaw) {\n                        if (supportsProgress) {\n                            this.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                        }\n                    }\n\n                    return downloadProgress;\n                }(),\n                uploadError: function () {\n                    function uploadError(error) {\n                        if (supportsCustomEvent) {\n                            this.upload.dispatchEvent(new sinon.CustomEvent(\"error\", {\n                                detail: error\n                            }));\n                        }\n                    }\n\n                    return uploadError;\n                }()\n            });\n            sinon.extend(FakeXMLHttpRequest, {\n                UNSENT: 0,\n                OPENED: 1,\n                HEADERS_RECEIVED: 2,\n                LOADING: 3,\n                DONE: 4\n            });\n\n            sinon.useFakeXMLHttpRequest = function () {\n                FakeXMLHttpRequest.restore = function () {\n                    function restore(keepOnCreate) {\n                        if (sinonXhr.supportsXHR) {\n                            global.XMLHttpRequest = sinonXhr.GlobalXMLHttpRequest;\n                        }\n\n                        if (sinonXhr.supportsActiveX) {\n                            global.ActiveXObject = sinonXhr.GlobalActiveXObject;\n                        }\n\n                        delete FakeXMLHttpRequest.restore;\n\n                        if (keepOnCreate !== true) {\n                            delete FakeXMLHttpRequest.onCreate;\n                        }\n                    }\n\n                    return restore;\n                }();\n\n                if (sinonXhr.supportsXHR) {\n                    global.XMLHttpRequest = FakeXMLHttpRequest;\n                }\n\n                if (sinonXhr.supportsActiveX) {\n                    global.ActiveXObject = function () {\n                        function ActiveXObject(objId) {\n                            if (objId === \"Microsoft.XMLHTTP\" || /^Msxml2\\.XMLHTTP/i.test(objId)) {\n                                return new FakeXMLHttpRequest();\n                            }\n\n                            return new sinonXhr.GlobalActiveXObject(objId);\n                        }\n\n                        return ActiveXObject;\n                    }();\n                }\n\n                return FakeXMLHttpRequest;\n            };\n\n            sinon.FakeXMLHttpRequest = FakeXMLHttpRequest;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./core\");\n\n            require(\"../extend\");\n\n            require(\"./event\");\n\n            require(\"../log_error\");\n\n            makeApi(sinon);\n            module.exports = sinon;\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon, // eslint-disable-line no-undef\n    typeof global !== \"undefined\" ? global : self); /**\n                                                     * @depend fake_xdomain_request.js\n                                                     * @depend fake_xml_http_request.js\n                                                     * @depend ../format.js\n                                                     * @depend ../log_error.js\n                                                     */ /**\n                                                         * The Sinon \"server\" mimics a web server that receives requests from\n                                                         * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,\n                                                         * both synchronously and asynchronously. To respond synchronuously, canned\n                                                         * answers have to be provided upfront.\n                                                         *\n                                                         * @author Christian Johansen (christian@cjohansen.no)\n                                                         * @license BSD\n                                                         *\n                                                         * Copyright (c) 2010-2013 Christian Johansen\n                                                         */\n\n    (function () {\n        var push = [].push;\n\n        function responseArray(handler) {\n            var response = handler;\n\n            if (Object.prototype.toString.call(handler) !== \"[object Array]\") {\n                response = [200, {}, handler];\n            }\n\n            if (typeof response[2] !== \"string\") {\n                throw new TypeError(\"Fake server response body should be string, but was \" + (0, _typeof3.default)(response[2]));\n            }\n\n            return response;\n        }\n\n        var wloc = typeof window !== \"undefined\" ? window.location : {};\n        var rCurrLoc = new RegExp(\"^\" + wloc.protocol + \"//\" + wloc.host);\n\n        function matchOne(response, reqMethod, reqUrl) {\n            var rmeth = response.method;\n            var matchMethod = !rmeth || rmeth.toLowerCase() === reqMethod.toLowerCase();\n            var url = response.url;\n            var matchUrl = !url || url === reqUrl || typeof url.test === \"function\" && url.test(reqUrl);\n            return matchMethod && matchUrl;\n        }\n\n        function match(response, request) {\n            var requestUrl = request.url;\n\n            if (!/^https?:\\/\\//.test(requestUrl) || rCurrLoc.test(requestUrl)) {\n                requestUrl = requestUrl.replace(rCurrLoc, \"\");\n            }\n\n            if (matchOne(response, this.getHTTPMethod(request), requestUrl)) {\n                if (typeof response.response === \"function\") {\n                    var ru = response.url;\n                    var args = [request].concat(ru && typeof ru.exec === \"function\" ? ru.exec(requestUrl).slice(1) : []);\n                    return response.response.apply(response, args);\n                }\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function makeApi(sinon) {\n            sinon.fakeServer = {\n                create: function (config) {\n                    var server = sinon.create(this);\n                    server.configure(config);\n\n                    if (!sinon.xhr.supportsCORS) {\n                        this.xhr = sinon.useFakeXDomainRequest();\n                    } else {\n                        this.xhr = sinon.useFakeXMLHttpRequest();\n                    }\n\n                    server.requests = [];\n\n                    this.xhr.onCreate = function (xhrObj) {\n                        server.addRequest(xhrObj);\n                    };\n\n                    return server;\n                },\n                configure: function (config) {\n                    var whitelist = {\n                        \"autoRespond\": true,\n                        \"autoRespondAfter\": true,\n                        \"respondImmediately\": true,\n                        \"fakeHTTPMethods\": true\n                    };\n                    var setting;\n                    config = config || {};\n\n                    for (setting in meteorBabelHelpers.sanitizeForInObject(config)) {\n                        if (whitelist.hasOwnProperty(setting) && config.hasOwnProperty(setting)) {\n                            this[setting] = config[setting];\n                        }\n                    }\n                },\n                addRequest: function () {\n                    function addRequest(xhrObj) {\n                        var server = this;\n                        push.call(this.requests, xhrObj);\n\n                        xhrObj.onSend = function () {\n                            server.handleRequest(this);\n\n                            if (server.respondImmediately) {\n                                server.respond();\n                            } else if (server.autoRespond && !server.responding) {\n                                setTimeout(function () {\n                                    server.responding = false;\n                                    server.respond();\n                                }, server.autoRespondAfter || 10);\n                                server.responding = true;\n                            }\n                        };\n                    }\n\n                    return addRequest;\n                }(),\n                getHTTPMethod: function () {\n                    function getHTTPMethod(request) {\n                        if (this.fakeHTTPMethods && /post/i.test(request.method)) {\n                            var matches = (request.requestBody || \"\").match(/_method=([^\\b;]+)/);\n                            return matches ? matches[1] : request.method;\n                        }\n\n                        return request.method;\n                    }\n\n                    return getHTTPMethod;\n                }(),\n                handleRequest: function () {\n                    function handleRequest(xhr) {\n                        if (xhr.async) {\n                            if (!this.queue) {\n                                this.queue = [];\n                            }\n\n                            push.call(this.queue, xhr);\n                        } else {\n                            this.processRequest(xhr);\n                        }\n                    }\n\n                    return handleRequest;\n                }(),\n                log: function () {\n                    function log(response, request) {\n                        var str;\n                        str = \"Request:\\n\" + sinon.format(request) + \"\\n\\n\";\n                        str += \"Response:\\n\" + sinon.format(response) + \"\\n\\n\";\n                        sinon.log(str);\n                    }\n\n                    return log;\n                }(),\n                respondWith: function () {\n                    function respondWith(method, url, body) {\n                        if (arguments.length === 1 && typeof method !== \"function\") {\n                            this.response = responseArray(method);\n                            return;\n                        }\n\n                        if (!this.responses) {\n                            this.responses = [];\n                        }\n\n                        if (arguments.length === 1) {\n                            body = method;\n                            url = method = null;\n                        }\n\n                        if (arguments.length === 2) {\n                            body = url;\n                            url = method;\n                            method = null;\n                        }\n\n                        push.call(this.responses, {\n                            method: method,\n                            url: url,\n                            response: typeof body === \"function\" ? body : responseArray(body)\n                        });\n                    }\n\n                    return respondWith;\n                }(),\n                respond: function () {\n                    function respond() {\n                        if (arguments.length > 0) {\n                            this.respondWith.apply(this, arguments);\n                        }\n\n                        var queue = this.queue || [];\n                        var requests = queue.splice(0, queue.length);\n\n                        for (var i = 0; i < requests.length; i++) {\n                            this.processRequest(requests[i]);\n                        }\n                    }\n\n                    return respond;\n                }(),\n                processRequest: function () {\n                    function processRequest(request) {\n                        try {\n                            if (request.aborted) {\n                                return;\n                            }\n\n                            var response = this.response || [404, {}, \"\"];\n\n                            if (this.responses) {\n                                for (var l = this.responses.length, i = l - 1; i >= 0; i--) {\n                                    if (match.call(this, this.responses[i], request)) {\n                                        response = this.responses[i].response;\n                                        break;\n                                    }\n                                }\n                            }\n\n                            if (request.readyState !== 4) {\n                                this.log(response, request);\n                                request.respond(response[0], response[1], response[2]);\n                            }\n                        } catch (e) {\n                            sinon.logError(\"Fake server request processing\", e);\n                        }\n                    }\n\n                    return processRequest;\n                }(),\n                restore: function () {\n                    function restore() {\n                        return this.xhr.restore && this.xhr.restore.apply(this.xhr, arguments);\n                    }\n\n                    return restore;\n                }()\n            };\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./core\");\n\n            require(\"./fake_xdomain_request\");\n\n            require(\"./fake_xml_http_request\");\n\n            require(\"../format\");\n\n            makeApi(sinon);\n            module.exports = sinon;\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require, module.exports, module);\n        } else {\n            makeApi(sinon); // eslint-disable-line no-undef\n        }\n    })(); /**\n           * @depend fake_server.js\n           * @depend fake_timers.js\n           */ /**\n               * Add-on for sinon.fakeServer that automatically handles a fake timer along with\n               * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery\n               * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,\n               * it polls the object for completion with setInterval. Dispite the direct\n               * motivation, there is nothing jQuery-specific in this file, so it can be used\n               * in any environment where the ajax implementation depends on setInterval or\n               * setTimeout.\n               *\n               * @author Christian Johansen (christian@cjohansen.no)\n               * @license BSD\n               *\n               * Copyright (c) 2010-2013 Christian Johansen\n               */\n\n    (function () {\n        function makeApi(sinon) {\n            function Server() {}\n\n            Server.prototype = sinon.fakeServer;\n            sinon.fakeServerWithClock = new Server();\n\n            sinon.fakeServerWithClock.addRequest = function () {\n                function addRequest(xhr) {\n                    if (xhr.async) {\n                        if ((0, _typeof3.default)(setTimeout.clock) === \"object\") {\n                            this.clock = setTimeout.clock;\n                        } else {\n                            this.clock = sinon.useFakeTimers();\n                            this.resetClock = true;\n                        }\n\n                        if (!this.longestTimeout) {\n                            var clockSetTimeout = this.clock.setTimeout;\n                            var clockSetInterval = this.clock.setInterval;\n                            var server = this;\n\n                            this.clock.setTimeout = function (fn, timeout) {\n                                server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n                                return clockSetTimeout.apply(this, arguments);\n                            };\n\n                            this.clock.setInterval = function (fn, timeout) {\n                                server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n                                return clockSetInterval.apply(this, arguments);\n                            };\n                        }\n                    }\n\n                    return sinon.fakeServer.addRequest.call(this, xhr);\n                }\n\n                return addRequest;\n            }();\n\n            sinon.fakeServerWithClock.respond = function () {\n                function respond() {\n                    var returnVal = sinon.fakeServer.respond.apply(this, arguments);\n\n                    if (this.clock) {\n                        this.clock.tick(this.longestTimeout || 0);\n                        this.longestTimeout = 0;\n\n                        if (this.resetClock) {\n                            this.clock.restore();\n                            this.resetClock = false;\n                        }\n                    }\n\n                    return returnVal;\n                }\n\n                return respond;\n            }();\n\n            sinon.fakeServerWithClock.restore = function () {\n                function restore() {\n                    if (this.clock) {\n                        this.clock.restore();\n                    }\n\n                    return sinon.fakeServer.restore.apply(this, arguments);\n                }\n\n                return restore;\n            }();\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require) {\n            var sinon = require(\"./core\");\n\n            require(\"./fake_server\");\n\n            require(\"./fake_timers\");\n\n            makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require);\n        } else {\n            makeApi(sinon); // eslint-disable-line no-undef\n        }\n    })(); /**\n           * @depend util/core.js\n           * @depend extend.js\n           * @depend collection.js\n           * @depend util/fake_timers.js\n           * @depend util/fake_server_with_clock.js\n           */ /**\n               * Manages fake collections as well as fake utilities such as Sinon's\n               * timers and fake XHR implementation in one convenient object.\n               *\n               * @author Christian Johansen (christian@cjohansen.no)\n               * @license BSD\n               *\n               * Copyright (c) 2010-2013 Christian Johansen\n               */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            var push = [].push;\n\n            function exposeValue(sandbox, config, key, value) {\n                if (!value) {\n                    return;\n                }\n\n                if (config.injectInto && !(key in config.injectInto)) {\n                    config.injectInto[key] = value;\n                    sandbox.injectedKeys.push(key);\n                } else {\n                    push.call(sandbox.args, value);\n                }\n            }\n\n            function prepareSandboxFromConfig(config) {\n                var sandbox = sinon.create(sinon.sandbox);\n\n                if (config.useFakeServer) {\n                    if ((0, _typeof3.default)(config.useFakeServer) === \"object\") {\n                        sandbox.serverPrototype = config.useFakeServer;\n                    }\n\n                    sandbox.useFakeServer();\n                }\n\n                if (config.useFakeTimers) {\n                    if ((0, _typeof3.default)(config.useFakeTimers) === \"object\") {\n                        sandbox.useFakeTimers.apply(sandbox, config.useFakeTimers);\n                    } else {\n                        sandbox.useFakeTimers();\n                    }\n                }\n\n                return sandbox;\n            }\n\n            sinon.sandbox = sinon.extend(sinon.create(sinon.collection), {\n                useFakeTimers: function () {\n                    function useFakeTimers() {\n                        this.clock = sinon.useFakeTimers.apply(sinon, arguments);\n                        return this.add(this.clock);\n                    }\n\n                    return useFakeTimers;\n                }(),\n                serverPrototype: sinon.fakeServer,\n                useFakeServer: function () {\n                    function useFakeServer() {\n                        var proto = this.serverPrototype || sinon.fakeServer;\n\n                        if (!proto || !proto.create) {\n                            return null;\n                        }\n\n                        this.server = proto.create();\n                        return this.add(this.server);\n                    }\n\n                    return useFakeServer;\n                }(),\n                inject: function (obj) {\n                    sinon.collection.inject.call(this, obj);\n\n                    if (this.clock) {\n                        obj.clock = this.clock;\n                    }\n\n                    if (this.server) {\n                        obj.server = this.server;\n                        obj.requests = this.server.requests;\n                    }\n\n                    obj.match = sinon.match;\n                    return obj;\n                },\n                restore: function () {\n                    sinon.collection.restore.apply(this, arguments);\n                    this.restoreContext();\n                },\n                restoreContext: function () {\n                    if (this.injectedKeys) {\n                        for (var i = 0, j = this.injectedKeys.length; i < j; i++) {\n                            delete this.injectInto[this.injectedKeys[i]];\n                        }\n\n                        this.injectedKeys = [];\n                    }\n                },\n                create: function (config) {\n                    if (!config) {\n                        return sinon.create(sinon.sandbox);\n                    }\n\n                    var sandbox = prepareSandboxFromConfig(config);\n                    sandbox.args = sandbox.args || [];\n                    sandbox.injectedKeys = [];\n                    sandbox.injectInto = config.injectInto;\n                    var prop, value;\n                    var exposed = sandbox.inject({});\n\n                    if (config.properties) {\n                        for (var i = 0, l = config.properties.length; i < l; i++) {\n                            prop = config.properties[i];\n                            value = exposed[prop] || prop === \"sandbox\" && sandbox;\n                            exposeValue(sandbox, config, prop, value);\n                        }\n                    } else {\n                        exposeValue(sandbox, config, \"sandbox\", value);\n                    }\n\n                    return sandbox;\n                },\n                match: sinon.match\n            });\n            sinon.sandbox.useFakeXMLHttpRequest = sinon.sandbox.useFakeServer;\n            return sinon.sandbox;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./extend\");\n\n            require(\"./util/fake_server_with_clock\");\n\n            require(\"./util/fake_timers\");\n\n            require(\"./collection\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend util/core.js\n        * @depend sandbox.js\n        */ /**\n            * Test function, sandboxes fakes\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal) {\n        function makeApi(sinon) {\n            var slice = Array.prototype.slice;\n\n            function test(callback) {\n                var type = typeof callback === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(callback);\n\n                if (type !== \"function\") {\n                    throw new TypeError(\"sinon.test needs to wrap a test function, got \" + type);\n                }\n\n                function sinonSandboxedTest() {\n                    var config = sinon.getConfig(sinon.config);\n                    config.injectInto = config.injectIntoThis && this || config.injectInto;\n                    var sandbox = sinon.sandbox.create(config);\n                    var args = slice.call(arguments);\n                    var oldDone = args.length && args[args.length - 1];\n                    var exception, result;\n\n                    if (typeof oldDone === \"function\") {\n                        args[args.length - 1] = function () {\n                            function sinonDone(res) {\n                                if (res) {\n                                    sandbox.restore();\n                                } else {\n                                    sandbox.verifyAndRestore();\n                                }\n\n                                oldDone(res);\n                            }\n\n                            return sinonDone;\n                        }();\n                    }\n\n                    try {\n                        result = callback.apply(this, args.concat(sandbox.args));\n                    } catch (e) {\n                        exception = e;\n                    }\n\n                    if (typeof oldDone !== \"function\") {\n                        if (typeof exception !== \"undefined\") {\n                            sandbox.restore();\n                            throw exception;\n                        } else {\n                            sandbox.verifyAndRestore();\n                        }\n                    }\n\n                    return result;\n                }\n\n                if (callback.length) {\n                    return function () {\n                        function sinonAsyncSandboxedTest(done) {\n                            // eslint-disable-line no-unused-vars\n                            return sinonSandboxedTest.apply(this, arguments);\n                        }\n\n                        return sinonAsyncSandboxedTest;\n                    }();\n                }\n\n                return sinonSandboxedTest;\n            }\n\n            test.config = {\n                injectIntoThis: true,\n                injectInto: null,\n                properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n                useFakeTimers: true,\n                useFakeServer: true\n            };\n            sinon.test = test;\n            return test;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            require(\"./sandbox\");\n\n            module.exports = makeApi(core);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n        } else if (isNode) {\n            loadDependencies(require, module.exports, module);\n        } else if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon || null); // eslint-disable-line no-undef\n    /**\n     * @depend util/core.js\n     * @depend test.js\n     */ /**\n         * Test case, sandboxes all test functions\n         *\n         * @author Christian Johansen (christian@cjohansen.no)\n         * @license BSD\n         *\n         * Copyright (c) 2010-2013 Christian Johansen\n         */\n\n    (function (sinonGlobal) {\n        function createTest(property, setUp, tearDown) {\n            return function () {\n                if (setUp) {\n                    setUp.apply(this, arguments);\n                }\n\n                var exception, result;\n\n                try {\n                    result = property.apply(this, arguments);\n                } catch (e) {\n                    exception = e;\n                }\n\n                if (tearDown) {\n                    tearDown.apply(this, arguments);\n                }\n\n                if (exception) {\n                    throw exception;\n                }\n\n                return result;\n            };\n        }\n\n        function makeApi(sinon) {\n            function testCase(tests, prefix) {\n                if (!tests || (typeof tests === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(tests)) !== \"object\") {\n                    throw new TypeError(\"sinon.testCase needs an object with test functions\");\n                }\n\n                prefix = prefix || \"test\";\n                var rPrefix = new RegExp(\"^\" + prefix);\n                var methods = {};\n                var setUp = tests.setUp;\n                var tearDown = tests.tearDown;\n                var testName, property, method;\n\n                for (testName in meteorBabelHelpers.sanitizeForInObject(tests)) {\n                    if (tests.hasOwnProperty(testName) && !/^(setUp|tearDown)$/.test(testName)) {\n                        property = tests[testName];\n\n                        if (typeof property === \"function\" && rPrefix.test(testName)) {\n                            method = property;\n\n                            if (setUp || tearDown) {\n                                method = createTest(property, setUp, tearDown);\n                            }\n\n                            methods[testName] = sinon.test(method);\n                        } else {\n                            methods[testName] = tests[testName];\n                        }\n                    }\n                }\n\n                return methods;\n            }\n\n            sinon.testCase = testCase;\n            return testCase;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var core = require(\"./util/core\");\n\n            require(\"./test\");\n\n            module.exports = makeApi(core);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon // eslint-disable-line no-undef\n    ); /**\n        * @depend times_in_words.js\n        * @depend util/core.js\n        * @depend match.js\n        * @depend format.js\n        */ /**\n            * Assertions matching the test spy retrieval interface.\n            *\n            * @author Christian Johansen (christian@cjohansen.no)\n            * @license BSD\n            *\n            * Copyright (c) 2010-2013 Christian Johansen\n            */\n\n    (function (sinonGlobal, global) {\n        var slice = Array.prototype.slice;\n\n        function makeApi(sinon) {\n            var assert;\n\n            function verifyIsStub() {\n                var method;\n\n                for (var i = 0, l = arguments.length; i < l; ++i) {\n                    method = arguments[i];\n\n                    if (!method) {\n                        assert.fail(\"fake is not a spy\");\n                    }\n\n                    if (method.proxy && method.proxy.isSinonProxy) {\n                        verifyIsStub(method.proxy);\n                    } else {\n                        if (typeof method !== \"function\") {\n                            assert.fail(method + \" is not a function\");\n                        }\n\n                        if (typeof method.getCall !== \"function\") {\n                            assert.fail(method + \" is not stubbed\");\n                        }\n                    }\n                }\n            }\n\n            function failAssertion(object, msg) {\n                object = object || global;\n                var failMethod = object.fail || assert.fail;\n                failMethod.call(object, msg);\n            }\n\n            function mirrorPropAsAssertion(name, method, message) {\n                if (arguments.length === 2) {\n                    message = method;\n                    method = name;\n                }\n\n                assert[name] = function (fake) {\n                    verifyIsStub(fake);\n                    var args = slice.call(arguments, 1);\n                    var failed = false;\n\n                    if (typeof method === \"function\") {\n                        failed = !method(fake);\n                    } else {\n                        failed = typeof fake[method] === \"function\" ? !fake[method].apply(fake, args) : !fake[method];\n                    }\n\n                    if (failed) {\n                        failAssertion(this, (fake.printf || fake.proxy.printf).apply(fake, [message].concat(args)));\n                    } else {\n                        assert.pass(name);\n                    }\n                };\n            }\n\n            function exposedName(prefix, prop) {\n                return !prefix || /^fail/.test(prop) ? prop : prefix + prop.slice(0, 1).toUpperCase() + prop.slice(1);\n            }\n\n            assert = {\n                failException: \"AssertError\",\n                fail: function () {\n                    function fail(message) {\n                        var error = new Error(message);\n                        error.name = this.failException || assert.failException;\n                        throw error;\n                    }\n\n                    return fail;\n                }(),\n                pass: function () {\n                    function pass() {}\n\n                    return pass;\n                }(),\n                callOrder: function () {\n                    function assertCallOrder() {\n                        verifyIsStub.apply(null, arguments);\n                        var expected = \"\";\n                        var actual = \"\";\n\n                        if (!sinon.calledInOrder(arguments)) {\n                            try {\n                                expected = [].join.call(arguments, \", \");\n                                var calls = slice.call(arguments);\n                                var i = calls.length;\n\n                                while (i) {\n                                    if (!calls[--i].called) {\n                                        calls.splice(i, 1);\n                                    }\n                                }\n\n                                actual = sinon.orderByFirstCall(calls).join(\", \");\n                            } catch (e) {// If this fails, we'll just fall back to the blank string\n                            }\n\n                            failAssertion(this, \"expected \" + expected + \" to be \" + \"called in order but were called as \" + actual);\n                        } else {\n                            assert.pass(\"callOrder\");\n                        }\n                    }\n\n                    return assertCallOrder;\n                }(),\n                callCount: function () {\n                    function assertCallCount(method, count) {\n                        verifyIsStub(method);\n\n                        if (method.callCount !== count) {\n                            var msg = \"expected %n to be called \" + sinon.timesInWords(count) + \" but was called %c%C\";\n                            failAssertion(this, method.printf(msg));\n                        } else {\n                            assert.pass(\"callCount\");\n                        }\n                    }\n\n                    return assertCallCount;\n                }(),\n                expose: function () {\n                    function expose(target, options) {\n                        if (!target) {\n                            throw new TypeError(\"target is null or undefined\");\n                        }\n\n                        var o = options || {};\n                        var prefix = typeof o.prefix === \"undefined\" && \"assert\" || o.prefix;\n                        var includeFail = typeof o.includeFail === \"undefined\" || !!o.includeFail;\n\n                        for (var method in meteorBabelHelpers.sanitizeForInObject(this)) {\n                            if (method !== \"expose\" && (includeFail || !/^(fail)/.test(method))) {\n                                target[exposedName(prefix, method)] = this[method];\n                            }\n                        }\n\n                        return target;\n                    }\n\n                    return expose;\n                }(),\n                match: function () {\n                    function match(actual, expectation) {\n                        var matcher = sinon.match(expectation);\n\n                        if (matcher.test(actual)) {\n                            assert.pass(\"match\");\n                        } else {\n                            var formatted = [\"expected value to match\", \"    expected = \" + sinon.format(expectation), \"    actual = \" + sinon.format(actual)];\n                            failAssertion(this, formatted.join(\"\\n\"));\n                        }\n                    }\n\n                    return match;\n                }()\n            };\n            mirrorPropAsAssertion(\"called\", \"expected %n to have been called at least once but was never called\");\n            mirrorPropAsAssertion(\"notCalled\", function (spy) {\n                return !spy.called;\n            }, \"expected %n to not have been called but was called %c%C\");\n            mirrorPropAsAssertion(\"calledOnce\", \"expected %n to be called once but was called %c%C\");\n            mirrorPropAsAssertion(\"calledTwice\", \"expected %n to be called twice but was called %c%C\");\n            mirrorPropAsAssertion(\"calledThrice\", \"expected %n to be called thrice but was called %c%C\");\n            mirrorPropAsAssertion(\"calledOn\", \"expected %n to be called with %1 as this but was called with %t\");\n            mirrorPropAsAssertion(\"alwaysCalledOn\", \"expected %n to always be called with %1 as this but was called with %t\");\n            mirrorPropAsAssertion(\"calledWithNew\", \"expected %n to be called with new\");\n            mirrorPropAsAssertion(\"alwaysCalledWithNew\", \"expected %n to always be called with new\");\n            mirrorPropAsAssertion(\"calledWith\", \"expected %n to be called with arguments %*%C\");\n            mirrorPropAsAssertion(\"calledWithMatch\", \"expected %n to be called with match %*%C\");\n            mirrorPropAsAssertion(\"alwaysCalledWith\", \"expected %n to always be called with arguments %*%C\");\n            mirrorPropAsAssertion(\"alwaysCalledWithMatch\", \"expected %n to always be called with match %*%C\");\n            mirrorPropAsAssertion(\"calledWithExactly\", \"expected %n to be called with exact arguments %*%C\");\n            mirrorPropAsAssertion(\"alwaysCalledWithExactly\", \"expected %n to always be called with exact arguments %*%C\");\n            mirrorPropAsAssertion(\"neverCalledWith\", \"expected %n to never be called with arguments %*%C\");\n            mirrorPropAsAssertion(\"neverCalledWithMatch\", \"expected %n to never be called with match %*%C\");\n            mirrorPropAsAssertion(\"threw\", \"%n did not throw exception%C\");\n            mirrorPropAsAssertion(\"alwaysThrew\", \"%n did not always throw exception%C\");\n            sinon.assert = assert;\n            return assert;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var isAMD = typeof define === \"function\" && (0, _typeof3.default)(define.amd) === \"object\" && define.amd;\n\n        function loadDependencies(require, exports, module) {\n            var sinon = require(\"./util/core\");\n\n            require(\"./match\");\n\n            require(\"./format\");\n\n            module.exports = makeApi(sinon);\n        }\n\n        if (isAMD) {\n            define(loadDependencies);\n            return;\n        }\n\n        if (isNode) {\n            loadDependencies(require, module.exports, module);\n            return;\n        }\n\n        if (sinonGlobal) {\n            makeApi(sinonGlobal);\n        }\n    })((typeof sinon === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(sinon)) === \"object\" && sinon, // eslint-disable-line no-undef\n    typeof global !== \"undefined\" ? global : self);\n\n    return sinon;\n});","map":{"version":3,"sources":["packages/zurb:foundation-sites/test/javascript/lib/sinon.js"],"names":["root","factory","define","amd","sinon","exports","module","samsam","formatio","lolex","mod","deps","fn","length","m","o","Object","prototype","div","document","createElement","isNaN","value","val","getClass","toString","call","split","isArguments","object","callee","e","isElement","nodeType","appendChild","removeChild","keys","ks","prop","hasOwnProperty","push","isDate","getTime","valueOf","isNegZero","Infinity","identical","obj1","obj2","deepEqualCyclic","objects1","objects2","paths1","paths2","compared","isObject","Boolean","Date","Number","RegExp","String","getIndex","objects","obj","i","deepEqual","path1","path2","type1","type2","isDate1","isDate2","class1","class2","keys1","keys2","key","l","value1","value2","isObject1","isObject2","index1","index2","newPath1","newPath2","JSON","stringify","match","arrayContains","array","subset","j","k","matcher","test","toLowerCase","notNull","indexOf","getAttribute","Error","require","excludeConstructors","quoteStrings","limitChildrenCount","hasOwn","specialObjects","global","window","functionName","func","displayName","name","matches","constructorName","f","constructor","excludes","isCircular","ascii","processed","indent","qs","quote","element","pieces","Math","min","join","properties","sort","str","cons","prefix","is","tagName","attrs","attributes","attr","pairs","attrName","item","nodeName","replace","nodeValue","formatted","content","innerHTML","substr","res","Formatio","options","opt","configure","self","t","n","r","s","u","a","code","glbl","setTimeout","clearTimeout","setInterval","clearInterval","setImmediate","clearImmediate","NOOP","undefined","timeoutResult","addTimerReturnsObject","NativeDate","uniqueTimerId","parseTime","strings","ms","parsed","parseInt","pow","getEpoch","epoch","TypeError","inRange","from","to","timer","callAt","mirrorDateProperties","target","source","now","clock","toSource","parse","UTC","toUTCString","createDate","ClockDate","year","month","date","hour","minute","second","arguments","addTimer","timers","id","createdAt","delay","duringTick","ref","unref","compareTimers","b","immediate","firstTimerInRange","isInRange","firstTimer","callTimer","exception","interval","apply","args","eval","timerType","clearTimer","timerId","ttype","uninstall","method","methods","hadOwnProperty","ignore","hijackMethod","createClock","timeouts","timeout","Array","slice","tick","tickFrom","tickTo","previous","oldNow","firstException","next","reset","setSystemTime","newNow","difference","install","toFake","sinonModule","isNode","isAMD","loadDependencies","sinonGlobal","isDOMNode","success","parentNode","isFunction","isReallyNaN","mirrorProperties","isRestorable","restore","hasES5Support","makeApi","wrapMethod","property","checkWrappedMethod","wrappedMethod","error","calledBefore","verb","returns","stackTrace","stack","owned","methodDesc","wrappedMethodDesc","getPropertyDescriptor","types","objectKeys","defineProperty","create","proto","F","isMatcher","ignoreCase","multiline","aString","aLength","bLength","functionToString","getCall","callCount","thisValue","descriptor","getOwnPropertyDescriptor","getPrototypeOf","getConfig","custom","config","defaults","defaultConfig","injectIntoThis","injectInto","useFakeTimers","useFakeServer","timesInWords","count","calledInOrder","spies","called","orderByFirstCall","aCall","bCall","aId","callId","bId","createStubInstance","stub","hasDontEnumBug","toLocaleString","isPrototypeOf","propertyIsEnumerable","unique","result","extend","sources","core","typeOf","string","substring","assertType","type","actual","message","matchObject","expectation","exp","act","or","m2","m1","and","any","defined","truthy","falsy","same","instanceOf","createPropertyMatcher","propertyTest","messagePrefix","onlyProperty","has","bool","number","regexp","valueFormatter","getFormatioFormatter","formatter","format","getNodeFormatter","util","v","isObjectWithNativeToString","inspect","throwYieldError","proxy","text","msg","callProto","calledOn","calledWith","calledWithMatch","calledWithExactly","notCalledWith","notCalledWithMatch","returned","returnValue","threw","calledWithNew","other","calledAfter","callArg","pos","callArgOn","callArgWith","callArgOnWith","concat","yieldOn","yieldTo","yieldToOn","getStackFrames","callStr","invokeCallback","yield","createSpyCall","spy","proxyCall","spyCall","matchingFake","fakes","strict","incrementCallCount","notCalled","calledOnce","calledTwice","calledThrice","createCallProperties","firstCall","secondCall","thirdCall","lastCall","vars","createProxy","proxyLength","p","invoke","isSinonProxy","uuid","spyApi","invoking","err","returnValues","thisValues","exceptions","callIds","stacks","spyLength","instantiateFake","matching","thisCall","named","getCalls","calls","spyFn","withArgs","original","fake","matchingAguments","parent","margs","printf","spyInstance","specifyer","formatters","delegateToCalls","matchAny","currentCall","c","C","stringifiedCall","useLeftMostCallback","useRightMostCallback","nextTick","process","callback","throwsException","getCallback","behavior","callArgAt","argumentList","reverse","callArgProp","getCallbackError","callCallback","callbackAsync","callbackContext","callbackArguments","isPresent","returnArgAt","returnThis","returnValueDefined","context","onCall","index","onFirstCall","onSecondCall","onThirdCall","callsArg","callsArgOn","callsArgWith","callsArgOnWith","yields","yieldsRight","yieldsOn","yieldsTo","yieldsToOn","throws","returnsArg","returnsThis","createAsyncVersion","syncFnName","walkInternal","iterator","originalObj","seen","getOwnPropertyNames","forEach","get","walk","wrapper","stubLength","propOwner","getParentBehaviour","stubInstance","getCurrentBehavior","getDefaultBehavior","defaultBehavior","behaviors","functionStub","orig","resetBehavior","createBehavior","behaviorMethod","mock","each","collection","arrayEquals","arr1","arr2","compareLength","mockObject","expects","expectations","proxies","invokeMethod","verify","messages","met","fail","pass","expectationsWithMatchingArgs","currentArgs","available","expectedArgs","expectedArguments","expectsExactArgCount","allowsCall","exhausted","unshift","times","callCountInWords","expectedCallCountInWords","minCalls","max","maxCalls","receivedMinCalls","hasMinLimit","receivedMaxCalls","verifyMatcher","possibleMatcher","arg","methodName","verifyCallAllowed","atLeast","num","limitsSet","atMost","never","exactly","once","twice","thrice","failed","expectedThis","withExactArgs","on","assert","getFakes","fakeCollection","compact","splice","resolve","verifyAndRestore","add","stubbedObj","inject","col","lol","llx","shift","epxorts","Event","bubbles","cancelable","initEvent","stopPropagation","preventDefault","defaultPrevented","ProgressEvent","progressEventRaw","loaded","total","lengthComputable","CustomEvent","customData","detail","EventTarget","addEventListener","event","listener","eventListeners","removeEventListener","listeners","dispatchEvent","handleEvent","realSetTimeout","log","logError","label","throwLoggedError","useImmediateExceptions","getGlobal","xdr","XDomainRequest","GlobalXDomainRequest","supportsXDR","workingXDR","FakeXDomainRequest","readyState","UNSENT","requestBody","requestHeaders","status","onCreate","verifyState","x","OPENED","sendFlag","verifyRequestSent","DONE","verifyResponseBodyType","body","open","url","responseText","readyStateChange","state","eventName","LOADING","isTimeout","errorFlag","send","data","onSend","abort","aborted","setResponseBody","chunkSize","respond","contentType","simulatetimeout","useFakeXDomainRequest","keepOnCreate","getWorkingXHR","globalScope","supportsXHR","XMLHttpRequest","supportsActiveX","ActiveXObject","supportsProgress","supportsCustomEvent","supportsFormData","FormData","supportsArrayBuffer","ArrayBuffer","supportsBlob","Blob","sinonXhr","GlobalXMLHttpRequest","GlobalActiveXObject","workingXHR","supportsCORS","unsafeHeaders","Connection","Cookie","Cookie2","Expect","Host","Referer","TE","Trailer","Upgrade","Via","UploadProgress","progress","load","FakeXMLHttpRequest","statusText","upload","responseType","response","withCredentials","xhr","events","getHeader","headers","header","h","some","filters","addFilter","IE6Re","defake","fakeXhr","xhrArgs","copyAttrs","navigator","userAgent","stateChange","HEADERS_RECEIVED","onreadystatechange","handler","useFilters","verifyRequestOpened","verifyHeadersReceived","async","convertToArrayBuffer","buffer","view","Uint8Array","charCode","charCodeAt","isXmlContentType","convertResponseBody","blobOptions","parseXML","clearResponse","responseXML","DOMParser","parser","parseFromString","xmlDoc","loadXML","statusCodes","username","password","filter","readyStateChangeEvent","setRequestHeader","setResponseHeaders","responseHeaders","onerror","getResponseHeader","getAllResponseHeaders","isTextResponse","uploadProgress","downloadProgress","uploadError","useFakeXMLHttpRequest","objId","responseArray","wloc","location","rCurrLoc","protocol","host","matchOne","reqMethod","reqUrl","rmeth","matchMethod","matchUrl","request","requestUrl","getHTTPMethod","ru","exec","fakeServer","server","requests","xhrObj","addRequest","whitelist","setting","handleRequest","respondImmediately","autoRespond","responding","autoRespondAfter","fakeHTTPMethods","queue","processRequest","respondWith","responses","Server","fakeServerWithClock","resetClock","longestTimeout","clockSetTimeout","clockSetInterval","returnVal","exposeValue","sandbox","injectedKeys","prepareSandboxFromConfig","serverPrototype","restoreContext","exposed","sinonSandboxedTest","oldDone","sinonDone","sinonAsyncSandboxedTest","done","createTest","setUp","tearDown","testCase","tests","rPrefix","testName","verifyIsStub","failAssertion","failMethod","mirrorPropAsAssertion","exposedName","toUpperCase","failException","callOrder","assertCallOrder","expected","assertCallCount","expose","includeFail"],"mappings":"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","file":"packages/zurb:foundation-sites/test/javascript/lib/sinon.js.map","sourcesContent":["/**\n * Sinon.JS 1.17.3, 2016/01/27\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Contributors: https://github.com/cjohansen/Sinon.JS/blob/master/AUTHORS\n *\n * (The BSD License)\n *\n * Copyright (c) 2010-2014, Christian Johansen, christian@cjohansen.no\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification,\n * are permitted provided that the following conditions are met:\n *\n *     * Redistributions of source code must retain the above copyright notice,\n *       this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright notice,\n *       this list of conditions and the following disclaimer in the documentation\n *       and/or other materials provided with the distribution.\n *     * Neither the name of Christian Johansen nor the names of his contributors\n *       may be used to endorse or promote products derived from this software\n *       without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n(function (root, factory) {\n  'use strict';\n  if (typeof define === 'function' && define.amd) {\n    define('sinon', [], function () {\n      return (root.sinon = factory());\n    });\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.sinon = factory();\n  }\n}(this, function () {\n  'use strict';\n  var samsam, formatio, lolex;\n  (function () {\n                function define(mod, deps, fn) {\n                  if (mod == \"samsam\") {\n                    samsam = deps();\n                  } else if (typeof deps === \"function\" && mod.length === 0) {\n                    lolex = deps();\n                  } else if (typeof fn === \"function\") {\n                    formatio = fn(samsam);\n                  }\n                }\n    define.amd = {};\n((typeof define === \"function\" && define.amd && function (m) { define(\"samsam\", m); }) ||\n (typeof module === \"object\" &&\n      function (m) { module.exports = m(); }) || // Node\n function (m) { this.samsam = m(); } // Browser globals\n)(function () {\n    var o = Object.prototype;\n    var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n\n    function isNaN(value) {\n        // Unlike global isNaN, this avoids type coercion\n        // typeof check avoids IE host object issues, hat tip to\n        // lodash\n        var val = value; // JsLint thinks value !== value is \"weird\"\n        return typeof value === \"number\" && value !== val;\n    }\n\n    function getClass(value) {\n        // Returns the internal [[Class]] by calling Object.prototype.toString\n        // with the provided value as this. Return value is a string, naming the\n        // internal class, e.g. \"Array\"\n        return o.toString.call(value).split(/[ \\]]/)[1];\n    }\n\n    /**\n     * @name samsam.isArguments\n     * @param Object object\n     *\n     * Returns ``true`` if ``object`` is an ``arguments`` object,\n     * ``false`` otherwise.\n     */\n    function isArguments(object) {\n        if (getClass(object) === 'Arguments') { return true; }\n        if (typeof object !== \"object\" || typeof object.length !== \"number\" ||\n                getClass(object) === \"Array\") {\n            return false;\n        }\n        if (typeof object.callee == \"function\") { return true; }\n        try {\n            object[object.length] = 6;\n            delete object[object.length];\n        } catch (e) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * @name samsam.isElement\n     * @param Object object\n     *\n     * Returns ``true`` if ``object`` is a DOM element node. Unlike\n     * Underscore.js/lodash, this function will return ``false`` if ``object``\n     * is an *element-like* object, i.e. a regular object with a ``nodeType``\n     * property that holds the value ``1``.\n     */\n    function isElement(object) {\n        if (!object || object.nodeType !== 1 || !div) { return false; }\n        try {\n            object.appendChild(div);\n            object.removeChild(div);\n        } catch (e) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * @name samsam.keys\n     * @param Object object\n     *\n     * Return an array of own property names.\n     */\n    function keys(object) {\n        var ks = [], prop;\n        for (prop in object) {\n            if (o.hasOwnProperty.call(object, prop)) { ks.push(prop); }\n        }\n        return ks;\n    }\n\n    /**\n     * @name samsam.isDate\n     * @param Object value\n     *\n     * Returns true if the object is a ``Date``, or *date-like*. Duck typing\n     * of date objects work by checking that the object has a ``getTime``\n     * function whose return value equals the return value from the object's\n     * ``valueOf``.\n     */\n    function isDate(value) {\n        return typeof value.getTime == \"function\" &&\n            value.getTime() == value.valueOf();\n    }\n\n    /**\n     * @name samsam.isNegZero\n     * @param Object value\n     *\n     * Returns ``true`` if ``value`` is ``-0``.\n     */\n    function isNegZero(value) {\n        return value === 0 && 1 / value === -Infinity;\n    }\n\n    /**\n     * @name samsam.equal\n     * @param Object obj1\n     * @param Object obj2\n     *\n     * Returns ``true`` if two objects are strictly equal. Compared to\n     * ``===`` there are two exceptions:\n     *\n     *   - NaN is considered equal to NaN\n     *   - -0 and +0 are not considered equal\n     */\n    function identical(obj1, obj2) {\n        if (obj1 === obj2 || (isNaN(obj1) && isNaN(obj2))) {\n            return obj1 !== 0 || isNegZero(obj1) === isNegZero(obj2);\n        }\n    }\n\n\n    /**\n     * @name samsam.deepEqual\n     * @param Object obj1\n     * @param Object obj2\n     *\n     * Deep equal comparison. Two values are \"deep equal\" if:\n     *\n     *   - They are equal, according to samsam.identical\n     *   - They are both date objects representing the same time\n     *   - They are both arrays containing elements that are all deepEqual\n     *   - They are objects with the same set of properties, and each property\n     *     in ``obj1`` is deepEqual to the corresponding property in ``obj2``\n     *\n     * Supports cyclic objects.\n     */\n    function deepEqualCyclic(obj1, obj2) {\n\n        // used for cyclic comparison\n        // contain already visited objects\n        var objects1 = [],\n            objects2 = [],\n        // contain pathes (position in the object structure)\n        // of the already visited objects\n        // indexes same as in objects arrays\n            paths1 = [],\n            paths2 = [],\n        // contains combinations of already compared objects\n        // in the manner: { \"$1['ref']$2['ref']\": true }\n            compared = {};\n\n        /**\n         * used to check, if the value of a property is an object\n         * (cyclic logic is only needed for objects)\n         * only needed for cyclic logic\n         */\n        function isObject(value) {\n\n            if (typeof value === 'object' && value !== null &&\n                    !(value instanceof Boolean) &&\n                    !(value instanceof Date)    &&\n                    !(value instanceof Number)  &&\n                    !(value instanceof RegExp)  &&\n                    !(value instanceof String)) {\n\n                return true;\n            }\n\n            return false;\n        }\n\n        /**\n         * returns the index of the given object in the\n         * given objects array, -1 if not contained\n         * only needed for cyclic logic\n         */\n        function getIndex(objects, obj) {\n\n            var i;\n            for (i = 0; i < objects.length; i++) {\n                if (objects[i] === obj) {\n                    return i;\n                }\n            }\n\n            return -1;\n        }\n\n        // does the recursion for the deep equal check\n        return (function deepEqual(obj1, obj2, path1, path2) {\n            var type1 = typeof obj1;\n            var type2 = typeof obj2;\n\n            // == null also matches undefined\n            if (obj1 === obj2 ||\n                    isNaN(obj1) || isNaN(obj2) ||\n                    obj1 == null || obj2 == null ||\n                    type1 !== \"object\" || type2 !== \"object\") {\n\n                return identical(obj1, obj2);\n            }\n\n            // Elements are only equal if identical(expected, actual)\n            if (isElement(obj1) || isElement(obj2)) { return false; }\n\n            var isDate1 = isDate(obj1), isDate2 = isDate(obj2);\n            if (isDate1 || isDate2) {\n                if (!isDate1 || !isDate2 || obj1.getTime() !== obj2.getTime()) {\n                    return false;\n                }\n            }\n\n            if (obj1 instanceof RegExp && obj2 instanceof RegExp) {\n                if (obj1.toString() !== obj2.toString()) { return false; }\n            }\n\n            var class1 = getClass(obj1);\n            var class2 = getClass(obj2);\n            var keys1 = keys(obj1);\n            var keys2 = keys(obj2);\n\n            if (isArguments(obj1) || isArguments(obj2)) {\n                if (obj1.length !== obj2.length) { return false; }\n            } else {\n                if (type1 !== type2 || class1 !== class2 ||\n                        keys1.length !== keys2.length) {\n                    return false;\n                }\n            }\n\n            var key, i, l,\n                // following vars are used for the cyclic logic\n                value1, value2,\n                isObject1, isObject2,\n                index1, index2,\n                newPath1, newPath2;\n\n            for (i = 0, l = keys1.length; i < l; i++) {\n                key = keys1[i];\n                if (!o.hasOwnProperty.call(obj2, key)) {\n                    return false;\n                }\n\n                // Start of the cyclic logic\n\n                value1 = obj1[key];\n                value2 = obj2[key];\n\n                isObject1 = isObject(value1);\n                isObject2 = isObject(value2);\n\n                // determine, if the objects were already visited\n                // (it's faster to check for isObject first, than to\n                // get -1 from getIndex for non objects)\n                index1 = isObject1 ? getIndex(objects1, value1) : -1;\n                index2 = isObject2 ? getIndex(objects2, value2) : -1;\n\n                // determine the new pathes of the objects\n                // - for non cyclic objects the current path will be extended\n                //   by current property name\n                // - for cyclic objects the stored path is taken\n                newPath1 = index1 !== -1\n                    ? paths1[index1]\n                    : path1 + '[' + JSON.stringify(key) + ']';\n                newPath2 = index2 !== -1\n                    ? paths2[index2]\n                    : path2 + '[' + JSON.stringify(key) + ']';\n\n                // stop recursion if current objects are already compared\n                if (compared[newPath1 + newPath2]) {\n                    return true;\n                }\n\n                // remember the current objects and their pathes\n                if (index1 === -1 && isObject1) {\n                    objects1.push(value1);\n                    paths1.push(newPath1);\n                }\n                if (index2 === -1 && isObject2) {\n                    objects2.push(value2);\n                    paths2.push(newPath2);\n                }\n\n                // remember that the current objects are already compared\n                if (isObject1 && isObject2) {\n                    compared[newPath1 + newPath2] = true;\n                }\n\n                // End of cyclic logic\n\n                // neither value1 nor value2 is a cycle\n                // continue with next level\n                if (!deepEqual(value1, value2, newPath1, newPath2)) {\n                    return false;\n                }\n            }\n\n            return true;\n\n        }(obj1, obj2, '$1', '$2'));\n    }\n\n    var match;\n\n    function arrayContains(array, subset) {\n        if (subset.length === 0) { return true; }\n        var i, l, j, k;\n        for (i = 0, l = array.length; i < l; ++i) {\n            if (match(array[i], subset[0])) {\n                for (j = 0, k = subset.length; j < k; ++j) {\n                    if (!match(array[i + j], subset[j])) { return false; }\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * @name samsam.match\n     * @param Object object\n     * @param Object matcher\n     *\n     * Compare arbitrary value ``object`` with matcher.\n     */\n    match = function match(object, matcher) {\n        if (matcher && typeof matcher.test === \"function\") {\n            return matcher.test(object);\n        }\n\n        if (typeof matcher === \"function\") {\n            return matcher(object) === true;\n        }\n\n        if (typeof matcher === \"string\") {\n            matcher = matcher.toLowerCase();\n            var notNull = typeof object === \"string\" || !!object;\n            return notNull &&\n                (String(object)).toLowerCase().indexOf(matcher) >= 0;\n        }\n\n        if (typeof matcher === \"number\") {\n            return matcher === object;\n        }\n\n        if (typeof matcher === \"boolean\") {\n            return matcher === object;\n        }\n\n        if (typeof(matcher) === \"undefined\") {\n            return typeof(object) === \"undefined\";\n        }\n\n        if (matcher === null) {\n            return object === null;\n        }\n\n        if (getClass(object) === \"Array\" && getClass(matcher) === \"Array\") {\n            return arrayContains(object, matcher);\n        }\n\n        if (matcher && typeof matcher === \"object\") {\n            if (matcher === object) {\n                return true;\n            }\n            var prop;\n            for (prop in matcher) {\n                var value = object[prop];\n                if (typeof value === \"undefined\" &&\n                        typeof object.getAttribute === \"function\") {\n                    value = object.getAttribute(prop);\n                }\n                if (matcher[prop] === null || typeof matcher[prop] === 'undefined') {\n                    if (value !== matcher[prop]) {\n                        return false;\n                    }\n                } else if (typeof  value === \"undefined\" || !match(value, matcher[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        throw new Error(\"Matcher was not a string, a number, a \" +\n                        \"function, a boolean or an object\");\n    };\n\n    return {\n        isArguments: isArguments,\n        isElement: isElement,\n        isDate: isDate,\n        isNegZero: isNegZero,\n        identical: identical,\n        deepEqual: deepEqualCyclic,\n        match: match,\n        keys: keys\n    };\n});\n((typeof define === \"function\" && define.amd && function (m) {\n    define(\"formatio\", [\"samsam\"], m);\n}) || (typeof module === \"object\" && function (m) {\n    module.exports = m(require(\"samsam\"));\n}) || function (m) { this.formatio = m(this.samsam); }\n)(function (samsam) {\n\n    var formatio = {\n        excludeConstructors: [\"Object\", /^.$/],\n        quoteStrings: true,\n        limitChildrenCount: 0\n    };\n\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    var specialObjects = [];\n    if (typeof global !== \"undefined\") {\n        specialObjects.push({ object: global, value: \"[object global]\" });\n    }\n    if (typeof document !== \"undefined\") {\n        specialObjects.push({\n            object: document,\n            value: \"[object HTMLDocument]\"\n        });\n    }\n    if (typeof window !== \"undefined\") {\n        specialObjects.push({ object: window, value: \"[object Window]\" });\n    }\n\n    function functionName(func) {\n        if (!func) { return \"\"; }\n        if (func.displayName) { return func.displayName; }\n        if (func.name) { return func.name; }\n        var matches = func.toString().match(/function\\s+([^\\(]+)/m);\n        return (matches && matches[1]) || \"\";\n    }\n\n    function constructorName(f, object) {\n        var name = functionName(object && object.constructor);\n        var excludes = f.excludeConstructors ||\n                formatio.excludeConstructors || [];\n\n        var i, l;\n        for (i = 0, l = excludes.length; i < l; ++i) {\n            if (typeof excludes[i] === \"string\" && excludes[i] === name) {\n                return \"\";\n            } else if (excludes[i].test && excludes[i].test(name)) {\n                return \"\";\n            }\n        }\n\n        return name;\n    }\n\n    function isCircular(object, objects) {\n        if (typeof object !== \"object\") { return false; }\n        var i, l;\n        for (i = 0, l = objects.length; i < l; ++i) {\n            if (objects[i] === object) { return true; }\n        }\n        return false;\n    }\n\n    function ascii(f, object, processed, indent) {\n        if (typeof object === \"string\") {\n            var qs = f.quoteStrings;\n            var quote = typeof qs !== \"boolean\" || qs;\n            return processed || quote ? '\"' + object + '\"' : object;\n        }\n\n        if (typeof object === \"function\" && !(object instanceof RegExp)) {\n            return ascii.func(object);\n        }\n\n        processed = processed || [];\n\n        if (isCircular(object, processed)) { return \"[Circular]\"; }\n\n        if (Object.prototype.toString.call(object) === \"[object Array]\") {\n            return ascii.array.call(f, object, processed);\n        }\n\n        if (!object) { return String((1/object) === -Infinity ? \"-0\" : object); }\n        if (samsam.isElement(object)) { return ascii.element(object); }\n\n        if (typeof object.toString === \"function\" &&\n                object.toString !== Object.prototype.toString) {\n            return object.toString();\n        }\n\n        var i, l;\n        for (i = 0, l = specialObjects.length; i < l; i++) {\n            if (object === specialObjects[i].object) {\n                return specialObjects[i].value;\n            }\n        }\n\n        return ascii.object.call(f, object, processed, indent);\n    }\n\n    ascii.func = function (func) {\n        return \"function \" + functionName(func) + \"() {}\";\n    };\n\n    ascii.array = function (array, processed) {\n        processed = processed || [];\n        processed.push(array);\n        var pieces = [];\n        var i, l;\n        l = (this.limitChildrenCount > 0) ?\n            Math.min(this.limitChildrenCount, array.length) : array.length;\n\n        for (i = 0; i < l; ++i) {\n            pieces.push(ascii(this, array[i], processed));\n        }\n\n        if(l < array.length)\n            pieces.push(\"[... \" + (array.length - l) + \" more elements]\");\n\n        return \"[\" + pieces.join(\", \") + \"]\";\n    };\n\n    ascii.object = function (object, processed, indent) {\n        processed = processed || [];\n        processed.push(object);\n        indent = indent || 0;\n        var pieces = [], properties = samsam.keys(object).sort();\n        var length = 3;\n        var prop, str, obj, i, k, l;\n        l = (this.limitChildrenCount > 0) ?\n            Math.min(this.limitChildrenCount, properties.length) : properties.length;\n\n        for (i = 0; i < l; ++i) {\n            prop = properties[i];\n            obj = object[prop];\n\n            if (isCircular(obj, processed)) {\n                str = \"[Circular]\";\n            } else {\n                str = ascii(this, obj, processed, indent + 2);\n            }\n\n            str = (/\\s/.test(prop) ? '\"' + prop + '\"' : prop) + \": \" + str;\n            length += str.length;\n            pieces.push(str);\n        }\n\n        var cons = constructorName(this, object);\n        var prefix = cons ? \"[\" + cons + \"] \" : \"\";\n        var is = \"\";\n        for (i = 0, k = indent; i < k; ++i) { is += \" \"; }\n\n        if(l < properties.length)\n            pieces.push(\"[... \" + (properties.length - l) + \" more elements]\");\n\n        if (length + indent > 80) {\n            return prefix + \"{\\n  \" + is + pieces.join(\",\\n  \" + is) + \"\\n\" +\n                is + \"}\";\n        }\n        return prefix + \"{ \" + pieces.join(\", \") + \" }\";\n    };\n\n    ascii.element = function (element) {\n        var tagName = element.tagName.toLowerCase();\n        var attrs = element.attributes, attr, pairs = [], attrName, i, l, val;\n\n        for (i = 0, l = attrs.length; i < l; ++i) {\n            attr = attrs.item(i);\n            attrName = attr.nodeName.toLowerCase().replace(\"html:\", \"\");\n            val = attr.nodeValue;\n            if (attrName !== \"contenteditable\" || val !== \"inherit\") {\n                if (!!val) { pairs.push(attrName + \"=\\\"\" + val + \"\\\"\"); }\n            }\n        }\n\n        var formatted = \"<\" + tagName + (pairs.length > 0 ? \" \" : \"\");\n        var content = element.innerHTML;\n\n        if (content.length > 20) {\n            content = content.substr(0, 20) + \"[...]\";\n        }\n\n        var res = formatted + pairs.join(\" \") + \">\" + content +\n                \"</\" + tagName + \">\";\n\n        return res.replace(/ contentEditable=\"inherit\"/, \"\");\n    };\n\n    function Formatio(options) {\n        for (var opt in options) {\n            this[opt] = options[opt];\n        }\n    }\n\n    Formatio.prototype = {\n        functionName: functionName,\n\n        configure: function (options) {\n            return new Formatio(options);\n        },\n\n        constructorName: function (object) {\n            return constructorName(this, object);\n        },\n\n        ascii: function (object, processed, indent) {\n            return ascii(this, object, processed, indent);\n        }\n    };\n\n    return Formatio.prototype;\n});\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.lolex=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n/*global global, window*/\n/**\n * @author Christian Johansen (christian@cjohansen.no) and contributors\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n\n(function (global) {\n\n    // Make properties writable in IE, as per\n    // http://www.adequatelygood.com/Replacing-setTimeout-Globally.html\n    // JSLint being anal\n    var glbl = global;\n\n    global.setTimeout = glbl.setTimeout;\n    global.clearTimeout = glbl.clearTimeout;\n    global.setInterval = glbl.setInterval;\n    global.clearInterval = glbl.clearInterval;\n    global.Date = glbl.Date;\n\n    // setImmediate is not a standard function\n    // avoid adding the prop to the window object if not present\n    if('setImmediate' in global) {\n        global.setImmediate = glbl.setImmediate;\n        global.clearImmediate = glbl.clearImmediate;\n    }\n\n    // node expects setTimeout/setInterval to return a fn object w/ .ref()/.unref()\n    // browsers, a number.\n    // see https://github.com/cjohansen/Sinon.JS/pull/436\n\n    var NOOP = function () { return undefined; };\n    var timeoutResult = setTimeout(NOOP, 0);\n    var addTimerReturnsObject = typeof timeoutResult === \"object\";\n    clearTimeout(timeoutResult);\n\n    var NativeDate = Date;\n    var uniqueTimerId = 1;\n\n    /**\n     * Parse strings like \"01:10:00\" (meaning 1 hour, 10 minutes, 0 seconds) into\n     * number of milliseconds. This is used to support human-readable strings passed\n     * to clock.tick()\n     */\n    function parseTime(str) {\n        if (!str) {\n            return 0;\n        }\n\n        var strings = str.split(\":\");\n        var l = strings.length, i = l;\n        var ms = 0, parsed;\n\n        if (l > 3 || !/^(\\d\\d:){0,2}\\d\\d?$/.test(str)) {\n            throw new Error(\"tick only understands numbers, 'm:s' and 'h:m:s'. Each part must be two digits\");\n        }\n\n        while (i--) {\n            parsed = parseInt(strings[i], 10);\n\n            if (parsed >= 60) {\n                throw new Error(\"Invalid time \" + str);\n            }\n\n            ms += parsed * Math.pow(60, (l - i - 1));\n        }\n\n        return ms * 1000;\n    }\n\n    /**\n     * Used to grok the `now` parameter to createClock.\n     */\n    function getEpoch(epoch) {\n        if (!epoch) { return 0; }\n        if (typeof epoch.getTime === \"function\") { return epoch.getTime(); }\n        if (typeof epoch === \"number\") { return epoch; }\n        throw new TypeError(\"now should be milliseconds since UNIX epoch\");\n    }\n\n    function inRange(from, to, timer) {\n        return timer && timer.callAt >= from && timer.callAt <= to;\n    }\n\n    function mirrorDateProperties(target, source) {\n        var prop;\n        for (prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                target[prop] = source[prop];\n            }\n        }\n\n        // set special now implementation\n        if (source.now) {\n            target.now = function now() {\n                return target.clock.now;\n            };\n        } else {\n            delete target.now;\n        }\n\n        // set special toSource implementation\n        if (source.toSource) {\n            target.toSource = function toSource() {\n                return source.toSource();\n            };\n        } else {\n            delete target.toSource;\n        }\n\n        // set special toString implementation\n        target.toString = function toString() {\n            return source.toString();\n        };\n\n        target.prototype = source.prototype;\n        target.parse = source.parse;\n        target.UTC = source.UTC;\n        target.prototype.toUTCString = source.prototype.toUTCString;\n\n        return target;\n    }\n\n    function createDate() {\n        function ClockDate(year, month, date, hour, minute, second, ms) {\n            // Defensive and verbose to avoid potential harm in passing\n            // explicit undefined when user does not pass argument\n            switch (arguments.length) {\n            case 0:\n                return new NativeDate(ClockDate.clock.now);\n            case 1:\n                return new NativeDate(year);\n            case 2:\n                return new NativeDate(year, month);\n            case 3:\n                return new NativeDate(year, month, date);\n            case 4:\n                return new NativeDate(year, month, date, hour);\n            case 5:\n                return new NativeDate(year, month, date, hour, minute);\n            case 6:\n                return new NativeDate(year, month, date, hour, minute, second);\n            default:\n                return new NativeDate(year, month, date, hour, minute, second, ms);\n            }\n        }\n\n        return mirrorDateProperties(ClockDate, NativeDate);\n    }\n\n    function addTimer(clock, timer) {\n        if (timer.func === undefined) {\n            throw new Error(\"Callback must be provided to timer calls\");\n        }\n\n        if (!clock.timers) {\n            clock.timers = {};\n        }\n\n        timer.id = uniqueTimerId++;\n        timer.createdAt = clock.now;\n        timer.callAt = clock.now + (timer.delay || (clock.duringTick ? 1 : 0));\n\n        clock.timers[timer.id] = timer;\n\n        if (addTimerReturnsObject) {\n            return {\n                id: timer.id,\n                ref: NOOP,\n                unref: NOOP\n            };\n        }\n\n        return timer.id;\n    }\n\n\n    function compareTimers(a, b) {\n        // Sort first by absolute timing\n        if (a.callAt < b.callAt) {\n            return -1;\n        }\n        if (a.callAt > b.callAt) {\n            return 1;\n        }\n\n        // Sort next by immediate, immediate timers take precedence\n        if (a.immediate && !b.immediate) {\n            return -1;\n        }\n        if (!a.immediate && b.immediate) {\n            return 1;\n        }\n\n        // Sort next by creation time, earlier-created timers take precedence\n        if (a.createdAt < b.createdAt) {\n            return -1;\n        }\n        if (a.createdAt > b.createdAt) {\n            return 1;\n        }\n\n        // Sort next by id, lower-id timers take precedence\n        if (a.id < b.id) {\n            return -1;\n        }\n        if (a.id > b.id) {\n            return 1;\n        }\n\n        // As timer ids are unique, no fallback `0` is necessary\n    }\n\n    function firstTimerInRange(clock, from, to) {\n        var timers = clock.timers,\n            timer = null,\n            id,\n            isInRange;\n\n        for (id in timers) {\n            if (timers.hasOwnProperty(id)) {\n                isInRange = inRange(from, to, timers[id]);\n\n                if (isInRange && (!timer || compareTimers(timer, timers[id]) === 1)) {\n                    timer = timers[id];\n                }\n            }\n        }\n\n        return timer;\n    }\n\n    function firstTimer(clock) {\n        var timers = clock.timers,\n            timer = null,\n            id;\n\n        for (id in timers) {\n            if (timers.hasOwnProperty(id)) {\n                if (!timer || compareTimers(timer, timers[id]) === 1) {\n                    timer = timers[id];\n                }\n            }\n        }\n\n        return timer;\n    }\n\n    function callTimer(clock, timer) {\n        var exception;\n\n        if (typeof timer.interval === \"number\") {\n            clock.timers[timer.id].callAt += timer.interval;\n        } else {\n            delete clock.timers[timer.id];\n        }\n\n        try {\n            if (typeof timer.func === \"function\") {\n                timer.func.apply(null, timer.args);\n            } else {\n                eval(timer.func);\n            }\n        } catch (e) {\n            exception = e;\n        }\n\n        if (!clock.timers[timer.id]) {\n            if (exception) {\n                throw exception;\n            }\n            return;\n        }\n\n        if (exception) {\n            throw exception;\n        }\n    }\n\n    function timerType(timer) {\n        if (timer.immediate) {\n            return \"Immediate\";\n        } else if (typeof timer.interval !== \"undefined\") {\n            return \"Interval\";\n        } else {\n            return \"Timeout\";\n        }\n    }\n\n    function clearTimer(clock, timerId, ttype) {\n        if (!timerId) {\n            // null appears to be allowed in most browsers, and appears to be\n            // relied upon by some libraries, like Bootstrap carousel\n            return;\n        }\n\n        if (!clock.timers) {\n            clock.timers = [];\n        }\n\n        // in Node, timerId is an object with .ref()/.unref(), and\n        // its .id field is the actual timer id.\n        if (typeof timerId === \"object\") {\n            timerId = timerId.id;\n        }\n\n        if (clock.timers.hasOwnProperty(timerId)) {\n            // check that the ID matches a timer of the correct type\n            var timer = clock.timers[timerId];\n            if (timerType(timer) === ttype) {\n                delete clock.timers[timerId];\n            } else {\n\t\t\t\tthrow new Error(\"Cannot clear timer: timer created with set\" + ttype + \"() but cleared with clear\" + timerType(timer) + \"()\");\n\t\t\t}\n        }\n    }\n\n    function uninstall(clock, target) {\n        var method,\n            i,\n            l;\n\n        for (i = 0, l = clock.methods.length; i < l; i++) {\n            method = clock.methods[i];\n\n            if (target[method].hadOwnProperty) {\n                target[method] = clock[\"_\" + method];\n            } else {\n                try {\n                    delete target[method];\n                } catch (ignore) {}\n            }\n        }\n\n        // Prevent multiple executions which will completely remove these props\n        clock.methods = [];\n    }\n\n    function hijackMethod(target, method, clock) {\n        var prop;\n\n        clock[method].hadOwnProperty = Object.prototype.hasOwnProperty.call(target, method);\n        clock[\"_\" + method] = target[method];\n\n        if (method === \"Date\") {\n            var date = mirrorDateProperties(clock[method], target[method]);\n            target[method] = date;\n        } else {\n            target[method] = function () {\n                return clock[method].apply(clock, arguments);\n            };\n\n            for (prop in clock[method]) {\n                if (clock[method].hasOwnProperty(prop)) {\n                    target[method][prop] = clock[method][prop];\n                }\n            }\n        }\n\n        target[method].clock = clock;\n    }\n\n    var timers = {\n        setTimeout: setTimeout,\n        clearTimeout: clearTimeout,\n        setImmediate: global.setImmediate,\n        clearImmediate: global.clearImmediate,\n        setInterval: setInterval,\n        clearInterval: clearInterval,\n        Date: Date\n    };\n\n    var keys = Object.keys || function (obj) {\n        var ks = [],\n            key;\n\n        for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                ks.push(key);\n            }\n        }\n\n        return ks;\n    };\n\n    exports.timers = timers;\n\n    function createClock(now) {\n        var clock = {\n            now: getEpoch(now),\n            timeouts: {},\n            Date: createDate()\n        };\n\n        clock.Date.clock = clock;\n\n        clock.setTimeout = function setTimeout(func, timeout) {\n            return addTimer(clock, {\n                func: func,\n                args: Array.prototype.slice.call(arguments, 2),\n                delay: timeout\n            });\n        };\n\n        clock.clearTimeout = function clearTimeout(timerId) {\n            return clearTimer(clock, timerId, \"Timeout\");\n        };\n\n        clock.setInterval = function setInterval(func, timeout) {\n            return addTimer(clock, {\n                func: func,\n                args: Array.prototype.slice.call(arguments, 2),\n                delay: timeout,\n                interval: timeout\n            });\n        };\n\n        clock.clearInterval = function clearInterval(timerId) {\n            return clearTimer(clock, timerId, \"Interval\");\n        };\n\n        clock.setImmediate = function setImmediate(func) {\n            return addTimer(clock, {\n                func: func,\n                args: Array.prototype.slice.call(arguments, 1),\n                immediate: true\n            });\n        };\n\n        clock.clearImmediate = function clearImmediate(timerId) {\n            return clearTimer(clock, timerId, \"Immediate\");\n        };\n\n        clock.tick = function tick(ms) {\n            ms = typeof ms === \"number\" ? ms : parseTime(ms);\n            var tickFrom = clock.now, tickTo = clock.now + ms, previous = clock.now;\n            var timer = firstTimerInRange(clock, tickFrom, tickTo);\n            var oldNow;\n\n            clock.duringTick = true;\n\n            var firstException;\n            while (timer && tickFrom <= tickTo) {\n                if (clock.timers[timer.id]) {\n                    tickFrom = clock.now = timer.callAt;\n                    try {\n                        oldNow = clock.now;\n                        callTimer(clock, timer);\n                        // compensate for any setSystemTime() call during timer callback\n                        if (oldNow !== clock.now) {\n                            tickFrom += clock.now - oldNow;\n                            tickTo += clock.now - oldNow;\n                            previous += clock.now - oldNow;\n                        }\n                    } catch (e) {\n                        firstException = firstException || e;\n                    }\n                }\n\n                timer = firstTimerInRange(clock, previous, tickTo);\n                previous = tickFrom;\n            }\n\n            clock.duringTick = false;\n            clock.now = tickTo;\n\n            if (firstException) {\n                throw firstException;\n            }\n\n            return clock.now;\n        };\n\n        clock.next = function next() {\n            var timer = firstTimer(clock);\n            if (!timer) {\n                return clock.now;\n            }\n\n            clock.duringTick = true;\n            try {\n                clock.now = timer.callAt;\n                callTimer(clock, timer);\n                return clock.now;\n            } finally {\n                clock.duringTick = false;\n            }\n        };\n\n        clock.reset = function reset() {\n            clock.timers = {};\n        };\n\n        clock.setSystemTime = function setSystemTime(now) {\n            // determine time difference\n            var newNow = getEpoch(now);\n            var difference = newNow - clock.now;\n\n            // update 'system clock'\n            clock.now = newNow;\n\n            // update timers and intervals to keep them stable\n            for (var id in clock.timers) {\n                if (clock.timers.hasOwnProperty(id)) {\n                    var timer = clock.timers[id];\n                    timer.createdAt += difference;\n                    timer.callAt += difference;\n                }\n            }\n        };\n\n        return clock;\n    }\n    exports.createClock = createClock;\n\n    exports.install = function install(target, now, toFake) {\n        var i,\n            l;\n\n        if (typeof target === \"number\") {\n            toFake = now;\n            now = target;\n            target = null;\n        }\n\n        if (!target) {\n            target = global;\n        }\n\n        var clock = createClock(now);\n\n        clock.uninstall = function () {\n            uninstall(clock, target);\n        };\n\n        clock.methods = toFake || [];\n\n        if (clock.methods.length === 0) {\n            clock.methods = keys(timers);\n        }\n\n        for (i = 0, l = clock.methods.length; i < l; i++) {\n            hijackMethod(target, clock.methods[i], clock);\n        }\n\n        return clock;\n    };\n\n}(global || this));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[1])(1)\n});\n  })();\n  var define;\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\nvar sinon = (function () {\n\"use strict\";\n // eslint-disable-line no-unused-vars\n\n    var sinonModule;\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        sinonModule = module.exports = require(\"./sinon/util/core\");\n        require(\"./sinon/extend\");\n        require(\"./sinon/walk\");\n        require(\"./sinon/typeOf\");\n        require(\"./sinon/times_in_words\");\n        require(\"./sinon/spy\");\n        require(\"./sinon/call\");\n        require(\"./sinon/behavior\");\n        require(\"./sinon/stub\");\n        require(\"./sinon/mock\");\n        require(\"./sinon/collection\");\n        require(\"./sinon/assert\");\n        require(\"./sinon/sandbox\");\n        require(\"./sinon/test\");\n        require(\"./sinon/test_case\");\n        require(\"./sinon/match\");\n        require(\"./sinon/format\");\n        require(\"./sinon/log_error\");\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n        sinonModule = module.exports;\n    } else {\n        sinonModule = {};\n    }\n\n    return sinonModule;\n}());\n\n/**\n * @depend ../../sinon.js\n */\n/**\n * Sinon core utilities. For internal use only.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    var div = typeof document !== \"undefined\" && document.createElement(\"div\");\n    var hasOwn = Object.prototype.hasOwnProperty;\n\n    function isDOMNode(obj) {\n        var success = false;\n\n        try {\n            obj.appendChild(div);\n            success = div.parentNode === obj;\n        } catch (e) {\n            return false;\n        } finally {\n            try {\n                obj.removeChild(div);\n            } catch (e) {\n                // Remove failed, not much we can do about that\n            }\n        }\n\n        return success;\n    }\n\n    function isElement(obj) {\n        return div && obj && obj.nodeType === 1 && isDOMNode(obj);\n    }\n\n    function isFunction(obj) {\n        return typeof obj === \"function\" || !!(obj && obj.constructor && obj.call && obj.apply);\n    }\n\n    function isReallyNaN(val) {\n        return typeof val === \"number\" && isNaN(val);\n    }\n\n    function mirrorProperties(target, source) {\n        for (var prop in source) {\n            if (!hasOwn.call(target, prop)) {\n                target[prop] = source[prop];\n            }\n        }\n    }\n\n    function isRestorable(obj) {\n        return typeof obj === \"function\" && typeof obj.restore === \"function\" && obj.restore.sinon;\n    }\n\n    // Cheap way to detect if we have ES5 support.\n    var hasES5Support = \"keys\" in Object;\n\n    function makeApi(sinon) {\n        sinon.wrapMethod = function wrapMethod(object, property, method) {\n            if (!object) {\n                throw new TypeError(\"Should wrap property of object\");\n            }\n\n            if (typeof method !== \"function\" && typeof method !== \"object\") {\n                throw new TypeError(\"Method wrapper should be a function or a property descriptor\");\n            }\n\n            function checkWrappedMethod(wrappedMethod) {\n                var error;\n\n                if (!isFunction(wrappedMethod)) {\n                    error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                        property + \" as function\");\n                } else if (wrappedMethod.restore && wrappedMethod.restore.sinon) {\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                } else if (wrappedMethod.calledBefore) {\n                    var verb = wrappedMethod.returns ? \"stubbed\" : \"spied on\";\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already \" + verb);\n                }\n\n                if (error) {\n                    if (wrappedMethod && wrappedMethod.stackTrace) {\n                        error.stack += \"\\n--------------\\n\" + wrappedMethod.stackTrace;\n                    }\n                    throw error;\n                }\n            }\n\n            var error, wrappedMethod, i;\n\n            // IE 8 does not support hasOwnProperty on the window object and Firefox has a problem\n            // when using hasOwn.call on objects from other frames.\n            var owned = object.hasOwnProperty ? object.hasOwnProperty(property) : hasOwn.call(object, property);\n\n            if (hasES5Support) {\n                var methodDesc = (typeof method === \"function\") ? {value: method} : method;\n                var wrappedMethodDesc = sinon.getPropertyDescriptor(object, property);\n\n                if (!wrappedMethodDesc) {\n                    error = new TypeError(\"Attempted to wrap \" + (typeof wrappedMethod) + \" property \" +\n                                        property + \" as function\");\n                } else if (wrappedMethodDesc.restore && wrappedMethodDesc.restore.sinon) {\n                    error = new TypeError(\"Attempted to wrap \" + property + \" which is already wrapped\");\n                }\n                if (error) {\n                    if (wrappedMethodDesc && wrappedMethodDesc.stackTrace) {\n                        error.stack += \"\\n--------------\\n\" + wrappedMethodDesc.stackTrace;\n                    }\n                    throw error;\n                }\n\n                var types = sinon.objectKeys(methodDesc);\n                for (i = 0; i < types.length; i++) {\n                    wrappedMethod = wrappedMethodDesc[types[i]];\n                    checkWrappedMethod(wrappedMethod);\n                }\n\n                mirrorProperties(methodDesc, wrappedMethodDesc);\n                for (i = 0; i < types.length; i++) {\n                    mirrorProperties(methodDesc[types[i]], wrappedMethodDesc[types[i]]);\n                }\n                Object.defineProperty(object, property, methodDesc);\n            } else {\n                wrappedMethod = object[property];\n                checkWrappedMethod(wrappedMethod);\n                object[property] = method;\n                method.displayName = property;\n            }\n\n            method.displayName = property;\n\n            // Set up a stack trace which can be used later to find what line of\n            // code the original method was created on.\n            method.stackTrace = (new Error(\"Stack Trace for original\")).stack;\n\n            method.restore = function () {\n                // For prototype properties try to reset by delete first.\n                // If this fails (ex: localStorage on mobile safari) then force a reset\n                // via direct assignment.\n                if (!owned) {\n                    // In some cases `delete` may throw an error\n                    try {\n                        delete object[property];\n                    } catch (e) {} // eslint-disable-line no-empty\n                    // For native code functions `delete` fails without throwing an error\n                    // on Chrome < 43, PhantomJS, etc.\n                } else if (hasES5Support) {\n                    Object.defineProperty(object, property, wrappedMethodDesc);\n                }\n\n                // Use strict equality comparison to check failures then force a reset\n                // via direct assignment.\n                if (object[property] === method) {\n                    object[property] = wrappedMethod;\n                }\n            };\n\n            method.restore.sinon = true;\n\n            if (!hasES5Support) {\n                mirrorProperties(method, wrappedMethod);\n            }\n\n            return method;\n        };\n\n        sinon.create = function create(proto) {\n            var F = function () {};\n            F.prototype = proto;\n            return new F();\n        };\n\n        sinon.deepEqual = function deepEqual(a, b) {\n            if (sinon.match && sinon.match.isMatcher(a)) {\n                return a.test(b);\n            }\n\n            if (typeof a !== \"object\" || typeof b !== \"object\") {\n                return isReallyNaN(a) && isReallyNaN(b) || a === b;\n            }\n\n            if (isElement(a) || isElement(b)) {\n                return a === b;\n            }\n\n            if (a === b) {\n                return true;\n            }\n\n            if ((a === null && b !== null) || (a !== null && b === null)) {\n                return false;\n            }\n\n            if (a instanceof RegExp && b instanceof RegExp) {\n                return (a.source === b.source) && (a.global === b.global) &&\n                    (a.ignoreCase === b.ignoreCase) && (a.multiline === b.multiline);\n            }\n\n            var aString = Object.prototype.toString.call(a);\n            if (aString !== Object.prototype.toString.call(b)) {\n                return false;\n            }\n\n            if (aString === \"[object Date]\") {\n                return a.valueOf() === b.valueOf();\n            }\n\n            var prop;\n            var aLength = 0;\n            var bLength = 0;\n\n            if (aString === \"[object Array]\" && a.length !== b.length) {\n                return false;\n            }\n\n            for (prop in a) {\n                if (a.hasOwnProperty(prop)) {\n                    aLength += 1;\n\n                    if (!(prop in b)) {\n                        return false;\n                    }\n\n                    if (!deepEqual(a[prop], b[prop])) {\n                        return false;\n                    }\n                }\n            }\n\n            for (prop in b) {\n                if (b.hasOwnProperty(prop)) {\n                    bLength += 1;\n                }\n            }\n\n            return aLength === bLength;\n        };\n\n        sinon.functionName = function functionName(func) {\n            var name = func.displayName || func.name;\n\n            // Use function decomposition as a last resort to get function\n            // name. Does not rely on function decomposition to work - if it\n            // doesn't debugging will be slightly less informative\n            // (i.e. toString will say 'spy' rather than 'myFunc').\n            if (!name) {\n                var matches = func.toString().match(/function ([^\\s\\(]+)/);\n                name = matches && matches[1];\n            }\n\n            return name;\n        };\n\n        sinon.functionToString = function toString() {\n            if (this.getCall && this.callCount) {\n                var thisValue,\n                    prop;\n                var i = this.callCount;\n\n                while (i--) {\n                    thisValue = this.getCall(i).thisValue;\n\n                    for (prop in thisValue) {\n                        if (thisValue[prop] === this) {\n                            return prop;\n                        }\n                    }\n                }\n            }\n\n            return this.displayName || \"sinon fake\";\n        };\n\n        sinon.objectKeys = function objectKeys(obj) {\n            if (obj !== Object(obj)) {\n                throw new TypeError(\"sinon.objectKeys called on a non-object\");\n            }\n\n            var keys = [];\n            var key;\n            for (key in obj) {\n                if (hasOwn.call(obj, key)) {\n                    keys.push(key);\n                }\n            }\n\n            return keys;\n        };\n\n        sinon.getPropertyDescriptor = function getPropertyDescriptor(object, property) {\n            var proto = object;\n            var descriptor;\n\n            while (proto && !(descriptor = Object.getOwnPropertyDescriptor(proto, property))) {\n                proto = Object.getPrototypeOf(proto);\n            }\n            return descriptor;\n        };\n\n        sinon.getConfig = function (custom) {\n            var config = {};\n            custom = custom || {};\n            var defaults = sinon.defaultConfig;\n\n            for (var prop in defaults) {\n                if (defaults.hasOwnProperty(prop)) {\n                    config[prop] = custom.hasOwnProperty(prop) ? custom[prop] : defaults[prop];\n                }\n            }\n\n            return config;\n        };\n\n        sinon.defaultConfig = {\n            injectIntoThis: true,\n            injectInto: null,\n            properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n            useFakeTimers: true,\n            useFakeServer: true\n        };\n\n        sinon.timesInWords = function timesInWords(count) {\n            return count === 1 && \"once\" ||\n                count === 2 && \"twice\" ||\n                count === 3 && \"thrice\" ||\n                (count || 0) + \" times\";\n        };\n\n        sinon.calledInOrder = function (spies) {\n            for (var i = 1, l = spies.length; i < l; i++) {\n                if (!spies[i - 1].calledBefore(spies[i]) || !spies[i].called) {\n                    return false;\n                }\n            }\n\n            return true;\n        };\n\n        sinon.orderByFirstCall = function (spies) {\n            return spies.sort(function (a, b) {\n                // uuid, won't ever be equal\n                var aCall = a.getCall(0);\n                var bCall = b.getCall(0);\n                var aId = aCall && aCall.callId || -1;\n                var bId = bCall && bCall.callId || -1;\n\n                return aId < bId ? -1 : 1;\n            });\n        };\n\n        sinon.createStubInstance = function (constructor) {\n            if (typeof constructor !== \"function\") {\n                throw new TypeError(\"The constructor should be a function.\");\n            }\n            return sinon.stub(sinon.create(constructor.prototype));\n        };\n\n        sinon.restore = function (object) {\n            if (object !== null && typeof object === \"object\") {\n                for (var prop in object) {\n                    if (isRestorable(object[prop])) {\n                        object[prop].restore();\n                    }\n                }\n            } else if (isRestorable(object)) {\n                object.restore();\n            }\n        };\n\n        return sinon;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports) {\n        makeApi(exports);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n\n        // Adapted from https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n        var hasDontEnumBug = (function () {\n            var obj = {\n                constructor: function () {\n                    return \"0\";\n                },\n                toString: function () {\n                    return \"1\";\n                },\n                valueOf: function () {\n                    return \"2\";\n                },\n                toLocaleString: function () {\n                    return \"3\";\n                },\n                prototype: function () {\n                    return \"4\";\n                },\n                isPrototypeOf: function () {\n                    return \"5\";\n                },\n                propertyIsEnumerable: function () {\n                    return \"6\";\n                },\n                hasOwnProperty: function () {\n                    return \"7\";\n                },\n                length: function () {\n                    return \"8\";\n                },\n                unique: function () {\n                    return \"9\";\n                }\n            };\n\n            var result = [];\n            for (var prop in obj) {\n                if (obj.hasOwnProperty(prop)) {\n                    result.push(obj[prop]());\n                }\n            }\n            return result.join(\"\") !== \"0123456789\";\n        })();\n\n        /* Public: Extend target in place with all (own) properties from sources in-order. Thus, last source will\n         *         override properties in previous sources.\n         *\n         * target - The Object to extend\n         * sources - Objects to copy properties from.\n         *\n         * Returns the extended target\n         */\n        function extend(target /*, sources */) {\n            var sources = Array.prototype.slice.call(arguments, 1);\n            var source, i, prop;\n\n            for (i = 0; i < sources.length; i++) {\n                source = sources[i];\n\n                for (prop in source) {\n                    if (source.hasOwnProperty(prop)) {\n                        target[prop] = source[prop];\n                    }\n                }\n\n                // Make sure we copy (own) toString method even when in JScript with DontEnum bug\n                // See https://developer.mozilla.org/en/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug\n                if (hasDontEnumBug && source.hasOwnProperty(\"toString\") && source.toString !== target.toString) {\n                    target.toString = source.toString;\n                }\n            }\n\n            return target;\n        }\n\n        sinon.extend = extend;\n        return sinon.extend;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n\n        function timesInWords(count) {\n            switch (count) {\n                case 1:\n                    return \"once\";\n                case 2:\n                    return \"twice\";\n                case 3:\n                    return \"thrice\";\n                default:\n                    return (count || 0) + \" times\";\n            }\n        }\n\n        sinon.timesInWords = timesInWords;\n        return sinon.timesInWords;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        module.exports = makeApi(core);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n */\n/**\n * Format functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        function typeOf(value) {\n            if (value === null) {\n                return \"null\";\n            } else if (value === undefined) {\n                return \"undefined\";\n            }\n            var string = Object.prototype.toString.call(value);\n            return string.substring(8, string.length - 1).toLowerCase();\n        }\n\n        sinon.typeOf = typeOf;\n        return sinon.typeOf;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        module.exports = makeApi(core);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n * @depend typeOf.js\n */\n/*jslint eqeqeq: false, onevar: false, plusplus: false*/\n/*global module, require, sinon*/\n/**\n * Match functions\n *\n * @author Maximilian Antoni (mail@maxantoni.de)\n * @license BSD\n *\n * Copyright (c) 2012 Maximilian Antoni\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        function assertType(value, type, name) {\n            var actual = sinon.typeOf(value);\n            if (actual !== type) {\n                throw new TypeError(\"Expected type of \" + name + \" to be \" +\n                    type + \", but was \" + actual);\n            }\n        }\n\n        var matcher = {\n            toString: function () {\n                return this.message;\n            }\n        };\n\n        function isMatcher(object) {\n            return matcher.isPrototypeOf(object);\n        }\n\n        function matchObject(expectation, actual) {\n            if (actual === null || actual === undefined) {\n                return false;\n            }\n            for (var key in expectation) {\n                if (expectation.hasOwnProperty(key)) {\n                    var exp = expectation[key];\n                    var act = actual[key];\n                    if (isMatcher(exp)) {\n                        if (!exp.test(act)) {\n                            return false;\n                        }\n                    } else if (sinon.typeOf(exp) === \"object\") {\n                        if (!matchObject(exp, act)) {\n                            return false;\n                        }\n                    } else if (!sinon.deepEqual(exp, act)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        }\n\n        function match(expectation, message) {\n            var m = sinon.create(matcher);\n            var type = sinon.typeOf(expectation);\n            switch (type) {\n            case \"object\":\n                if (typeof expectation.test === \"function\") {\n                    m.test = function (actual) {\n                        return expectation.test(actual) === true;\n                    };\n                    m.message = \"match(\" + sinon.functionName(expectation.test) + \")\";\n                    return m;\n                }\n                var str = [];\n                for (var key in expectation) {\n                    if (expectation.hasOwnProperty(key)) {\n                        str.push(key + \": \" + expectation[key]);\n                    }\n                }\n                m.test = function (actual) {\n                    return matchObject(expectation, actual);\n                };\n                m.message = \"match(\" + str.join(\", \") + \")\";\n                break;\n            case \"number\":\n                m.test = function (actual) {\n                    // we need type coercion here\n                    return expectation == actual; // eslint-disable-line eqeqeq\n                };\n                break;\n            case \"string\":\n                m.test = function (actual) {\n                    if (typeof actual !== \"string\") {\n                        return false;\n                    }\n                    return actual.indexOf(expectation) !== -1;\n                };\n                m.message = \"match(\\\"\" + expectation + \"\\\")\";\n                break;\n            case \"regexp\":\n                m.test = function (actual) {\n                    if (typeof actual !== \"string\") {\n                        return false;\n                    }\n                    return expectation.test(actual);\n                };\n                break;\n            case \"function\":\n                m.test = expectation;\n                if (message) {\n                    m.message = message;\n                } else {\n                    m.message = \"match(\" + sinon.functionName(expectation) + \")\";\n                }\n                break;\n            default:\n                m.test = function (actual) {\n                    return sinon.deepEqual(expectation, actual);\n                };\n            }\n            if (!m.message) {\n                m.message = \"match(\" + expectation + \")\";\n            }\n            return m;\n        }\n\n        matcher.or = function (m2) {\n            if (!arguments.length) {\n                throw new TypeError(\"Matcher expected\");\n            } else if (!isMatcher(m2)) {\n                m2 = match(m2);\n            }\n            var m1 = this;\n            var or = sinon.create(matcher);\n            or.test = function (actual) {\n                return m1.test(actual) || m2.test(actual);\n            };\n            or.message = m1.message + \".or(\" + m2.message + \")\";\n            return or;\n        };\n\n        matcher.and = function (m2) {\n            if (!arguments.length) {\n                throw new TypeError(\"Matcher expected\");\n            } else if (!isMatcher(m2)) {\n                m2 = match(m2);\n            }\n            var m1 = this;\n            var and = sinon.create(matcher);\n            and.test = function (actual) {\n                return m1.test(actual) && m2.test(actual);\n            };\n            and.message = m1.message + \".and(\" + m2.message + \")\";\n            return and;\n        };\n\n        match.isMatcher = isMatcher;\n\n        match.any = match(function () {\n            return true;\n        }, \"any\");\n\n        match.defined = match(function (actual) {\n            return actual !== null && actual !== undefined;\n        }, \"defined\");\n\n        match.truthy = match(function (actual) {\n            return !!actual;\n        }, \"truthy\");\n\n        match.falsy = match(function (actual) {\n            return !actual;\n        }, \"falsy\");\n\n        match.same = function (expectation) {\n            return match(function (actual) {\n                return expectation === actual;\n            }, \"same(\" + expectation + \")\");\n        };\n\n        match.typeOf = function (type) {\n            assertType(type, \"string\", \"type\");\n            return match(function (actual) {\n                return sinon.typeOf(actual) === type;\n            }, \"typeOf(\\\"\" + type + \"\\\")\");\n        };\n\n        match.instanceOf = function (type) {\n            assertType(type, \"function\", \"type\");\n            return match(function (actual) {\n                return actual instanceof type;\n            }, \"instanceOf(\" + sinon.functionName(type) + \")\");\n        };\n\n        function createPropertyMatcher(propertyTest, messagePrefix) {\n            return function (property, value) {\n                assertType(property, \"string\", \"property\");\n                var onlyProperty = arguments.length === 1;\n                var message = messagePrefix + \"(\\\"\" + property + \"\\\"\";\n                if (!onlyProperty) {\n                    message += \", \" + value;\n                }\n                message += \")\";\n                return match(function (actual) {\n                    if (actual === undefined || actual === null ||\n                            !propertyTest(actual, property)) {\n                        return false;\n                    }\n                    return onlyProperty || sinon.deepEqual(value, actual[property]);\n                }, message);\n            };\n        }\n\n        match.has = createPropertyMatcher(function (actual, property) {\n            if (typeof actual === \"object\") {\n                return property in actual;\n            }\n            return actual[property] !== undefined;\n        }, \"has\");\n\n        match.hasOwn = createPropertyMatcher(function (actual, property) {\n            return actual.hasOwnProperty(property);\n        }, \"hasOwn\");\n\n        match.bool = match.typeOf(\"boolean\");\n        match.number = match.typeOf(\"number\");\n        match.string = match.typeOf(\"string\");\n        match.object = match.typeOf(\"object\");\n        match.func = match.typeOf(\"function\");\n        match.array = match.typeOf(\"array\");\n        match.regexp = match.typeOf(\"regexp\");\n        match.date = match.typeOf(\"date\");\n\n        sinon.match = match;\n        return match;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./typeOf\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n */\n/**\n * Format functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n(function (sinonGlobal, formatio) {\n\n    function makeApi(sinon) {\n        function valueFormatter(value) {\n            return \"\" + value;\n        }\n\n        function getFormatioFormatter() {\n            var formatter = formatio.configure({\n                    quoteStrings: false,\n                    limitChildrenCount: 250\n                });\n\n            function format() {\n                return formatter.ascii.apply(formatter, arguments);\n            }\n\n            return format;\n        }\n\n        function getNodeFormatter() {\n            try {\n                var util = require(\"util\");\n            } catch (e) {\n                /* Node, but no util module - would be very old, but better safe than sorry */\n            }\n\n            function format(v) {\n                var isObjectWithNativeToString = typeof v === \"object\" && v.toString === Object.prototype.toString;\n                return isObjectWithNativeToString ? util.inspect(v) : v;\n            }\n\n            return util ? format : valueFormatter;\n        }\n\n        var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n        var formatter;\n\n        if (isNode) {\n            try {\n                formatio = require(\"formatio\");\n            }\n            catch (e) {} // eslint-disable-line no-empty\n        }\n\n        if (formatio) {\n            formatter = getFormatioFormatter();\n        } else if (isNode) {\n            formatter = getNodeFormatter();\n        } else {\n            formatter = valueFormatter;\n        }\n\n        sinon.format = formatter;\n        return sinon.format;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon, // eslint-disable-line no-undef\n    typeof formatio === \"object\" && formatio // eslint-disable-line no-undef\n));\n\n/**\n  * @depend util/core.js\n  * @depend match.js\n  * @depend format.js\n  */\n/**\n  * Spy calls\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @author Maximilian Antoni (mail@maxantoni.de)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  * Copyright (c) 2013 Maximilian Antoni\n  */\n(function (sinonGlobal) {\n\n    var slice = Array.prototype.slice;\n\n    function makeApi(sinon) {\n        function throwYieldError(proxy, text, args) {\n            var msg = sinon.functionName(proxy) + text;\n            if (args.length) {\n                msg += \" Received [\" + slice.call(args).join(\", \") + \"]\";\n            }\n            throw new Error(msg);\n        }\n\n        var callProto = {\n            calledOn: function calledOn(thisValue) {\n                if (sinon.match && sinon.match.isMatcher(thisValue)) {\n                    return thisValue.test(this.thisValue);\n                }\n                return this.thisValue === thisValue;\n            },\n\n            calledWith: function calledWith() {\n                var l = arguments.length;\n                if (l > this.args.length) {\n                    return false;\n                }\n                for (var i = 0; i < l; i += 1) {\n                    if (!sinon.deepEqual(arguments[i], this.args[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            calledWithMatch: function calledWithMatch() {\n                var l = arguments.length;\n                if (l > this.args.length) {\n                    return false;\n                }\n                for (var i = 0; i < l; i += 1) {\n                    var actual = this.args[i];\n                    var expectation = arguments[i];\n                    if (!sinon.match || !sinon.match(expectation).test(actual)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n\n            calledWithExactly: function calledWithExactly() {\n                return arguments.length === this.args.length &&\n                    this.calledWith.apply(this, arguments);\n            },\n\n            notCalledWith: function notCalledWith() {\n                return !this.calledWith.apply(this, arguments);\n            },\n\n            notCalledWithMatch: function notCalledWithMatch() {\n                return !this.calledWithMatch.apply(this, arguments);\n            },\n\n            returned: function returned(value) {\n                return sinon.deepEqual(value, this.returnValue);\n            },\n\n            threw: function threw(error) {\n                if (typeof error === \"undefined\" || !this.exception) {\n                    return !!this.exception;\n                }\n\n                return this.exception === error || this.exception.name === error;\n            },\n\n            calledWithNew: function calledWithNew() {\n                return this.proxy.prototype && this.thisValue instanceof this.proxy;\n            },\n\n            calledBefore: function (other) {\n                return this.callId < other.callId;\n            },\n\n            calledAfter: function (other) {\n                return this.callId > other.callId;\n            },\n\n            callArg: function (pos) {\n                this.args[pos]();\n            },\n\n            callArgOn: function (pos, thisValue) {\n                this.args[pos].apply(thisValue);\n            },\n\n            callArgWith: function (pos) {\n                this.callArgOnWith.apply(this, [pos, null].concat(slice.call(arguments, 1)));\n            },\n\n            callArgOnWith: function (pos, thisValue) {\n                var args = slice.call(arguments, 2);\n                this.args[pos].apply(thisValue, args);\n            },\n\n            \"yield\": function () {\n                this.yieldOn.apply(this, [null].concat(slice.call(arguments, 0)));\n            },\n\n            yieldOn: function (thisValue) {\n                var args = this.args;\n                for (var i = 0, l = args.length; i < l; ++i) {\n                    if (typeof args[i] === \"function\") {\n                        args[i].apply(thisValue, slice.call(arguments, 1));\n                        return;\n                    }\n                }\n                throwYieldError(this.proxy, \" cannot yield since no callback was passed.\", args);\n            },\n\n            yieldTo: function (prop) {\n                this.yieldToOn.apply(this, [prop, null].concat(slice.call(arguments, 1)));\n            },\n\n            yieldToOn: function (prop, thisValue) {\n                var args = this.args;\n                for (var i = 0, l = args.length; i < l; ++i) {\n                    if (args[i] && typeof args[i][prop] === \"function\") {\n                        args[i][prop].apply(thisValue, slice.call(arguments, 2));\n                        return;\n                    }\n                }\n                throwYieldError(this.proxy, \" cannot yield to '\" + prop +\n                    \"' since no callback was passed.\", args);\n            },\n\n            getStackFrames: function () {\n                // Omit the error message and the two top stack frames in sinon itself:\n                return this.stack && this.stack.split(\"\\n\").slice(3);\n            },\n\n            toString: function () {\n                var callStr = this.proxy ? this.proxy.toString() + \"(\" : \"\";\n                var args = [];\n\n                if (!this.args) {\n                    return \":(\";\n                }\n\n                for (var i = 0, l = this.args.length; i < l; ++i) {\n                    args.push(sinon.format(this.args[i]));\n                }\n\n                callStr = callStr + args.join(\", \") + \")\";\n\n                if (typeof this.returnValue !== \"undefined\") {\n                    callStr += \" => \" + sinon.format(this.returnValue);\n                }\n\n                if (this.exception) {\n                    callStr += \" !\" + this.exception.name;\n\n                    if (this.exception.message) {\n                        callStr += \"(\" + this.exception.message + \")\";\n                    }\n                }\n                if (this.stack) {\n                    callStr += this.getStackFrames()[0].replace(/^\\s*(?:at\\s+|@)?/, \" at \");\n\n                }\n\n                return callStr;\n            }\n        };\n\n        callProto.invokeCallback = callProto.yield;\n\n        function createSpyCall(spy, thisValue, args, returnValue, exception, id, stack) {\n            if (typeof id !== \"number\") {\n                throw new TypeError(\"Call id is not a number\");\n            }\n            var proxyCall = sinon.create(callProto);\n            proxyCall.proxy = spy;\n            proxyCall.thisValue = thisValue;\n            proxyCall.args = args;\n            proxyCall.returnValue = returnValue;\n            proxyCall.exception = exception;\n            proxyCall.callId = id;\n            proxyCall.stack = stack;\n\n            return proxyCall;\n        }\n        createSpyCall.toString = callProto.toString; // used by mocks\n\n        sinon.spyCall = createSpyCall;\n        return createSpyCall;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./match\");\n        require(\"./format\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n  * @depend times_in_words.js\n  * @depend util/core.js\n  * @depend extend.js\n  * @depend call.js\n  * @depend format.js\n  */\n/**\n  * Spy functions\n  *\n  * @author Christian Johansen (christian@cjohansen.no)\n  * @license BSD\n  *\n  * Copyright (c) 2010-2013 Christian Johansen\n  */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        var push = Array.prototype.push;\n        var slice = Array.prototype.slice;\n        var callId = 0;\n\n        function spy(object, property, types) {\n            if (!property && typeof object === \"function\") {\n                return spy.create(object);\n            }\n\n            if (!object && !property) {\n                return spy.create(function () { });\n            }\n\n            if (types) {\n                var methodDesc = sinon.getPropertyDescriptor(object, property);\n                for (var i = 0; i < types.length; i++) {\n                    methodDesc[types[i]] = spy.create(methodDesc[types[i]]);\n                }\n                return sinon.wrapMethod(object, property, methodDesc);\n            }\n\n            return sinon.wrapMethod(object, property, spy.create(object[property]));\n        }\n\n        function matchingFake(fakes, args, strict) {\n            if (!fakes) {\n                return undefined;\n            }\n\n            for (var i = 0, l = fakes.length; i < l; i++) {\n                if (fakes[i].matches(args, strict)) {\n                    return fakes[i];\n                }\n            }\n        }\n\n        function incrementCallCount() {\n            this.called = true;\n            this.callCount += 1;\n            this.notCalled = false;\n            this.calledOnce = this.callCount === 1;\n            this.calledTwice = this.callCount === 2;\n            this.calledThrice = this.callCount === 3;\n        }\n\n        function createCallProperties() {\n            this.firstCall = this.getCall(0);\n            this.secondCall = this.getCall(1);\n            this.thirdCall = this.getCall(2);\n            this.lastCall = this.getCall(this.callCount - 1);\n        }\n\n        var vars = \"a,b,c,d,e,f,g,h,i,j,k,l\";\n        function createProxy(func, proxyLength) {\n            // Retain the function length:\n            var p;\n            if (proxyLength) {\n                eval(\"p = (function proxy(\" + vars.substring(0, proxyLength * 2 - 1) + // eslint-disable-line no-eval\n                    \") { return p.invoke(func, this, slice.call(arguments)); });\");\n            } else {\n                p = function proxy() {\n                    return p.invoke(func, this, slice.call(arguments));\n                };\n            }\n            p.isSinonProxy = true;\n            return p;\n        }\n\n        var uuid = 0;\n\n        // Public API\n        var spyApi = {\n            reset: function () {\n                if (this.invoking) {\n                    var err = new Error(\"Cannot reset Sinon function while invoking it. \" +\n                                        \"Move the call to .reset outside of the callback.\");\n                    err.name = \"InvalidResetException\";\n                    throw err;\n                }\n\n                this.called = false;\n                this.notCalled = true;\n                this.calledOnce = false;\n                this.calledTwice = false;\n                this.calledThrice = false;\n                this.callCount = 0;\n                this.firstCall = null;\n                this.secondCall = null;\n                this.thirdCall = null;\n                this.lastCall = null;\n                this.args = [];\n                this.returnValues = [];\n                this.thisValues = [];\n                this.exceptions = [];\n                this.callIds = [];\n                this.stacks = [];\n                if (this.fakes) {\n                    for (var i = 0; i < this.fakes.length; i++) {\n                        this.fakes[i].reset();\n                    }\n                }\n\n                return this;\n            },\n\n            create: function create(func, spyLength) {\n                var name;\n\n                if (typeof func !== \"function\") {\n                    func = function () { };\n                } else {\n                    name = sinon.functionName(func);\n                }\n\n                if (!spyLength) {\n                    spyLength = func.length;\n                }\n\n                var proxy = createProxy(func, spyLength);\n\n                sinon.extend(proxy, spy);\n                delete proxy.create;\n                sinon.extend(proxy, func);\n\n                proxy.reset();\n                proxy.prototype = func.prototype;\n                proxy.displayName = name || \"spy\";\n                proxy.toString = sinon.functionToString;\n                proxy.instantiateFake = sinon.spy.create;\n                proxy.id = \"spy#\" + uuid++;\n\n                return proxy;\n            },\n\n            invoke: function invoke(func, thisValue, args) {\n                var matching = matchingFake(this.fakes, args);\n                var exception, returnValue;\n\n                incrementCallCount.call(this);\n                push.call(this.thisValues, thisValue);\n                push.call(this.args, args);\n                push.call(this.callIds, callId++);\n\n                // Make call properties available from within the spied function:\n                createCallProperties.call(this);\n\n                try {\n                    this.invoking = true;\n\n                    if (matching) {\n                        returnValue = matching.invoke(func, thisValue, args);\n                    } else {\n                        returnValue = (this.func || func).apply(thisValue, args);\n                    }\n\n                    var thisCall = this.getCall(this.callCount - 1);\n                    if (thisCall.calledWithNew() && typeof returnValue !== \"object\") {\n                        returnValue = thisValue;\n                    }\n                } catch (e) {\n                    exception = e;\n                } finally {\n                    delete this.invoking;\n                }\n\n                push.call(this.exceptions, exception);\n                push.call(this.returnValues, returnValue);\n                push.call(this.stacks, new Error().stack);\n\n                // Make return value and exception available in the calls:\n                createCallProperties.call(this);\n\n                if (exception !== undefined) {\n                    throw exception;\n                }\n\n                return returnValue;\n            },\n\n            named: function named(name) {\n                this.displayName = name;\n                return this;\n            },\n\n            getCall: function getCall(i) {\n                if (i < 0 || i >= this.callCount) {\n                    return null;\n                }\n\n                return sinon.spyCall(this, this.thisValues[i], this.args[i],\n                                        this.returnValues[i], this.exceptions[i],\n                                        this.callIds[i], this.stacks[i]);\n            },\n\n            getCalls: function () {\n                var calls = [];\n                var i;\n\n                for (i = 0; i < this.callCount; i++) {\n                    calls.push(this.getCall(i));\n                }\n\n                return calls;\n            },\n\n            calledBefore: function calledBefore(spyFn) {\n                if (!this.called) {\n                    return false;\n                }\n\n                if (!spyFn.called) {\n                    return true;\n                }\n\n                return this.callIds[0] < spyFn.callIds[spyFn.callIds.length - 1];\n            },\n\n            calledAfter: function calledAfter(spyFn) {\n                if (!this.called || !spyFn.called) {\n                    return false;\n                }\n\n                return this.callIds[this.callCount - 1] > spyFn.callIds[spyFn.callCount - 1];\n            },\n\n            withArgs: function () {\n                var args = slice.call(arguments);\n\n                if (this.fakes) {\n                    var match = matchingFake(this.fakes, args, true);\n\n                    if (match) {\n                        return match;\n                    }\n                } else {\n                    this.fakes = [];\n                }\n\n                var original = this;\n                var fake = this.instantiateFake();\n                fake.matchingAguments = args;\n                fake.parent = this;\n                push.call(this.fakes, fake);\n\n                fake.withArgs = function () {\n                    return original.withArgs.apply(original, arguments);\n                };\n\n                for (var i = 0; i < this.args.length; i++) {\n                    if (fake.matches(this.args[i])) {\n                        incrementCallCount.call(fake);\n                        push.call(fake.thisValues, this.thisValues[i]);\n                        push.call(fake.args, this.args[i]);\n                        push.call(fake.returnValues, this.returnValues[i]);\n                        push.call(fake.exceptions, this.exceptions[i]);\n                        push.call(fake.callIds, this.callIds[i]);\n                    }\n                }\n                createCallProperties.call(fake);\n\n                return fake;\n            },\n\n            matches: function (args, strict) {\n                var margs = this.matchingAguments;\n\n                if (margs.length <= args.length &&\n                    sinon.deepEqual(margs, args.slice(0, margs.length))) {\n                    return !strict || margs.length === args.length;\n                }\n            },\n\n            printf: function (format) {\n                var spyInstance = this;\n                var args = slice.call(arguments, 1);\n                var formatter;\n\n                return (format || \"\").replace(/%(.)/g, function (match, specifyer) {\n                    formatter = spyApi.formatters[specifyer];\n\n                    if (typeof formatter === \"function\") {\n                        return formatter.call(null, spyInstance, args);\n                    } else if (!isNaN(parseInt(specifyer, 10))) {\n                        return sinon.format(args[specifyer - 1]);\n                    }\n\n                    return \"%\" + specifyer;\n                });\n            }\n        };\n\n        function delegateToCalls(method, matchAny, actual, notCalled) {\n            spyApi[method] = function () {\n                if (!this.called) {\n                    if (notCalled) {\n                        return notCalled.apply(this, arguments);\n                    }\n                    return false;\n                }\n\n                var currentCall;\n                var matches = 0;\n\n                for (var i = 0, l = this.callCount; i < l; i += 1) {\n                    currentCall = this.getCall(i);\n\n                    if (currentCall[actual || method].apply(currentCall, arguments)) {\n                        matches += 1;\n\n                        if (matchAny) {\n                            return true;\n                        }\n                    }\n                }\n\n                return matches === this.callCount;\n            };\n        }\n\n        delegateToCalls(\"calledOn\", true);\n        delegateToCalls(\"alwaysCalledOn\", false, \"calledOn\");\n        delegateToCalls(\"calledWith\", true);\n        delegateToCalls(\"calledWithMatch\", true);\n        delegateToCalls(\"alwaysCalledWith\", false, \"calledWith\");\n        delegateToCalls(\"alwaysCalledWithMatch\", false, \"calledWithMatch\");\n        delegateToCalls(\"calledWithExactly\", true);\n        delegateToCalls(\"alwaysCalledWithExactly\", false, \"calledWithExactly\");\n        delegateToCalls(\"neverCalledWith\", false, \"notCalledWith\", function () {\n            return true;\n        });\n        delegateToCalls(\"neverCalledWithMatch\", false, \"notCalledWithMatch\", function () {\n            return true;\n        });\n        delegateToCalls(\"threw\", true);\n        delegateToCalls(\"alwaysThrew\", false, \"threw\");\n        delegateToCalls(\"returned\", true);\n        delegateToCalls(\"alwaysReturned\", false, \"returned\");\n        delegateToCalls(\"calledWithNew\", true);\n        delegateToCalls(\"alwaysCalledWithNew\", false, \"calledWithNew\");\n        delegateToCalls(\"callArg\", false, \"callArgWith\", function () {\n            throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n        });\n        spyApi.callArgWith = spyApi.callArg;\n        delegateToCalls(\"callArgOn\", false, \"callArgOnWith\", function () {\n            throw new Error(this.toString() + \" cannot call arg since it was not yet invoked.\");\n        });\n        spyApi.callArgOnWith = spyApi.callArgOn;\n        delegateToCalls(\"yield\", false, \"yield\", function () {\n            throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n        });\n        // \"invokeCallback\" is an alias for \"yield\" since \"yield\" is invalid in strict mode.\n        spyApi.invokeCallback = spyApi.yield;\n        delegateToCalls(\"yieldOn\", false, \"yieldOn\", function () {\n            throw new Error(this.toString() + \" cannot yield since it was not yet invoked.\");\n        });\n        delegateToCalls(\"yieldTo\", false, \"yieldTo\", function (property) {\n            throw new Error(this.toString() + \" cannot yield to '\" + property +\n                \"' since it was not yet invoked.\");\n        });\n        delegateToCalls(\"yieldToOn\", false, \"yieldToOn\", function (property) {\n            throw new Error(this.toString() + \" cannot yield to '\" + property +\n                \"' since it was not yet invoked.\");\n        });\n\n        spyApi.formatters = {\n            c: function (spyInstance) {\n                return sinon.timesInWords(spyInstance.callCount);\n            },\n\n            n: function (spyInstance) {\n                return spyInstance.toString();\n            },\n\n            C: function (spyInstance) {\n                var calls = [];\n\n                for (var i = 0, l = spyInstance.callCount; i < l; ++i) {\n                    var stringifiedCall = \"    \" + spyInstance.getCall(i).toString();\n                    if (/\\n/.test(calls[i - 1])) {\n                        stringifiedCall = \"\\n\" + stringifiedCall;\n                    }\n                    push.call(calls, stringifiedCall);\n                }\n\n                return calls.length > 0 ? \"\\n\" + calls.join(\"\\n\") : \"\";\n            },\n\n            t: function (spyInstance) {\n                var objects = [];\n\n                for (var i = 0, l = spyInstance.callCount; i < l; ++i) {\n                    push.call(objects, sinon.format(spyInstance.thisValues[i]));\n                }\n\n                return objects.join(\", \");\n            },\n\n            \"*\": function (spyInstance, args) {\n                var formatted = [];\n\n                for (var i = 0, l = args.length; i < l; ++i) {\n                    push.call(formatted, sinon.format(args[i]));\n                }\n\n                return formatted.join(\", \");\n            }\n        };\n\n        sinon.extend(spy, spyApi);\n\n        spy.spyCall = sinon.spyCall;\n        sinon.spy = spy;\n\n        return spy;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        require(\"./call\");\n        require(\"./extend\");\n        require(\"./times_in_words\");\n        require(\"./format\");\n        module.exports = makeApi(core);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n * @depend extend.js\n */\n/**\n * Stub behavior\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @author Tim Fischbach (mail@timfischbach.de)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    var slice = Array.prototype.slice;\n    var join = Array.prototype.join;\n    var useLeftMostCallback = -1;\n    var useRightMostCallback = -2;\n\n    var nextTick = (function () {\n        if (typeof process === \"object\" && typeof process.nextTick === \"function\") {\n            return process.nextTick;\n        }\n\n        if (typeof setImmediate === \"function\") {\n            return setImmediate;\n        }\n\n        return function (callback) {\n            setTimeout(callback, 0);\n        };\n    })();\n\n    function throwsException(error, message) {\n        if (typeof error === \"string\") {\n            this.exception = new Error(message || \"\");\n            this.exception.name = error;\n        } else if (!error) {\n            this.exception = new Error(\"Error\");\n        } else {\n            this.exception = error;\n        }\n\n        return this;\n    }\n\n    function getCallback(behavior, args) {\n        var callArgAt = behavior.callArgAt;\n\n        if (callArgAt >= 0) {\n            return args[callArgAt];\n        }\n\n        var argumentList;\n\n        if (callArgAt === useLeftMostCallback) {\n            argumentList = args;\n        }\n\n        if (callArgAt === useRightMostCallback) {\n            argumentList = slice.call(args).reverse();\n        }\n\n        var callArgProp = behavior.callArgProp;\n\n        for (var i = 0, l = argumentList.length; i < l; ++i) {\n            if (!callArgProp && typeof argumentList[i] === \"function\") {\n                return argumentList[i];\n            }\n\n            if (callArgProp && argumentList[i] &&\n                typeof argumentList[i][callArgProp] === \"function\") {\n                return argumentList[i][callArgProp];\n            }\n        }\n\n        return null;\n    }\n\n    function makeApi(sinon) {\n        function getCallbackError(behavior, func, args) {\n            if (behavior.callArgAt < 0) {\n                var msg;\n\n                if (behavior.callArgProp) {\n                    msg = sinon.functionName(behavior.stub) +\n                        \" expected to yield to '\" + behavior.callArgProp +\n                        \"', but no object with such a property was passed.\";\n                } else {\n                    msg = sinon.functionName(behavior.stub) +\n                        \" expected to yield, but no callback was passed.\";\n                }\n\n                if (args.length > 0) {\n                    msg += \" Received [\" + join.call(args, \", \") + \"]\";\n                }\n\n                return msg;\n            }\n\n            return \"argument at index \" + behavior.callArgAt + \" is not a function: \" + func;\n        }\n\n        function callCallback(behavior, args) {\n            if (typeof behavior.callArgAt === \"number\") {\n                var func = getCallback(behavior, args);\n\n                if (typeof func !== \"function\") {\n                    throw new TypeError(getCallbackError(behavior, func, args));\n                }\n\n                if (behavior.callbackAsync) {\n                    nextTick(function () {\n                        func.apply(behavior.callbackContext, behavior.callbackArguments);\n                    });\n                } else {\n                    func.apply(behavior.callbackContext, behavior.callbackArguments);\n                }\n            }\n        }\n\n        var proto = {\n            create: function create(stub) {\n                var behavior = sinon.extend({}, sinon.behavior);\n                delete behavior.create;\n                behavior.stub = stub;\n\n                return behavior;\n            },\n\n            isPresent: function isPresent() {\n                return (typeof this.callArgAt === \"number\" ||\n                        this.exception ||\n                        typeof this.returnArgAt === \"number\" ||\n                        this.returnThis ||\n                        this.returnValueDefined);\n            },\n\n            invoke: function invoke(context, args) {\n                callCallback(this, args);\n\n                if (this.exception) {\n                    throw this.exception;\n                } else if (typeof this.returnArgAt === \"number\") {\n                    return args[this.returnArgAt];\n                } else if (this.returnThis) {\n                    return context;\n                }\n\n                return this.returnValue;\n            },\n\n            onCall: function onCall(index) {\n                return this.stub.onCall(index);\n            },\n\n            onFirstCall: function onFirstCall() {\n                return this.stub.onFirstCall();\n            },\n\n            onSecondCall: function onSecondCall() {\n                return this.stub.onSecondCall();\n            },\n\n            onThirdCall: function onThirdCall() {\n                return this.stub.onThirdCall();\n            },\n\n            withArgs: function withArgs(/* arguments */) {\n                throw new Error(\n                    \"Defining a stub by invoking \\\"stub.onCall(...).withArgs(...)\\\" \" +\n                    \"is not supported. Use \\\"stub.withArgs(...).onCall(...)\\\" \" +\n                    \"to define sequential behavior for calls with certain arguments.\"\n                );\n            },\n\n            callsArg: function callsArg(pos) {\n                if (typeof pos !== \"number\") {\n                    throw new TypeError(\"argument index is not number\");\n                }\n\n                this.callArgAt = pos;\n                this.callbackArguments = [];\n                this.callbackContext = undefined;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            callsArgOn: function callsArgOn(pos, context) {\n                if (typeof pos !== \"number\") {\n                    throw new TypeError(\"argument index is not number\");\n                }\n                if (typeof context !== \"object\") {\n                    throw new TypeError(\"argument context is not an object\");\n                }\n\n                this.callArgAt = pos;\n                this.callbackArguments = [];\n                this.callbackContext = context;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            callsArgWith: function callsArgWith(pos) {\n                if (typeof pos !== \"number\") {\n                    throw new TypeError(\"argument index is not number\");\n                }\n\n                this.callArgAt = pos;\n                this.callbackArguments = slice.call(arguments, 1);\n                this.callbackContext = undefined;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            callsArgOnWith: function callsArgWith(pos, context) {\n                if (typeof pos !== \"number\") {\n                    throw new TypeError(\"argument index is not number\");\n                }\n                if (typeof context !== \"object\") {\n                    throw new TypeError(\"argument context is not an object\");\n                }\n\n                this.callArgAt = pos;\n                this.callbackArguments = slice.call(arguments, 2);\n                this.callbackContext = context;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            yields: function () {\n                this.callArgAt = useLeftMostCallback;\n                this.callbackArguments = slice.call(arguments, 0);\n                this.callbackContext = undefined;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            yieldsRight: function () {\n                this.callArgAt = useRightMostCallback;\n                this.callbackArguments = slice.call(arguments, 0);\n                this.callbackContext = undefined;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            yieldsOn: function (context) {\n                if (typeof context !== \"object\") {\n                    throw new TypeError(\"argument context is not an object\");\n                }\n\n                this.callArgAt = useLeftMostCallback;\n                this.callbackArguments = slice.call(arguments, 1);\n                this.callbackContext = context;\n                this.callArgProp = undefined;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            yieldsTo: function (prop) {\n                this.callArgAt = useLeftMostCallback;\n                this.callbackArguments = slice.call(arguments, 1);\n                this.callbackContext = undefined;\n                this.callArgProp = prop;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            yieldsToOn: function (prop, context) {\n                if (typeof context !== \"object\") {\n                    throw new TypeError(\"argument context is not an object\");\n                }\n\n                this.callArgAt = useLeftMostCallback;\n                this.callbackArguments = slice.call(arguments, 2);\n                this.callbackContext = context;\n                this.callArgProp = prop;\n                this.callbackAsync = false;\n\n                return this;\n            },\n\n            throws: throwsException,\n            throwsException: throwsException,\n\n            returns: function returns(value) {\n                this.returnValue = value;\n                this.returnValueDefined = true;\n                this.exception = undefined;\n\n                return this;\n            },\n\n            returnsArg: function returnsArg(pos) {\n                if (typeof pos !== \"number\") {\n                    throw new TypeError(\"argument index is not number\");\n                }\n\n                this.returnArgAt = pos;\n\n                return this;\n            },\n\n            returnsThis: function returnsThis() {\n                this.returnThis = true;\n\n                return this;\n            }\n        };\n\n        function createAsyncVersion(syncFnName) {\n            return function () {\n                var result = this[syncFnName].apply(this, arguments);\n                this.callbackAsync = true;\n                return result;\n            };\n        }\n\n        // create asynchronous versions of callsArg* and yields* methods\n        for (var method in proto) {\n            // need to avoid creating anotherasync versions of the newly added async methods\n            if (proto.hasOwnProperty(method) && method.match(/^(callsArg|yields)/) && !method.match(/Async/)) {\n                proto[method + \"Async\"] = createAsyncVersion(method);\n            }\n        }\n\n        sinon.behavior = proto;\n        return proto;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./extend\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        function walkInternal(obj, iterator, context, originalObj, seen) {\n            var proto, prop;\n\n            if (typeof Object.getOwnPropertyNames !== \"function\") {\n                // We explicitly want to enumerate through all of the prototype's properties\n                // in this case, therefore we deliberately leave out an own property check.\n                /* eslint-disable guard-for-in */\n                for (prop in obj) {\n                    iterator.call(context, obj[prop], prop, obj);\n                }\n                /* eslint-enable guard-for-in */\n\n                return;\n            }\n\n            Object.getOwnPropertyNames(obj).forEach(function (k) {\n                if (!seen[k]) {\n                    seen[k] = true;\n                    var target = typeof Object.getOwnPropertyDescriptor(obj, k).get === \"function\" ?\n                        originalObj : obj;\n                    iterator.call(context, target[k], k, target);\n                }\n            });\n\n            proto = Object.getPrototypeOf(obj);\n            if (proto) {\n                walkInternal(proto, iterator, context, originalObj, seen);\n            }\n        }\n\n        /* Public: walks the prototype chain of an object and iterates over every own property\n         * name encountered. The iterator is called in the same fashion that Array.prototype.forEach\n         * works, where it is passed the value, key, and own object as the 1st, 2nd, and 3rd positional\n         * argument, respectively. In cases where Object.getOwnPropertyNames is not available, walk will\n         * default to using a simple for..in loop.\n         *\n         * obj - The object to walk the prototype chain for.\n         * iterator - The function to be called on each pass of the walk.\n         * context - (Optional) When given, the iterator will be called with this object as the receiver.\n         */\n        function walk(obj, iterator, context) {\n            return walkInternal(obj, iterator, context, obj, {});\n        }\n\n        sinon.walk = walk;\n        return sinon.walk;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n * @depend extend.js\n * @depend spy.js\n * @depend behavior.js\n * @depend walk.js\n */\n/**\n * Stub functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        function stub(object, property, func) {\n            if (!!func && typeof func !== \"function\" && typeof func !== \"object\") {\n                throw new TypeError(\"Custom stub should be a function or a property descriptor\");\n            }\n\n            var wrapper;\n\n            if (func) {\n                if (typeof func === \"function\") {\n                    wrapper = sinon.spy && sinon.spy.create ? sinon.spy.create(func) : func;\n                } else {\n                    wrapper = func;\n                    if (sinon.spy && sinon.spy.create) {\n                        var types = sinon.objectKeys(wrapper);\n                        for (var i = 0; i < types.length; i++) {\n                            wrapper[types[i]] = sinon.spy.create(wrapper[types[i]]);\n                        }\n                    }\n                }\n            } else {\n                var stubLength = 0;\n                if (typeof object === \"object\" && typeof object[property] === \"function\") {\n                    stubLength = object[property].length;\n                }\n                wrapper = stub.create(stubLength);\n            }\n\n            if (!object && typeof property === \"undefined\") {\n                return sinon.stub.create();\n            }\n\n            if (typeof property === \"undefined\" && typeof object === \"object\") {\n                sinon.walk(object || {}, function (value, prop, propOwner) {\n                    // we don't want to stub things like toString(), valueOf(), etc. so we only stub if the object\n                    // is not Object.prototype\n                    if (\n                        propOwner !== Object.prototype &&\n                        prop !== \"constructor\" &&\n                        typeof sinon.getPropertyDescriptor(propOwner, prop).value === \"function\"\n                    ) {\n                        stub(object, prop);\n                    }\n                });\n\n                return object;\n            }\n\n            return sinon.wrapMethod(object, property, wrapper);\n        }\n\n\n        /*eslint-disable no-use-before-define*/\n        function getParentBehaviour(stubInstance) {\n            return (stubInstance.parent && getCurrentBehavior(stubInstance.parent));\n        }\n\n        function getDefaultBehavior(stubInstance) {\n            return stubInstance.defaultBehavior ||\n                    getParentBehaviour(stubInstance) ||\n                    sinon.behavior.create(stubInstance);\n        }\n\n        function getCurrentBehavior(stubInstance) {\n            var behavior = stubInstance.behaviors[stubInstance.callCount - 1];\n            return behavior && behavior.isPresent() ? behavior : getDefaultBehavior(stubInstance);\n        }\n        /*eslint-enable no-use-before-define*/\n\n        var uuid = 0;\n\n        var proto = {\n            create: function create(stubLength) {\n                var functionStub = function () {\n                    return getCurrentBehavior(functionStub).invoke(this, arguments);\n                };\n\n                functionStub.id = \"stub#\" + uuid++;\n                var orig = functionStub;\n                functionStub = sinon.spy.create(functionStub, stubLength);\n                functionStub.func = orig;\n\n                sinon.extend(functionStub, stub);\n                functionStub.instantiateFake = sinon.stub.create;\n                functionStub.displayName = \"stub\";\n                functionStub.toString = sinon.functionToString;\n\n                functionStub.defaultBehavior = null;\n                functionStub.behaviors = [];\n\n                return functionStub;\n            },\n\n            resetBehavior: function () {\n                var i;\n\n                this.defaultBehavior = null;\n                this.behaviors = [];\n\n                delete this.returnValue;\n                delete this.returnArgAt;\n                this.returnThis = false;\n\n                if (this.fakes) {\n                    for (i = 0; i < this.fakes.length; i++) {\n                        this.fakes[i].resetBehavior();\n                    }\n                }\n            },\n\n            onCall: function onCall(index) {\n                if (!this.behaviors[index]) {\n                    this.behaviors[index] = sinon.behavior.create(this);\n                }\n\n                return this.behaviors[index];\n            },\n\n            onFirstCall: function onFirstCall() {\n                return this.onCall(0);\n            },\n\n            onSecondCall: function onSecondCall() {\n                return this.onCall(1);\n            },\n\n            onThirdCall: function onThirdCall() {\n                return this.onCall(2);\n            }\n        };\n\n        function createBehavior(behaviorMethod) {\n            return function () {\n                this.defaultBehavior = this.defaultBehavior || sinon.behavior.create(this);\n                this.defaultBehavior[behaviorMethod].apply(this.defaultBehavior, arguments);\n                return this;\n            };\n        }\n\n        for (var method in sinon.behavior) {\n            if (sinon.behavior.hasOwnProperty(method) &&\n                !proto.hasOwnProperty(method) &&\n                method !== \"create\" &&\n                method !== \"withArgs\" &&\n                method !== \"invoke\") {\n                proto[method] = createBehavior(method);\n            }\n        }\n\n        sinon.extend(stub, proto);\n        sinon.stub = stub;\n\n        return stub;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        require(\"./behavior\");\n        require(\"./spy\");\n        require(\"./extend\");\n        module.exports = makeApi(core);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend times_in_words.js\n * @depend util/core.js\n * @depend call.js\n * @depend extend.js\n * @depend match.js\n * @depend spy.js\n * @depend stub.js\n * @depend format.js\n */\n/**\n * Mock functions.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        var push = [].push;\n        var match = sinon.match;\n\n        function mock(object) {\n            // if (typeof console !== undefined && console.warn) {\n            //     console.warn(\"mock will be removed from Sinon.JS v2.0\");\n            // }\n\n            if (!object) {\n                return sinon.expectation.create(\"Anonymous mock\");\n            }\n\n            return mock.create(object);\n        }\n\n        function each(collection, callback) {\n            if (!collection) {\n                return;\n            }\n\n            for (var i = 0, l = collection.length; i < l; i += 1) {\n                callback(collection[i]);\n            }\n        }\n\n        function arrayEquals(arr1, arr2, compareLength) {\n            if (compareLength && (arr1.length !== arr2.length)) {\n                return false;\n            }\n\n            for (var i = 0, l = arr1.length; i < l; i++) {\n                if (!sinon.deepEqual(arr1[i], arr2[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n\n        sinon.extend(mock, {\n            create: function create(object) {\n                if (!object) {\n                    throw new TypeError(\"object is null\");\n                }\n\n                var mockObject = sinon.extend({}, mock);\n                mockObject.object = object;\n                delete mockObject.create;\n\n                return mockObject;\n            },\n\n            expects: function expects(method) {\n                if (!method) {\n                    throw new TypeError(\"method is falsy\");\n                }\n\n                if (!this.expectations) {\n                    this.expectations = {};\n                    this.proxies = [];\n                }\n\n                if (!this.expectations[method]) {\n                    this.expectations[method] = [];\n                    var mockObject = this;\n\n                    sinon.wrapMethod(this.object, method, function () {\n                        return mockObject.invokeMethod(method, this, arguments);\n                    });\n\n                    push.call(this.proxies, method);\n                }\n\n                var expectation = sinon.expectation.create(method);\n                push.call(this.expectations[method], expectation);\n\n                return expectation;\n            },\n\n            restore: function restore() {\n                var object = this.object;\n\n                each(this.proxies, function (proxy) {\n                    if (typeof object[proxy].restore === \"function\") {\n                        object[proxy].restore();\n                    }\n                });\n            },\n\n            verify: function verify() {\n                var expectations = this.expectations || {};\n                var messages = [];\n                var met = [];\n\n                each(this.proxies, function (proxy) {\n                    each(expectations[proxy], function (expectation) {\n                        if (!expectation.met()) {\n                            push.call(messages, expectation.toString());\n                        } else {\n                            push.call(met, expectation.toString());\n                        }\n                    });\n                });\n\n                this.restore();\n\n                if (messages.length > 0) {\n                    sinon.expectation.fail(messages.concat(met).join(\"\\n\"));\n                } else if (met.length > 0) {\n                    sinon.expectation.pass(messages.concat(met).join(\"\\n\"));\n                }\n\n                return true;\n            },\n\n            invokeMethod: function invokeMethod(method, thisValue, args) {\n                var expectations = this.expectations && this.expectations[method] ? this.expectations[method] : [];\n                var expectationsWithMatchingArgs = [];\n                var currentArgs = args || [];\n                var i, available;\n\n                for (i = 0; i < expectations.length; i += 1) {\n                    var expectedArgs = expectations[i].expectedArguments || [];\n                    if (arrayEquals(expectedArgs, currentArgs, expectations[i].expectsExactArgCount)) {\n                        expectationsWithMatchingArgs.push(expectations[i]);\n                    }\n                }\n\n                for (i = 0; i < expectationsWithMatchingArgs.length; i += 1) {\n                    if (!expectationsWithMatchingArgs[i].met() &&\n                        expectationsWithMatchingArgs[i].allowsCall(thisValue, args)) {\n                        return expectationsWithMatchingArgs[i].apply(thisValue, args);\n                    }\n                }\n\n                var messages = [];\n                var exhausted = 0;\n\n                for (i = 0; i < expectationsWithMatchingArgs.length; i += 1) {\n                    if (expectationsWithMatchingArgs[i].allowsCall(thisValue, args)) {\n                        available = available || expectationsWithMatchingArgs[i];\n                    } else {\n                        exhausted += 1;\n                    }\n                }\n\n                if (available && exhausted === 0) {\n                    return available.apply(thisValue, args);\n                }\n\n                for (i = 0; i < expectations.length; i += 1) {\n                    push.call(messages, \"    \" + expectations[i].toString());\n                }\n\n                messages.unshift(\"Unexpected call: \" + sinon.spyCall.toString.call({\n                    proxy: method,\n                    args: args\n                }));\n\n                sinon.expectation.fail(messages.join(\"\\n\"));\n            }\n        });\n\n        var times = sinon.timesInWords;\n        var slice = Array.prototype.slice;\n\n        function callCountInWords(callCount) {\n            if (callCount === 0) {\n                return \"never called\";\n            }\n\n            return \"called \" + times(callCount);\n        }\n\n        function expectedCallCountInWords(expectation) {\n            var min = expectation.minCalls;\n            var max = expectation.maxCalls;\n\n            if (typeof min === \"number\" && typeof max === \"number\") {\n                var str = times(min);\n\n                if (min !== max) {\n                    str = \"at least \" + str + \" and at most \" + times(max);\n                }\n\n                return str;\n            }\n\n            if (typeof min === \"number\") {\n                return \"at least \" + times(min);\n            }\n\n            return \"at most \" + times(max);\n        }\n\n        function receivedMinCalls(expectation) {\n            var hasMinLimit = typeof expectation.minCalls === \"number\";\n            return !hasMinLimit || expectation.callCount >= expectation.minCalls;\n        }\n\n        function receivedMaxCalls(expectation) {\n            if (typeof expectation.maxCalls !== \"number\") {\n                return false;\n            }\n\n            return expectation.callCount === expectation.maxCalls;\n        }\n\n        function verifyMatcher(possibleMatcher, arg) {\n            var isMatcher = match && match.isMatcher(possibleMatcher);\n\n            return isMatcher && possibleMatcher.test(arg) || true;\n        }\n\n        sinon.expectation = {\n            minCalls: 1,\n            maxCalls: 1,\n\n            create: function create(methodName) {\n                var expectation = sinon.extend(sinon.stub.create(), sinon.expectation);\n                delete expectation.create;\n                expectation.method = methodName;\n\n                return expectation;\n            },\n\n            invoke: function invoke(func, thisValue, args) {\n                this.verifyCallAllowed(thisValue, args);\n\n                return sinon.spy.invoke.apply(this, arguments);\n            },\n\n            atLeast: function atLeast(num) {\n                if (typeof num !== \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.maxCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.minCalls = num;\n\n                return this;\n            },\n\n            atMost: function atMost(num) {\n                if (typeof num !== \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not number\");\n                }\n\n                if (!this.limitsSet) {\n                    this.minCalls = null;\n                    this.limitsSet = true;\n                }\n\n                this.maxCalls = num;\n\n                return this;\n            },\n\n            never: function never() {\n                return this.exactly(0);\n            },\n\n            once: function once() {\n                return this.exactly(1);\n            },\n\n            twice: function twice() {\n                return this.exactly(2);\n            },\n\n            thrice: function thrice() {\n                return this.exactly(3);\n            },\n\n            exactly: function exactly(num) {\n                if (typeof num !== \"number\") {\n                    throw new TypeError(\"'\" + num + \"' is not a number\");\n                }\n\n                this.atLeast(num);\n                return this.atMost(num);\n            },\n\n            met: function met() {\n                return !this.failed && receivedMinCalls(this);\n            },\n\n            verifyCallAllowed: function verifyCallAllowed(thisValue, args) {\n                if (receivedMaxCalls(this)) {\n                    this.failed = true;\n                    sinon.expectation.fail(this.method + \" already called \" + times(this.maxCalls));\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    sinon.expectation.fail(this.method + \" called with \" + thisValue + \" as thisValue, expected \" +\n                        this.expectedThis);\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return;\n                }\n\n                if (!args) {\n                    sinon.expectation.fail(this.method + \" received no arguments, expected \" +\n                        sinon.format(this.expectedArguments));\n                }\n\n                if (args.length < this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too few arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length !== this.expectedArguments.length) {\n                    sinon.expectation.fail(this.method + \" received too many arguments (\" + sinon.format(args) +\n                        \"), expected \" + sinon.format(this.expectedArguments));\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n\n                    if (!verifyMatcher(this.expectedArguments[i], args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", didn't match \" + this.expectedArguments.toString());\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        sinon.expectation.fail(this.method + \" received wrong arguments \" + sinon.format(args) +\n                            \", expected \" + sinon.format(this.expectedArguments));\n                    }\n                }\n            },\n\n            allowsCall: function allowsCall(thisValue, args) {\n                if (this.met() && receivedMaxCalls(this)) {\n                    return false;\n                }\n\n                if (\"expectedThis\" in this && this.expectedThis !== thisValue) {\n                    return false;\n                }\n\n                if (!(\"expectedArguments\" in this)) {\n                    return true;\n                }\n\n                args = args || [];\n\n                if (args.length < this.expectedArguments.length) {\n                    return false;\n                }\n\n                if (this.expectsExactArgCount &&\n                    args.length !== this.expectedArguments.length) {\n                    return false;\n                }\n\n                for (var i = 0, l = this.expectedArguments.length; i < l; i += 1) {\n                    if (!verifyMatcher(this.expectedArguments[i], args[i])) {\n                        return false;\n                    }\n\n                    if (!sinon.deepEqual(this.expectedArguments[i], args[i])) {\n                        return false;\n                    }\n                }\n\n                return true;\n            },\n\n            withArgs: function withArgs() {\n                this.expectedArguments = slice.call(arguments);\n                return this;\n            },\n\n            withExactArgs: function withExactArgs() {\n                this.withArgs.apply(this, arguments);\n                this.expectsExactArgCount = true;\n                return this;\n            },\n\n            on: function on(thisValue) {\n                this.expectedThis = thisValue;\n                return this;\n            },\n\n            toString: function () {\n                var args = (this.expectedArguments || []).slice();\n\n                if (!this.expectsExactArgCount) {\n                    push.call(args, \"[...]\");\n                }\n\n                var callStr = sinon.spyCall.toString.call({\n                    proxy: this.method || \"anonymous mock expectation\",\n                    args: args\n                });\n\n                var message = callStr.replace(\", [...\", \"[, ...\") + \" \" +\n                    expectedCallCountInWords(this);\n\n                if (this.met()) {\n                    return \"Expectation met: \" + message;\n                }\n\n                return \"Expected \" + message + \" (\" +\n                    callCountInWords(this.callCount) + \")\";\n            },\n\n            verify: function verify() {\n                if (!this.met()) {\n                    sinon.expectation.fail(this.toString());\n                } else {\n                    sinon.expectation.pass(this.toString());\n                }\n\n                return true;\n            },\n\n            pass: function pass(message) {\n                sinon.assert.pass(message);\n            },\n\n            fail: function fail(message) {\n                var exception = new Error(message);\n                exception.name = \"ExpectationError\";\n\n                throw exception;\n            }\n        };\n\n        sinon.mock = mock;\n        return mock;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./times_in_words\");\n        require(\"./call\");\n        require(\"./extend\");\n        require(\"./match\");\n        require(\"./spy\");\n        require(\"./stub\");\n        require(\"./format\");\n\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n * @depend spy.js\n * @depend stub.js\n * @depend mock.js\n */\n/**\n * Collections of stubs, spies and mocks.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    var push = [].push;\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n    function getFakes(fakeCollection) {\n        if (!fakeCollection.fakes) {\n            fakeCollection.fakes = [];\n        }\n\n        return fakeCollection.fakes;\n    }\n\n    function each(fakeCollection, method) {\n        var fakes = getFakes(fakeCollection);\n\n        for (var i = 0, l = fakes.length; i < l; i += 1) {\n            if (typeof fakes[i][method] === \"function\") {\n                fakes[i][method]();\n            }\n        }\n    }\n\n    function compact(fakeCollection) {\n        var fakes = getFakes(fakeCollection);\n        var i = 0;\n        while (i < fakes.length) {\n            fakes.splice(i, 1);\n        }\n    }\n\n    function makeApi(sinon) {\n        var collection = {\n            verify: function resolve() {\n                each(this, \"verify\");\n            },\n\n            restore: function restore() {\n                each(this, \"restore\");\n                compact(this);\n            },\n\n            reset: function restore() {\n                each(this, \"reset\");\n            },\n\n            verifyAndRestore: function verifyAndRestore() {\n                var exception;\n\n                try {\n                    this.verify();\n                } catch (e) {\n                    exception = e;\n                }\n\n                this.restore();\n\n                if (exception) {\n                    throw exception;\n                }\n            },\n\n            add: function add(fake) {\n                push.call(getFakes(this), fake);\n                return fake;\n            },\n\n            spy: function spy() {\n                return this.add(sinon.spy.apply(sinon, arguments));\n            },\n\n            stub: function stub(object, property, value) {\n                if (property) {\n                    var original = object[property];\n\n                    if (typeof original !== \"function\") {\n                        if (!hasOwnProperty.call(object, property)) {\n                            throw new TypeError(\"Cannot stub non-existent own property \" + property);\n                        }\n\n                        object[property] = value;\n\n                        return this.add({\n                            restore: function () {\n                                object[property] = original;\n                            }\n                        });\n                    }\n                }\n                if (!property && !!object && typeof object === \"object\") {\n                    var stubbedObj = sinon.stub.apply(sinon, arguments);\n\n                    for (var prop in stubbedObj) {\n                        if (typeof stubbedObj[prop] === \"function\") {\n                            this.add(stubbedObj[prop]);\n                        }\n                    }\n\n                    return stubbedObj;\n                }\n\n                return this.add(sinon.stub.apply(sinon, arguments));\n            },\n\n            mock: function mock() {\n                return this.add(sinon.mock.apply(sinon, arguments));\n            },\n\n            inject: function inject(obj) {\n                var col = this;\n\n                obj.spy = function () {\n                    return col.spy.apply(col, arguments);\n                };\n\n                obj.stub = function () {\n                    return col.stub.apply(col, arguments);\n                };\n\n                obj.mock = function () {\n                    return col.mock.apply(col, arguments);\n                };\n\n                return obj;\n            }\n        };\n\n        sinon.collection = collection;\n        return collection;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./mock\");\n        require(\"./spy\");\n        require(\"./stub\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * Fake timer API\n * setTimeout\n * setInterval\n * clearTimeout\n * clearInterval\n * tick\n * reset\n * Date\n *\n * Inspired by jsUnitMockTimeOut from JsUnit\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function () {\n\n    function makeApi(s, lol) {\n        /*global lolex */\n        var llx = typeof lolex !== \"undefined\" ? lolex : lol;\n\n        s.useFakeTimers = function () {\n            var now;\n            var methods = Array.prototype.slice.call(arguments);\n\n            if (typeof methods[0] === \"string\") {\n                now = 0;\n            } else {\n                now = methods.shift();\n            }\n\n            var clock = llx.install(now || 0, methods);\n            clock.restore = clock.uninstall;\n            return clock;\n        };\n\n        s.clock = {\n            create: function (now) {\n                return llx.createClock(now);\n            }\n        };\n\n        s.timers = {\n            setTimeout: setTimeout,\n            clearTimeout: clearTimeout,\n            setImmediate: (typeof setImmediate !== \"undefined\" ? setImmediate : undefined),\n            clearImmediate: (typeof clearImmediate !== \"undefined\" ? clearImmediate : undefined),\n            setInterval: setInterval,\n            clearInterval: clearInterval,\n            Date: Date\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, epxorts, module, lolex) {\n        var core = require(\"./core\");\n        makeApi(core, lolex);\n        module.exports = core;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module, require(\"lolex\"));\n    } else {\n        makeApi(sinon); // eslint-disable-line no-undef\n    }\n}());\n\n/**\n * Minimal Event interface implementation\n *\n * Original implementation by Sven Fuchs: https://gist.github.com/995028\n * Modifications and tests by Christian Johansen.\n *\n * @author Sven Fuchs (svenfuchs@artweb-design.de)\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2011 Sven Fuchs, Christian Johansen\n */\nif (typeof sinon === \"undefined\") {\n    this.sinon = {};\n}\n\n(function () {\n\n    var push = [].push;\n\n    function makeApi(sinon) {\n        sinon.Event = function Event(type, bubbles, cancelable, target) {\n            this.initEvent(type, bubbles, cancelable, target);\n        };\n\n        sinon.Event.prototype = {\n            initEvent: function (type, bubbles, cancelable, target) {\n                this.type = type;\n                this.bubbles = bubbles;\n                this.cancelable = cancelable;\n                this.target = target;\n            },\n\n            stopPropagation: function () {},\n\n            preventDefault: function () {\n                this.defaultPrevented = true;\n            }\n        };\n\n        sinon.ProgressEvent = function ProgressEvent(type, progressEventRaw, target) {\n            this.initEvent(type, false, false, target);\n            this.loaded = progressEventRaw.loaded || null;\n            this.total = progressEventRaw.total || null;\n            this.lengthComputable = !!progressEventRaw.total;\n        };\n\n        sinon.ProgressEvent.prototype = new sinon.Event();\n\n        sinon.ProgressEvent.prototype.constructor = sinon.ProgressEvent;\n\n        sinon.CustomEvent = function CustomEvent(type, customData, target) {\n            this.initEvent(type, false, false, target);\n            this.detail = customData.detail || null;\n        };\n\n        sinon.CustomEvent.prototype = new sinon.Event();\n\n        sinon.CustomEvent.prototype.constructor = sinon.CustomEvent;\n\n        sinon.EventTarget = {\n            addEventListener: function addEventListener(event, listener) {\n                this.eventListeners = this.eventListeners || {};\n                this.eventListeners[event] = this.eventListeners[event] || [];\n                push.call(this.eventListeners[event], listener);\n            },\n\n            removeEventListener: function removeEventListener(event, listener) {\n                var listeners = this.eventListeners && this.eventListeners[event] || [];\n\n                for (var i = 0, l = listeners.length; i < l; ++i) {\n                    if (listeners[i] === listener) {\n                        return listeners.splice(i, 1);\n                    }\n                }\n            },\n\n            dispatchEvent: function dispatchEvent(event) {\n                var type = event.type;\n                var listeners = this.eventListeners && this.eventListeners[type] || [];\n\n                for (var i = 0; i < listeners.length; i++) {\n                    if (typeof listeners[i] === \"function\") {\n                        listeners[i].call(this, event);\n                    } else {\n                        listeners[i].handleEvent(event);\n                    }\n                }\n\n                return !!event.defaultPrevented;\n            }\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require) {\n        var sinon = require(\"./core\");\n        makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require);\n    } else {\n        makeApi(sinon); // eslint-disable-line no-undef\n    }\n}());\n\n/**\n * @depend util/core.js\n */\n/**\n * Logs errors\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2014 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    // cache a reference to setTimeout, so that our reference won't be stubbed out\n    // when using fake timers and errors will still get logged\n    // https://github.com/cjohansen/Sinon.JS/issues/381\n    var realSetTimeout = setTimeout;\n\n    function makeApi(sinon) {\n\n        function log() {}\n\n        function logError(label, err) {\n            var msg = label + \" threw exception: \";\n\n            function throwLoggedError() {\n                err.message = msg + err.message;\n                throw err;\n            }\n\n            sinon.log(msg + \"[\" + err.name + \"] \" + err.message);\n\n            if (err.stack) {\n                sinon.log(err.stack);\n            }\n\n            if (logError.useImmediateExceptions) {\n                throwLoggedError();\n            } else {\n                logError.setTimeout(throwLoggedError, 0);\n            }\n        }\n\n        // When set to true, any errors logged will be thrown immediately;\n        // If set to false, the errors will be thrown in separate execution frame.\n        logError.useImmediateExceptions = false;\n\n        // wrap realSetTimeout with something we can stub in tests\n        logError.setTimeout = function (func, timeout) {\n            realSetTimeout(func, timeout);\n        };\n\n        var exports = {};\n        exports.log = sinon.log = log;\n        exports.logError = sinon.logError = logError;\n\n        return exports;\n    }\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        module.exports = makeApi(sinon);\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend core.js\n * @depend ../extend.js\n * @depend event.js\n * @depend ../log_error.js\n */\n/**\n * Fake XDomainRequest object\n */\n\n/**\n * Returns the global to prevent assigning values to 'this' when this is undefined.\n * This can occur when files are interpreted by node in strict mode.\n * @private\n */\nfunction getGlobal() {\n\n    return typeof window !== \"undefined\" ? window : global;\n}\n\nif (typeof sinon === \"undefined\") {\n    if (typeof this === \"undefined\") {\n        getGlobal().sinon = {};\n    } else {\n        this.sinon = {};\n    }\n}\n\n// wrapper for global\n(function (global) {\n\n    var xdr = { XDomainRequest: global.XDomainRequest };\n    xdr.GlobalXDomainRequest = global.XDomainRequest;\n    xdr.supportsXDR = typeof xdr.GlobalXDomainRequest !== \"undefined\";\n    xdr.workingXDR = xdr.supportsXDR ? xdr.GlobalXDomainRequest : false;\n\n    function makeApi(sinon) {\n        sinon.xdr = xdr;\n\n        function FakeXDomainRequest() {\n            this.readyState = FakeXDomainRequest.UNSENT;\n            this.requestBody = null;\n            this.requestHeaders = {};\n            this.status = 0;\n            this.timeout = null;\n\n            if (typeof FakeXDomainRequest.onCreate === \"function\") {\n                FakeXDomainRequest.onCreate(this);\n            }\n        }\n\n        function verifyState(x) {\n            if (x.readyState !== FakeXDomainRequest.OPENED) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n\n            if (x.sendFlag) {\n                throw new Error(\"INVALID_STATE_ERR\");\n            }\n        }\n\n        function verifyRequestSent(x) {\n            if (x.readyState === FakeXDomainRequest.UNSENT) {\n                throw new Error(\"Request not sent\");\n            }\n            if (x.readyState === FakeXDomainRequest.DONE) {\n                throw new Error(\"Request done\");\n            }\n        }\n\n        function verifyResponseBodyType(body) {\n            if (typeof body !== \"string\") {\n                var error = new Error(\"Attempted to respond to fake XDomainRequest with \" +\n                                    body + \", which is not a string.\");\n                error.name = \"InvalidBodyException\";\n                throw error;\n            }\n        }\n\n        sinon.extend(FakeXDomainRequest.prototype, sinon.EventTarget, {\n            open: function open(method, url) {\n                this.method = method;\n                this.url = url;\n\n                this.responseText = null;\n                this.sendFlag = false;\n\n                this.readyStateChange(FakeXDomainRequest.OPENED);\n            },\n\n            readyStateChange: function readyStateChange(state) {\n                this.readyState = state;\n                var eventName = \"\";\n                switch (this.readyState) {\n                case FakeXDomainRequest.UNSENT:\n                    break;\n                case FakeXDomainRequest.OPENED:\n                    break;\n                case FakeXDomainRequest.LOADING:\n                    if (this.sendFlag) {\n                        //raise the progress event\n                        eventName = \"onprogress\";\n                    }\n                    break;\n                case FakeXDomainRequest.DONE:\n                    if (this.isTimeout) {\n                        eventName = \"ontimeout\";\n                    } else if (this.errorFlag || (this.status < 200 || this.status > 299)) {\n                        eventName = \"onerror\";\n                    } else {\n                        eventName = \"onload\";\n                    }\n                    break;\n                }\n\n                // raising event (if defined)\n                if (eventName) {\n                    if (typeof this[eventName] === \"function\") {\n                        try {\n                            this[eventName]();\n                        } catch (e) {\n                            sinon.logError(\"Fake XHR \" + eventName + \" handler\", e);\n                        }\n                    }\n                }\n            },\n\n            send: function send(data) {\n                verifyState(this);\n\n                if (!/^(get|head)$/i.test(this.method)) {\n                    this.requestBody = data;\n                }\n                this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n\n                this.errorFlag = false;\n                this.sendFlag = true;\n                this.readyStateChange(FakeXDomainRequest.OPENED);\n\n                if (typeof this.onSend === \"function\") {\n                    this.onSend(this);\n                }\n            },\n\n            abort: function abort() {\n                this.aborted = true;\n                this.responseText = null;\n                this.errorFlag = true;\n\n                if (this.readyState > sinon.FakeXDomainRequest.UNSENT && this.sendFlag) {\n                    this.readyStateChange(sinon.FakeXDomainRequest.DONE);\n                    this.sendFlag = false;\n                }\n            },\n\n            setResponseBody: function setResponseBody(body) {\n                verifyRequestSent(this);\n                verifyResponseBodyType(body);\n\n                var chunkSize = this.chunkSize || 10;\n                var index = 0;\n                this.responseText = \"\";\n\n                do {\n                    this.readyStateChange(FakeXDomainRequest.LOADING);\n                    this.responseText += body.substring(index, index + chunkSize);\n                    index += chunkSize;\n                } while (index < body.length);\n\n                this.readyStateChange(FakeXDomainRequest.DONE);\n            },\n\n            respond: function respond(status, contentType, body) {\n                // content-type ignored, since XDomainRequest does not carry this\n                // we keep the same syntax for respond(...) as for FakeXMLHttpRequest to ease\n                // test integration across browsers\n                this.status = typeof status === \"number\" ? status : 200;\n                this.setResponseBody(body || \"\");\n            },\n\n            simulatetimeout: function simulatetimeout() {\n                this.status = 0;\n                this.isTimeout = true;\n                // Access to this should actually throw an error\n                this.responseText = undefined;\n                this.readyStateChange(FakeXDomainRequest.DONE);\n            }\n        });\n\n        sinon.extend(FakeXDomainRequest, {\n            UNSENT: 0,\n            OPENED: 1,\n            LOADING: 3,\n            DONE: 4\n        });\n\n        sinon.useFakeXDomainRequest = function useFakeXDomainRequest() {\n            sinon.FakeXDomainRequest.restore = function restore(keepOnCreate) {\n                if (xdr.supportsXDR) {\n                    global.XDomainRequest = xdr.GlobalXDomainRequest;\n                }\n\n                delete sinon.FakeXDomainRequest.restore;\n\n                if (keepOnCreate !== true) {\n                    delete sinon.FakeXDomainRequest.onCreate;\n                }\n            };\n            if (xdr.supportsXDR) {\n                global.XDomainRequest = sinon.FakeXDomainRequest;\n            }\n            return sinon.FakeXDomainRequest;\n        };\n\n        sinon.FakeXDomainRequest = FakeXDomainRequest;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"../extend\");\n        require(\"./event\");\n        require(\"../log_error\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else {\n        makeApi(sinon); // eslint-disable-line no-undef\n    }\n})(typeof global !== \"undefined\" ? global : self);\n\n/**\n * @depend core.js\n * @depend ../extend.js\n * @depend event.js\n * @depend ../log_error.js\n */\n/**\n * Fake XMLHttpRequest object\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal, global) {\n\n    function getWorkingXHR(globalScope) {\n        var supportsXHR = typeof globalScope.XMLHttpRequest !== \"undefined\";\n        if (supportsXHR) {\n            return globalScope.XMLHttpRequest;\n        }\n\n        var supportsActiveX = typeof globalScope.ActiveXObject !== \"undefined\";\n        if (supportsActiveX) {\n            return function () {\n                return new globalScope.ActiveXObject(\"MSXML2.XMLHTTP.3.0\");\n            };\n        }\n\n        return false;\n    }\n\n    var supportsProgress = typeof ProgressEvent !== \"undefined\";\n    var supportsCustomEvent = typeof CustomEvent !== \"undefined\";\n    var supportsFormData = typeof FormData !== \"undefined\";\n    var supportsArrayBuffer = typeof ArrayBuffer !== \"undefined\";\n    var supportsBlob = typeof Blob === \"function\";\n    var sinonXhr = { XMLHttpRequest: global.XMLHttpRequest };\n    sinonXhr.GlobalXMLHttpRequest = global.XMLHttpRequest;\n    sinonXhr.GlobalActiveXObject = global.ActiveXObject;\n    sinonXhr.supportsActiveX = typeof sinonXhr.GlobalActiveXObject !== \"undefined\";\n    sinonXhr.supportsXHR = typeof sinonXhr.GlobalXMLHttpRequest !== \"undefined\";\n    sinonXhr.workingXHR = getWorkingXHR(global);\n    sinonXhr.supportsCORS = sinonXhr.supportsXHR && \"withCredentials\" in (new sinonXhr.GlobalXMLHttpRequest());\n\n    var unsafeHeaders = {\n        \"Accept-Charset\": true,\n        \"Accept-Encoding\": true,\n        Connection: true,\n        \"Content-Length\": true,\n        Cookie: true,\n        Cookie2: true,\n        \"Content-Transfer-Encoding\": true,\n        Date: true,\n        Expect: true,\n        Host: true,\n        \"Keep-Alive\": true,\n        Referer: true,\n        TE: true,\n        Trailer: true,\n        \"Transfer-Encoding\": true,\n        Upgrade: true,\n        \"User-Agent\": true,\n        Via: true\n    };\n\n    // An upload object is created for each\n    // FakeXMLHttpRequest and allows upload\n    // events to be simulated using uploadProgress\n    // and uploadError.\n    function UploadProgress() {\n        this.eventListeners = {\n            progress: [],\n            load: [],\n            abort: [],\n            error: []\n        };\n    }\n\n    UploadProgress.prototype.addEventListener = function addEventListener(event, listener) {\n        this.eventListeners[event].push(listener);\n    };\n\n    UploadProgress.prototype.removeEventListener = function removeEventListener(event, listener) {\n        var listeners = this.eventListeners[event] || [];\n\n        for (var i = 0, l = listeners.length; i < l; ++i) {\n            if (listeners[i] === listener) {\n                return listeners.splice(i, 1);\n            }\n        }\n    };\n\n    UploadProgress.prototype.dispatchEvent = function dispatchEvent(event) {\n        var listeners = this.eventListeners[event.type] || [];\n\n        for (var i = 0, listener; (listener = listeners[i]) != null; i++) {\n            listener(event);\n        }\n    };\n\n    // Note that for FakeXMLHttpRequest to work pre ES5\n    // we lose some of the alignment with the spec.\n    // To ensure as close a match as possible,\n    // set responseType before calling open, send or respond;\n    function FakeXMLHttpRequest() {\n        this.readyState = FakeXMLHttpRequest.UNSENT;\n        this.requestHeaders = {};\n        this.requestBody = null;\n        this.status = 0;\n        this.statusText = \"\";\n        this.upload = new UploadProgress();\n        this.responseType = \"\";\n        this.response = \"\";\n        if (sinonXhr.supportsCORS) {\n            this.withCredentials = false;\n        }\n\n        var xhr = this;\n        var events = [\"loadstart\", \"load\", \"abort\", \"loadend\"];\n\n        function addEventListener(eventName) {\n            xhr.addEventListener(eventName, function (event) {\n                var listener = xhr[\"on\" + eventName];\n\n                if (listener && typeof listener === \"function\") {\n                    listener.call(this, event);\n                }\n            });\n        }\n\n        for (var i = events.length - 1; i >= 0; i--) {\n            addEventListener(events[i]);\n        }\n\n        if (typeof FakeXMLHttpRequest.onCreate === \"function\") {\n            FakeXMLHttpRequest.onCreate(this);\n        }\n    }\n\n    function verifyState(xhr) {\n        if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n\n        if (xhr.sendFlag) {\n            throw new Error(\"INVALID_STATE_ERR\");\n        }\n    }\n\n    function getHeader(headers, header) {\n        header = header.toLowerCase();\n\n        for (var h in headers) {\n            if (h.toLowerCase() === header) {\n                return h;\n            }\n        }\n\n        return null;\n    }\n\n    // filtering to enable a white-list version of Sinon FakeXhr,\n    // where whitelisted requests are passed through to real XHR\n    function each(collection, callback) {\n        if (!collection) {\n            return;\n        }\n\n        for (var i = 0, l = collection.length; i < l; i += 1) {\n            callback(collection[i]);\n        }\n    }\n    function some(collection, callback) {\n        for (var index = 0; index < collection.length; index++) {\n            if (callback(collection[index]) === true) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // largest arity in XHR is 5 - XHR#open\n    var apply = function (obj, method, args) {\n        switch (args.length) {\n        case 0: return obj[method]();\n        case 1: return obj[method](args[0]);\n        case 2: return obj[method](args[0], args[1]);\n        case 3: return obj[method](args[0], args[1], args[2]);\n        case 4: return obj[method](args[0], args[1], args[2], args[3]);\n        case 5: return obj[method](args[0], args[1], args[2], args[3], args[4]);\n        }\n    };\n\n    FakeXMLHttpRequest.filters = [];\n    FakeXMLHttpRequest.addFilter = function addFilter(fn) {\n        this.filters.push(fn);\n    };\n    var IE6Re = /MSIE 6/;\n    FakeXMLHttpRequest.defake = function defake(fakeXhr, xhrArgs) {\n        var xhr = new sinonXhr.workingXHR(); // eslint-disable-line new-cap\n\n        each([\n            \"open\",\n            \"setRequestHeader\",\n            \"send\",\n            \"abort\",\n            \"getResponseHeader\",\n            \"getAllResponseHeaders\",\n            \"addEventListener\",\n            \"overrideMimeType\",\n            \"removeEventListener\"\n        ], function (method) {\n            fakeXhr[method] = function () {\n                return apply(xhr, method, arguments);\n            };\n        });\n\n        var copyAttrs = function (args) {\n            each(args, function (attr) {\n                try {\n                    fakeXhr[attr] = xhr[attr];\n                } catch (e) {\n                    if (!IE6Re.test(navigator.userAgent)) {\n                        throw e;\n                    }\n                }\n            });\n        };\n\n        var stateChange = function stateChange() {\n            fakeXhr.readyState = xhr.readyState;\n            if (xhr.readyState >= FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                copyAttrs([\"status\", \"statusText\"]);\n            }\n            if (xhr.readyState >= FakeXMLHttpRequest.LOADING) {\n                copyAttrs([\"responseText\", \"response\"]);\n            }\n            if (xhr.readyState === FakeXMLHttpRequest.DONE) {\n                copyAttrs([\"responseXML\"]);\n            }\n            if (fakeXhr.onreadystatechange) {\n                fakeXhr.onreadystatechange.call(fakeXhr, { target: fakeXhr });\n            }\n        };\n\n        if (xhr.addEventListener) {\n            for (var event in fakeXhr.eventListeners) {\n                if (fakeXhr.eventListeners.hasOwnProperty(event)) {\n\n                    /*eslint-disable no-loop-func*/\n                    each(fakeXhr.eventListeners[event], function (handler) {\n                        xhr.addEventListener(event, handler);\n                    });\n                    /*eslint-enable no-loop-func*/\n                }\n            }\n            xhr.addEventListener(\"readystatechange\", stateChange);\n        } else {\n            xhr.onreadystatechange = stateChange;\n        }\n        apply(xhr, \"open\", xhrArgs);\n    };\n    FakeXMLHttpRequest.useFilters = false;\n\n    function verifyRequestOpened(xhr) {\n        if (xhr.readyState !== FakeXMLHttpRequest.OPENED) {\n            throw new Error(\"INVALID_STATE_ERR - \" + xhr.readyState);\n        }\n    }\n\n    function verifyRequestSent(xhr) {\n        if (xhr.readyState === FakeXMLHttpRequest.DONE) {\n            throw new Error(\"Request done\");\n        }\n    }\n\n    function verifyHeadersReceived(xhr) {\n        if (xhr.async && xhr.readyState !== FakeXMLHttpRequest.HEADERS_RECEIVED) {\n            throw new Error(\"No headers received\");\n        }\n    }\n\n    function verifyResponseBodyType(body) {\n        if (typeof body !== \"string\") {\n            var error = new Error(\"Attempted to respond to fake XMLHttpRequest with \" +\n                                 body + \", which is not a string.\");\n            error.name = \"InvalidBodyException\";\n            throw error;\n        }\n    }\n\n    function convertToArrayBuffer(body) {\n        var buffer = new ArrayBuffer(body.length);\n        var view = new Uint8Array(buffer);\n        for (var i = 0; i < body.length; i++) {\n            var charCode = body.charCodeAt(i);\n            if (charCode >= 256) {\n                throw new TypeError(\"arraybuffer or blob responseTypes require binary string, \" +\n                                    \"invalid character \" + body[i] + \" found.\");\n            }\n            view[i] = charCode;\n        }\n        return buffer;\n    }\n\n    function isXmlContentType(contentType) {\n        return !contentType || /(text\\/xml)|(application\\/xml)|(\\+xml)/.test(contentType);\n    }\n\n    function convertResponseBody(responseType, contentType, body) {\n        if (responseType === \"\" || responseType === \"text\") {\n            return body;\n        } else if (supportsArrayBuffer && responseType === \"arraybuffer\") {\n            return convertToArrayBuffer(body);\n        } else if (responseType === \"json\") {\n            try {\n                return JSON.parse(body);\n            } catch (e) {\n                // Return parsing failure as null\n                return null;\n            }\n        } else if (supportsBlob && responseType === \"blob\") {\n            var blobOptions = {};\n            if (contentType) {\n                blobOptions.type = contentType;\n            }\n            return new Blob([convertToArrayBuffer(body)], blobOptions);\n        } else if (responseType === \"document\") {\n            if (isXmlContentType(contentType)) {\n                return FakeXMLHttpRequest.parseXML(body);\n            }\n            return null;\n        }\n        throw new Error(\"Invalid responseType \" + responseType);\n    }\n\n    function clearResponse(xhr) {\n        if (xhr.responseType === \"\" || xhr.responseType === \"text\") {\n            xhr.response = xhr.responseText = \"\";\n        } else {\n            xhr.response = xhr.responseText = null;\n        }\n        xhr.responseXML = null;\n    }\n\n    FakeXMLHttpRequest.parseXML = function parseXML(text) {\n        // Treat empty string as parsing failure\n        if (text !== \"\") {\n            try {\n                if (typeof DOMParser !== \"undefined\") {\n                    var parser = new DOMParser();\n                    return parser.parseFromString(text, \"text/xml\");\n                }\n                var xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                xmlDoc.async = \"false\";\n                xmlDoc.loadXML(text);\n                return xmlDoc;\n            } catch (e) {\n                // Unable to parse XML - no biggie\n            }\n        }\n\n        return null;\n    };\n\n    FakeXMLHttpRequest.statusCodes = {\n        100: \"Continue\",\n        101: \"Switching Protocols\",\n        200: \"OK\",\n        201: \"Created\",\n        202: \"Accepted\",\n        203: \"Non-Authoritative Information\",\n        204: \"No Content\",\n        205: \"Reset Content\",\n        206: \"Partial Content\",\n        207: \"Multi-Status\",\n        300: \"Multiple Choice\",\n        301: \"Moved Permanently\",\n        302: \"Found\",\n        303: \"See Other\",\n        304: \"Not Modified\",\n        305: \"Use Proxy\",\n        307: \"Temporary Redirect\",\n        400: \"Bad Request\",\n        401: \"Unauthorized\",\n        402: \"Payment Required\",\n        403: \"Forbidden\",\n        404: \"Not Found\",\n        405: \"Method Not Allowed\",\n        406: \"Not Acceptable\",\n        407: \"Proxy Authentication Required\",\n        408: \"Request Timeout\",\n        409: \"Conflict\",\n        410: \"Gone\",\n        411: \"Length Required\",\n        412: \"Precondition Failed\",\n        413: \"Request Entity Too Large\",\n        414: \"Request-URI Too Long\",\n        415: \"Unsupported Media Type\",\n        416: \"Requested Range Not Satisfiable\",\n        417: \"Expectation Failed\",\n        422: \"Unprocessable Entity\",\n        500: \"Internal Server Error\",\n        501: \"Not Implemented\",\n        502: \"Bad Gateway\",\n        503: \"Service Unavailable\",\n        504: \"Gateway Timeout\",\n        505: \"HTTP Version Not Supported\"\n    };\n\n    function makeApi(sinon) {\n        sinon.xhr = sinonXhr;\n\n        sinon.extend(FakeXMLHttpRequest.prototype, sinon.EventTarget, {\n            async: true,\n\n            open: function open(method, url, async, username, password) {\n                this.method = method;\n                this.url = url;\n                this.async = typeof async === \"boolean\" ? async : true;\n                this.username = username;\n                this.password = password;\n                clearResponse(this);\n                this.requestHeaders = {};\n                this.sendFlag = false;\n\n                if (FakeXMLHttpRequest.useFilters === true) {\n                    var xhrArgs = arguments;\n                    var defake = some(FakeXMLHttpRequest.filters, function (filter) {\n                        return filter.apply(this, xhrArgs);\n                    });\n                    if (defake) {\n                        return FakeXMLHttpRequest.defake(this, arguments);\n                    }\n                }\n                this.readyStateChange(FakeXMLHttpRequest.OPENED);\n            },\n\n            readyStateChange: function readyStateChange(state) {\n                this.readyState = state;\n\n                var readyStateChangeEvent = new sinon.Event(\"readystatechange\", false, false, this);\n\n                if (typeof this.onreadystatechange === \"function\") {\n                    try {\n                        this.onreadystatechange(readyStateChangeEvent);\n                    } catch (e) {\n                        sinon.logError(\"Fake XHR onreadystatechange handler\", e);\n                    }\n                }\n\n                switch (this.readyState) {\n                    case FakeXMLHttpRequest.DONE:\n                        if (supportsProgress) {\n                            this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", {loaded: 100, total: 100}));\n                            this.dispatchEvent(new sinon.ProgressEvent(\"progress\", {loaded: 100, total: 100}));\n                        }\n                        this.upload.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                        this.dispatchEvent(new sinon.Event(\"load\", false, false, this));\n                        this.dispatchEvent(new sinon.Event(\"loadend\", false, false, this));\n                        break;\n                }\n\n                this.dispatchEvent(readyStateChangeEvent);\n            },\n\n            setRequestHeader: function setRequestHeader(header, value) {\n                verifyState(this);\n\n                if (unsafeHeaders[header] || /^(Sec-|Proxy-)/.test(header)) {\n                    throw new Error(\"Refused to set unsafe header \\\"\" + header + \"\\\"\");\n                }\n\n                if (this.requestHeaders[header]) {\n                    this.requestHeaders[header] += \",\" + value;\n                } else {\n                    this.requestHeaders[header] = value;\n                }\n            },\n\n            // Helps testing\n            setResponseHeaders: function setResponseHeaders(headers) {\n                verifyRequestOpened(this);\n                this.responseHeaders = {};\n\n                for (var header in headers) {\n                    if (headers.hasOwnProperty(header)) {\n                        this.responseHeaders[header] = headers[header];\n                    }\n                }\n\n                if (this.async) {\n                    this.readyStateChange(FakeXMLHttpRequest.HEADERS_RECEIVED);\n                } else {\n                    this.readyState = FakeXMLHttpRequest.HEADERS_RECEIVED;\n                }\n            },\n\n            // Currently treats ALL data as a DOMString (i.e. no Document)\n            send: function send(data) {\n                verifyState(this);\n\n                if (!/^(get|head)$/i.test(this.method)) {\n                    var contentType = getHeader(this.requestHeaders, \"Content-Type\");\n                    if (this.requestHeaders[contentType]) {\n                        var value = this.requestHeaders[contentType].split(\";\");\n                        this.requestHeaders[contentType] = value[0] + \";charset=utf-8\";\n                    } else if (supportsFormData && !(data instanceof FormData)) {\n                        this.requestHeaders[\"Content-Type\"] = \"text/plain;charset=utf-8\";\n                    }\n\n                    this.requestBody = data;\n                }\n\n                this.errorFlag = false;\n                this.sendFlag = this.async;\n                clearResponse(this);\n                this.readyStateChange(FakeXMLHttpRequest.OPENED);\n\n                if (typeof this.onSend === \"function\") {\n                    this.onSend(this);\n                }\n\n                this.dispatchEvent(new sinon.Event(\"loadstart\", false, false, this));\n            },\n\n            abort: function abort() {\n                this.aborted = true;\n                clearResponse(this);\n                this.errorFlag = true;\n                this.requestHeaders = {};\n                this.responseHeaders = {};\n\n                if (this.readyState > FakeXMLHttpRequest.UNSENT && this.sendFlag) {\n                    this.readyStateChange(FakeXMLHttpRequest.DONE);\n                    this.sendFlag = false;\n                }\n\n                this.readyState = FakeXMLHttpRequest.UNSENT;\n\n                this.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n                this.upload.dispatchEvent(new sinon.Event(\"abort\", false, false, this));\n\n                if (typeof this.onerror === \"function\") {\n                    this.onerror();\n                }\n            },\n\n            getResponseHeader: function getResponseHeader(header) {\n                if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                    return null;\n                }\n\n                if (/^Set-Cookie2?$/i.test(header)) {\n                    return null;\n                }\n\n                header = getHeader(this.responseHeaders, header);\n\n                return this.responseHeaders[header] || null;\n            },\n\n            getAllResponseHeaders: function getAllResponseHeaders() {\n                if (this.readyState < FakeXMLHttpRequest.HEADERS_RECEIVED) {\n                    return \"\";\n                }\n\n                var headers = \"\";\n\n                for (var header in this.responseHeaders) {\n                    if (this.responseHeaders.hasOwnProperty(header) &&\n                        !/^Set-Cookie2?$/i.test(header)) {\n                        headers += header + \": \" + this.responseHeaders[header] + \"\\r\\n\";\n                    }\n                }\n\n                return headers;\n            },\n\n            setResponseBody: function setResponseBody(body) {\n                verifyRequestSent(this);\n                verifyHeadersReceived(this);\n                verifyResponseBodyType(body);\n                var contentType = this.getResponseHeader(\"Content-Type\");\n\n                var isTextResponse = this.responseType === \"\" || this.responseType === \"text\";\n                clearResponse(this);\n                if (this.async) {\n                    var chunkSize = this.chunkSize || 10;\n                    var index = 0;\n\n                    do {\n                        this.readyStateChange(FakeXMLHttpRequest.LOADING);\n\n                        if (isTextResponse) {\n                            this.responseText = this.response += body.substring(index, index + chunkSize);\n                        }\n                        index += chunkSize;\n                    } while (index < body.length);\n                }\n\n                this.response = convertResponseBody(this.responseType, contentType, body);\n                if (isTextResponse) {\n                    this.responseText = this.response;\n                }\n\n                if (this.responseType === \"document\") {\n                    this.responseXML = this.response;\n                } else if (this.responseType === \"\" && isXmlContentType(contentType)) {\n                    this.responseXML = FakeXMLHttpRequest.parseXML(this.responseText);\n                }\n                this.readyStateChange(FakeXMLHttpRequest.DONE);\n            },\n\n            respond: function respond(status, headers, body) {\n                this.status = typeof status === \"number\" ? status : 200;\n                this.statusText = FakeXMLHttpRequest.statusCodes[this.status];\n                this.setResponseHeaders(headers || {});\n                this.setResponseBody(body || \"\");\n            },\n\n            uploadProgress: function uploadProgress(progressEventRaw) {\n                if (supportsProgress) {\n                    this.upload.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                }\n            },\n\n            downloadProgress: function downloadProgress(progressEventRaw) {\n                if (supportsProgress) {\n                    this.dispatchEvent(new sinon.ProgressEvent(\"progress\", progressEventRaw));\n                }\n            },\n\n            uploadError: function uploadError(error) {\n                if (supportsCustomEvent) {\n                    this.upload.dispatchEvent(new sinon.CustomEvent(\"error\", {detail: error}));\n                }\n            }\n        });\n\n        sinon.extend(FakeXMLHttpRequest, {\n            UNSENT: 0,\n            OPENED: 1,\n            HEADERS_RECEIVED: 2,\n            LOADING: 3,\n            DONE: 4\n        });\n\n        sinon.useFakeXMLHttpRequest = function () {\n            FakeXMLHttpRequest.restore = function restore(keepOnCreate) {\n                if (sinonXhr.supportsXHR) {\n                    global.XMLHttpRequest = sinonXhr.GlobalXMLHttpRequest;\n                }\n\n                if (sinonXhr.supportsActiveX) {\n                    global.ActiveXObject = sinonXhr.GlobalActiveXObject;\n                }\n\n                delete FakeXMLHttpRequest.restore;\n\n                if (keepOnCreate !== true) {\n                    delete FakeXMLHttpRequest.onCreate;\n                }\n            };\n            if (sinonXhr.supportsXHR) {\n                global.XMLHttpRequest = FakeXMLHttpRequest;\n            }\n\n            if (sinonXhr.supportsActiveX) {\n                global.ActiveXObject = function ActiveXObject(objId) {\n                    if (objId === \"Microsoft.XMLHTTP\" || /^Msxml2\\.XMLHTTP/i.test(objId)) {\n\n                        return new FakeXMLHttpRequest();\n                    }\n\n                    return new sinonXhr.GlobalActiveXObject(objId);\n                };\n            }\n\n            return FakeXMLHttpRequest;\n        };\n\n        sinon.FakeXMLHttpRequest = FakeXMLHttpRequest;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"../extend\");\n        require(\"./event\");\n        require(\"../log_error\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon, // eslint-disable-line no-undef\n    typeof global !== \"undefined\" ? global : self\n));\n\n/**\n * @depend fake_xdomain_request.js\n * @depend fake_xml_http_request.js\n * @depend ../format.js\n * @depend ../log_error.js\n */\n/**\n * The Sinon \"server\" mimics a web server that receives requests from\n * sinon.FakeXMLHttpRequest and provides an API to respond to those requests,\n * both synchronously and asynchronously. To respond synchronuously, canned\n * answers have to be provided upfront.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function () {\n\n    var push = [].push;\n\n    function responseArray(handler) {\n        var response = handler;\n\n        if (Object.prototype.toString.call(handler) !== \"[object Array]\") {\n            response = [200, {}, handler];\n        }\n\n        if (typeof response[2] !== \"string\") {\n            throw new TypeError(\"Fake server response body should be string, but was \" +\n                                typeof response[2]);\n        }\n\n        return response;\n    }\n\n    var wloc = typeof window !== \"undefined\" ? window.location : {};\n    var rCurrLoc = new RegExp(\"^\" + wloc.protocol + \"//\" + wloc.host);\n\n    function matchOne(response, reqMethod, reqUrl) {\n        var rmeth = response.method;\n        var matchMethod = !rmeth || rmeth.toLowerCase() === reqMethod.toLowerCase();\n        var url = response.url;\n        var matchUrl = !url || url === reqUrl || (typeof url.test === \"function\" && url.test(reqUrl));\n\n        return matchMethod && matchUrl;\n    }\n\n    function match(response, request) {\n        var requestUrl = request.url;\n\n        if (!/^https?:\\/\\//.test(requestUrl) || rCurrLoc.test(requestUrl)) {\n            requestUrl = requestUrl.replace(rCurrLoc, \"\");\n        }\n\n        if (matchOne(response, this.getHTTPMethod(request), requestUrl)) {\n            if (typeof response.response === \"function\") {\n                var ru = response.url;\n                var args = [request].concat(ru && typeof ru.exec === \"function\" ? ru.exec(requestUrl).slice(1) : []);\n                return response.response.apply(response, args);\n            }\n\n            return true;\n        }\n\n        return false;\n    }\n\n    function makeApi(sinon) {\n        sinon.fakeServer = {\n            create: function (config) {\n                var server = sinon.create(this);\n                server.configure(config);\n                if (!sinon.xhr.supportsCORS) {\n                    this.xhr = sinon.useFakeXDomainRequest();\n                } else {\n                    this.xhr = sinon.useFakeXMLHttpRequest();\n                }\n                server.requests = [];\n\n                this.xhr.onCreate = function (xhrObj) {\n                    server.addRequest(xhrObj);\n                };\n\n                return server;\n            },\n            configure: function (config) {\n                var whitelist = {\n                    \"autoRespond\": true,\n                    \"autoRespondAfter\": true,\n                    \"respondImmediately\": true,\n                    \"fakeHTTPMethods\": true\n                };\n                var setting;\n\n                config = config || {};\n                for (setting in config) {\n                    if (whitelist.hasOwnProperty(setting) && config.hasOwnProperty(setting)) {\n                        this[setting] = config[setting];\n                    }\n                }\n            },\n            addRequest: function addRequest(xhrObj) {\n                var server = this;\n                push.call(this.requests, xhrObj);\n\n                xhrObj.onSend = function () {\n                    server.handleRequest(this);\n\n                    if (server.respondImmediately) {\n                        server.respond();\n                    } else if (server.autoRespond && !server.responding) {\n                        setTimeout(function () {\n                            server.responding = false;\n                            server.respond();\n                        }, server.autoRespondAfter || 10);\n\n                        server.responding = true;\n                    }\n                };\n            },\n\n            getHTTPMethod: function getHTTPMethod(request) {\n                if (this.fakeHTTPMethods && /post/i.test(request.method)) {\n                    var matches = (request.requestBody || \"\").match(/_method=([^\\b;]+)/);\n                    return matches ? matches[1] : request.method;\n                }\n\n                return request.method;\n            },\n\n            handleRequest: function handleRequest(xhr) {\n                if (xhr.async) {\n                    if (!this.queue) {\n                        this.queue = [];\n                    }\n\n                    push.call(this.queue, xhr);\n                } else {\n                    this.processRequest(xhr);\n                }\n            },\n\n            log: function log(response, request) {\n                var str;\n\n                str = \"Request:\\n\" + sinon.format(request) + \"\\n\\n\";\n                str += \"Response:\\n\" + sinon.format(response) + \"\\n\\n\";\n\n                sinon.log(str);\n            },\n\n            respondWith: function respondWith(method, url, body) {\n                if (arguments.length === 1 && typeof method !== \"function\") {\n                    this.response = responseArray(method);\n                    return;\n                }\n\n                if (!this.responses) {\n                    this.responses = [];\n                }\n\n                if (arguments.length === 1) {\n                    body = method;\n                    url = method = null;\n                }\n\n                if (arguments.length === 2) {\n                    body = url;\n                    url = method;\n                    method = null;\n                }\n\n                push.call(this.responses, {\n                    method: method,\n                    url: url,\n                    response: typeof body === \"function\" ? body : responseArray(body)\n                });\n            },\n\n            respond: function respond() {\n                if (arguments.length > 0) {\n                    this.respondWith.apply(this, arguments);\n                }\n\n                var queue = this.queue || [];\n                var requests = queue.splice(0, queue.length);\n\n                for (var i = 0; i < requests.length; i++) {\n                    this.processRequest(requests[i]);\n                }\n            },\n\n            processRequest: function processRequest(request) {\n                try {\n                    if (request.aborted) {\n                        return;\n                    }\n\n                    var response = this.response || [404, {}, \"\"];\n\n                    if (this.responses) {\n                        for (var l = this.responses.length, i = l - 1; i >= 0; i--) {\n                            if (match.call(this, this.responses[i], request)) {\n                                response = this.responses[i].response;\n                                break;\n                            }\n                        }\n                    }\n\n                    if (request.readyState !== 4) {\n                        this.log(response, request);\n\n                        request.respond(response[0], response[1], response[2]);\n                    }\n                } catch (e) {\n                    sinon.logError(\"Fake server request processing\", e);\n                }\n            },\n\n            restore: function restore() {\n                return this.xhr.restore && this.xhr.restore.apply(this.xhr, arguments);\n            }\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./core\");\n        require(\"./fake_xdomain_request\");\n        require(\"./fake_xml_http_request\");\n        require(\"../format\");\n        makeApi(sinon);\n        module.exports = sinon;\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else {\n        makeApi(sinon); // eslint-disable-line no-undef\n    }\n}());\n\n/**\n * @depend fake_server.js\n * @depend fake_timers.js\n */\n/**\n * Add-on for sinon.fakeServer that automatically handles a fake timer along with\n * the FakeXMLHttpRequest. The direct inspiration for this add-on is jQuery\n * 1.3.x, which does not use xhr object's onreadystatehandler at all - instead,\n * it polls the object for completion with setInterval. Dispite the direct\n * motivation, there is nothing jQuery-specific in this file, so it can be used\n * in any environment where the ajax implementation depends on setInterval or\n * setTimeout.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function () {\n\n    function makeApi(sinon) {\n        function Server() {}\n        Server.prototype = sinon.fakeServer;\n\n        sinon.fakeServerWithClock = new Server();\n\n        sinon.fakeServerWithClock.addRequest = function addRequest(xhr) {\n            if (xhr.async) {\n                if (typeof setTimeout.clock === \"object\") {\n                    this.clock = setTimeout.clock;\n                } else {\n                    this.clock = sinon.useFakeTimers();\n                    this.resetClock = true;\n                }\n\n                if (!this.longestTimeout) {\n                    var clockSetTimeout = this.clock.setTimeout;\n                    var clockSetInterval = this.clock.setInterval;\n                    var server = this;\n\n                    this.clock.setTimeout = function (fn, timeout) {\n                        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                        return clockSetTimeout.apply(this, arguments);\n                    };\n\n                    this.clock.setInterval = function (fn, timeout) {\n                        server.longestTimeout = Math.max(timeout, server.longestTimeout || 0);\n\n                        return clockSetInterval.apply(this, arguments);\n                    };\n                }\n            }\n\n            return sinon.fakeServer.addRequest.call(this, xhr);\n        };\n\n        sinon.fakeServerWithClock.respond = function respond() {\n            var returnVal = sinon.fakeServer.respond.apply(this, arguments);\n\n            if (this.clock) {\n                this.clock.tick(this.longestTimeout || 0);\n                this.longestTimeout = 0;\n\n                if (this.resetClock) {\n                    this.clock.restore();\n                    this.resetClock = false;\n                }\n            }\n\n            return returnVal;\n        };\n\n        sinon.fakeServerWithClock.restore = function restore() {\n            if (this.clock) {\n                this.clock.restore();\n            }\n\n            return sinon.fakeServer.restore.apply(this, arguments);\n        };\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require) {\n        var sinon = require(\"./core\");\n        require(\"./fake_server\");\n        require(\"./fake_timers\");\n        makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require);\n    } else {\n        makeApi(sinon); // eslint-disable-line no-undef\n    }\n}());\n\n/**\n * @depend util/core.js\n * @depend extend.js\n * @depend collection.js\n * @depend util/fake_timers.js\n * @depend util/fake_server_with_clock.js\n */\n/**\n * Manages fake collections as well as fake utilities such as Sinon's\n * timers and fake XHR implementation in one convenient object.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        var push = [].push;\n\n        function exposeValue(sandbox, config, key, value) {\n            if (!value) {\n                return;\n            }\n\n            if (config.injectInto && !(key in config.injectInto)) {\n                config.injectInto[key] = value;\n                sandbox.injectedKeys.push(key);\n            } else {\n                push.call(sandbox.args, value);\n            }\n        }\n\n        function prepareSandboxFromConfig(config) {\n            var sandbox = sinon.create(sinon.sandbox);\n\n            if (config.useFakeServer) {\n                if (typeof config.useFakeServer === \"object\") {\n                    sandbox.serverPrototype = config.useFakeServer;\n                }\n\n                sandbox.useFakeServer();\n            }\n\n            if (config.useFakeTimers) {\n                if (typeof config.useFakeTimers === \"object\") {\n                    sandbox.useFakeTimers.apply(sandbox, config.useFakeTimers);\n                } else {\n                    sandbox.useFakeTimers();\n                }\n            }\n\n            return sandbox;\n        }\n\n        sinon.sandbox = sinon.extend(sinon.create(sinon.collection), {\n            useFakeTimers: function useFakeTimers() {\n                this.clock = sinon.useFakeTimers.apply(sinon, arguments);\n\n                return this.add(this.clock);\n            },\n\n            serverPrototype: sinon.fakeServer,\n\n            useFakeServer: function useFakeServer() {\n                var proto = this.serverPrototype || sinon.fakeServer;\n\n                if (!proto || !proto.create) {\n                    return null;\n                }\n\n                this.server = proto.create();\n                return this.add(this.server);\n            },\n\n            inject: function (obj) {\n                sinon.collection.inject.call(this, obj);\n\n                if (this.clock) {\n                    obj.clock = this.clock;\n                }\n\n                if (this.server) {\n                    obj.server = this.server;\n                    obj.requests = this.server.requests;\n                }\n\n                obj.match = sinon.match;\n\n                return obj;\n            },\n\n            restore: function () {\n                sinon.collection.restore.apply(this, arguments);\n                this.restoreContext();\n            },\n\n            restoreContext: function () {\n                if (this.injectedKeys) {\n                    for (var i = 0, j = this.injectedKeys.length; i < j; i++) {\n                        delete this.injectInto[this.injectedKeys[i]];\n                    }\n                    this.injectedKeys = [];\n                }\n            },\n\n            create: function (config) {\n                if (!config) {\n                    return sinon.create(sinon.sandbox);\n                }\n\n                var sandbox = prepareSandboxFromConfig(config);\n                sandbox.args = sandbox.args || [];\n                sandbox.injectedKeys = [];\n                sandbox.injectInto = config.injectInto;\n                var prop,\n                    value;\n                var exposed = sandbox.inject({});\n\n                if (config.properties) {\n                    for (var i = 0, l = config.properties.length; i < l; i++) {\n                        prop = config.properties[i];\n                        value = exposed[prop] || prop === \"sandbox\" && sandbox;\n                        exposeValue(sandbox, config, prop, value);\n                    }\n                } else {\n                    exposeValue(sandbox, config, \"sandbox\", value);\n                }\n\n                return sandbox;\n            },\n\n            match: sinon.match\n        });\n\n        sinon.sandbox.useFakeXMLHttpRequest = sinon.sandbox.useFakeServer;\n\n        return sinon.sandbox;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./extend\");\n        require(\"./util/fake_server_with_clock\");\n        require(\"./util/fake_timers\");\n        require(\"./collection\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend util/core.js\n * @depend sandbox.js\n */\n/**\n * Test function, sandboxes fakes\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function makeApi(sinon) {\n        var slice = Array.prototype.slice;\n\n        function test(callback) {\n            var type = typeof callback;\n\n            if (type !== \"function\") {\n                throw new TypeError(\"sinon.test needs to wrap a test function, got \" + type);\n            }\n\n            function sinonSandboxedTest() {\n                var config = sinon.getConfig(sinon.config);\n                config.injectInto = config.injectIntoThis && this || config.injectInto;\n                var sandbox = sinon.sandbox.create(config);\n                var args = slice.call(arguments);\n                var oldDone = args.length && args[args.length - 1];\n                var exception, result;\n\n                if (typeof oldDone === \"function\") {\n                    args[args.length - 1] = function sinonDone(res) {\n                        if (res) {\n                            sandbox.restore();\n                        } else {\n                            sandbox.verifyAndRestore();\n                        }\n                        oldDone(res);\n                    };\n                }\n\n                try {\n                    result = callback.apply(this, args.concat(sandbox.args));\n                } catch (e) {\n                    exception = e;\n                }\n\n                if (typeof oldDone !== \"function\") {\n                    if (typeof exception !== \"undefined\") {\n                        sandbox.restore();\n                        throw exception;\n                    } else {\n                        sandbox.verifyAndRestore();\n                    }\n                }\n\n                return result;\n            }\n\n            if (callback.length) {\n                return function sinonAsyncSandboxedTest(done) { // eslint-disable-line no-unused-vars\n                    return sinonSandboxedTest.apply(this, arguments);\n                };\n            }\n\n            return sinonSandboxedTest;\n        }\n\n        test.config = {\n            injectIntoThis: true,\n            injectInto: null,\n            properties: [\"spy\", \"stub\", \"mock\", \"clock\", \"server\", \"requests\"],\n            useFakeTimers: true,\n            useFakeServer: true\n        };\n\n        sinon.test = test;\n        return test;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        require(\"./sandbox\");\n        module.exports = makeApi(core);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n    } else if (isNode) {\n        loadDependencies(require, module.exports, module);\n    } else if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(typeof sinon === \"object\" && sinon || null)); // eslint-disable-line no-undef\n\n/**\n * @depend util/core.js\n * @depend test.js\n */\n/**\n * Test case, sandboxes all test functions\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal) {\n\n    function createTest(property, setUp, tearDown) {\n        return function () {\n            if (setUp) {\n                setUp.apply(this, arguments);\n            }\n\n            var exception, result;\n\n            try {\n                result = property.apply(this, arguments);\n            } catch (e) {\n                exception = e;\n            }\n\n            if (tearDown) {\n                tearDown.apply(this, arguments);\n            }\n\n            if (exception) {\n                throw exception;\n            }\n\n            return result;\n        };\n    }\n\n    function makeApi(sinon) {\n        function testCase(tests, prefix) {\n            if (!tests || typeof tests !== \"object\") {\n                throw new TypeError(\"sinon.testCase needs an object with test functions\");\n            }\n\n            prefix = prefix || \"test\";\n            var rPrefix = new RegExp(\"^\" + prefix);\n            var methods = {};\n            var setUp = tests.setUp;\n            var tearDown = tests.tearDown;\n            var testName,\n                property,\n                method;\n\n            for (testName in tests) {\n                if (tests.hasOwnProperty(testName) && !/^(setUp|tearDown)$/.test(testName)) {\n                    property = tests[testName];\n\n                    if (typeof property === \"function\" && rPrefix.test(testName)) {\n                        method = property;\n\n                        if (setUp || tearDown) {\n                            method = createTest(property, setUp, tearDown);\n                        }\n\n                        methods[testName] = sinon.test(method);\n                    } else {\n                        methods[testName] = tests[testName];\n                    }\n                }\n            }\n\n            return methods;\n        }\n\n        sinon.testCase = testCase;\n        return testCase;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var core = require(\"./util/core\");\n        require(\"./test\");\n        module.exports = makeApi(core);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon // eslint-disable-line no-undef\n));\n\n/**\n * @depend times_in_words.js\n * @depend util/core.js\n * @depend match.js\n * @depend format.js\n */\n/**\n * Assertions matching the test spy retrieval interface.\n *\n * @author Christian Johansen (christian@cjohansen.no)\n * @license BSD\n *\n * Copyright (c) 2010-2013 Christian Johansen\n */\n(function (sinonGlobal, global) {\n\n    var slice = Array.prototype.slice;\n\n    function makeApi(sinon) {\n        var assert;\n\n        function verifyIsStub() {\n            var method;\n\n            for (var i = 0, l = arguments.length; i < l; ++i) {\n                method = arguments[i];\n\n                if (!method) {\n                    assert.fail(\"fake is not a spy\");\n                }\n\n                if (method.proxy && method.proxy.isSinonProxy) {\n                    verifyIsStub(method.proxy);\n                } else {\n                    if (typeof method !== \"function\") {\n                        assert.fail(method + \" is not a function\");\n                    }\n\n                    if (typeof method.getCall !== \"function\") {\n                        assert.fail(method + \" is not stubbed\");\n                    }\n                }\n\n            }\n        }\n\n        function failAssertion(object, msg) {\n            object = object || global;\n            var failMethod = object.fail || assert.fail;\n            failMethod.call(object, msg);\n        }\n\n        function mirrorPropAsAssertion(name, method, message) {\n            if (arguments.length === 2) {\n                message = method;\n                method = name;\n            }\n\n            assert[name] = function (fake) {\n                verifyIsStub(fake);\n\n                var args = slice.call(arguments, 1);\n                var failed = false;\n\n                if (typeof method === \"function\") {\n                    failed = !method(fake);\n                } else {\n                    failed = typeof fake[method] === \"function\" ?\n                        !fake[method].apply(fake, args) : !fake[method];\n                }\n\n                if (failed) {\n                    failAssertion(this, (fake.printf || fake.proxy.printf).apply(fake, [message].concat(args)));\n                } else {\n                    assert.pass(name);\n                }\n            };\n        }\n\n        function exposedName(prefix, prop) {\n            return !prefix || /^fail/.test(prop) ? prop :\n                prefix + prop.slice(0, 1).toUpperCase() + prop.slice(1);\n        }\n\n        assert = {\n            failException: \"AssertError\",\n\n            fail: function fail(message) {\n                var error = new Error(message);\n                error.name = this.failException || assert.failException;\n\n                throw error;\n            },\n\n            pass: function pass() {},\n\n            callOrder: function assertCallOrder() {\n                verifyIsStub.apply(null, arguments);\n                var expected = \"\";\n                var actual = \"\";\n\n                if (!sinon.calledInOrder(arguments)) {\n                    try {\n                        expected = [].join.call(arguments, \", \");\n                        var calls = slice.call(arguments);\n                        var i = calls.length;\n                        while (i) {\n                            if (!calls[--i].called) {\n                                calls.splice(i, 1);\n                            }\n                        }\n                        actual = sinon.orderByFirstCall(calls).join(\", \");\n                    } catch (e) {\n                        // If this fails, we'll just fall back to the blank string\n                    }\n\n                    failAssertion(this, \"expected \" + expected + \" to be \" +\n                                \"called in order but were called as \" + actual);\n                } else {\n                    assert.pass(\"callOrder\");\n                }\n            },\n\n            callCount: function assertCallCount(method, count) {\n                verifyIsStub(method);\n\n                if (method.callCount !== count) {\n                    var msg = \"expected %n to be called \" + sinon.timesInWords(count) +\n                        \" but was called %c%C\";\n                    failAssertion(this, method.printf(msg));\n                } else {\n                    assert.pass(\"callCount\");\n                }\n            },\n\n            expose: function expose(target, options) {\n                if (!target) {\n                    throw new TypeError(\"target is null or undefined\");\n                }\n\n                var o = options || {};\n                var prefix = typeof o.prefix === \"undefined\" && \"assert\" || o.prefix;\n                var includeFail = typeof o.includeFail === \"undefined\" || !!o.includeFail;\n\n                for (var method in this) {\n                    if (method !== \"expose\" && (includeFail || !/^(fail)/.test(method))) {\n                        target[exposedName(prefix, method)] = this[method];\n                    }\n                }\n\n                return target;\n            },\n\n            match: function match(actual, expectation) {\n                var matcher = sinon.match(expectation);\n                if (matcher.test(actual)) {\n                    assert.pass(\"match\");\n                } else {\n                    var formatted = [\n                        \"expected value to match\",\n                        \"    expected = \" + sinon.format(expectation),\n                        \"    actual = \" + sinon.format(actual)\n                    ];\n\n                    failAssertion(this, formatted.join(\"\\n\"));\n                }\n            }\n        };\n\n        mirrorPropAsAssertion(\"called\", \"expected %n to have been called at least once but was never called\");\n        mirrorPropAsAssertion(\"notCalled\", function (spy) {\n            return !spy.called;\n        }, \"expected %n to not have been called but was called %c%C\");\n        mirrorPropAsAssertion(\"calledOnce\", \"expected %n to be called once but was called %c%C\");\n        mirrorPropAsAssertion(\"calledTwice\", \"expected %n to be called twice but was called %c%C\");\n        mirrorPropAsAssertion(\"calledThrice\", \"expected %n to be called thrice but was called %c%C\");\n        mirrorPropAsAssertion(\"calledOn\", \"expected %n to be called with %1 as this but was called with %t\");\n        mirrorPropAsAssertion(\n            \"alwaysCalledOn\",\n            \"expected %n to always be called with %1 as this but was called with %t\"\n        );\n        mirrorPropAsAssertion(\"calledWithNew\", \"expected %n to be called with new\");\n        mirrorPropAsAssertion(\"alwaysCalledWithNew\", \"expected %n to always be called with new\");\n        mirrorPropAsAssertion(\"calledWith\", \"expected %n to be called with arguments %*%C\");\n        mirrorPropAsAssertion(\"calledWithMatch\", \"expected %n to be called with match %*%C\");\n        mirrorPropAsAssertion(\"alwaysCalledWith\", \"expected %n to always be called with arguments %*%C\");\n        mirrorPropAsAssertion(\"alwaysCalledWithMatch\", \"expected %n to always be called with match %*%C\");\n        mirrorPropAsAssertion(\"calledWithExactly\", \"expected %n to be called with exact arguments %*%C\");\n        mirrorPropAsAssertion(\"alwaysCalledWithExactly\", \"expected %n to always be called with exact arguments %*%C\");\n        mirrorPropAsAssertion(\"neverCalledWith\", \"expected %n to never be called with arguments %*%C\");\n        mirrorPropAsAssertion(\"neverCalledWithMatch\", \"expected %n to never be called with match %*%C\");\n        mirrorPropAsAssertion(\"threw\", \"%n did not throw exception%C\");\n        mirrorPropAsAssertion(\"alwaysThrew\", \"%n did not always throw exception%C\");\n\n        sinon.assert = assert;\n        return assert;\n    }\n\n    var isNode = typeof module !== \"undefined\" && module.exports && typeof require === \"function\";\n    var isAMD = typeof define === \"function\" && typeof define.amd === \"object\" && define.amd;\n\n    function loadDependencies(require, exports, module) {\n        var sinon = require(\"./util/core\");\n        require(\"./match\");\n        require(\"./format\");\n        module.exports = makeApi(sinon);\n    }\n\n    if (isAMD) {\n        define(loadDependencies);\n        return;\n    }\n\n    if (isNode) {\n        loadDependencies(require, module.exports, module);\n        return;\n    }\n\n    if (sinonGlobal) {\n        makeApi(sinonGlobal);\n    }\n}(\n    typeof sinon === \"object\" && sinon, // eslint-disable-line no-undef\n    typeof global !== \"undefined\" ? global : self\n));\n\n  return sinon;\n}));\n"]},"hash":"5e9e1912a28dbc486fe211fece064648b2bdedf8"}
