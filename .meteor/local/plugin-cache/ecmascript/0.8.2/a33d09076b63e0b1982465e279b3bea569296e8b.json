{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"jquery","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"$"}]},{"source":"./foundation.util.core","imported":["transitionend"],"specifiers":[{"kind":"named","imported":"transitionend","local":"transitionend"}]}],"exports":{"exported":["Move","Motion"],"specifiers":[{"kind":"local","local":"Move","exported":"Move"},{"kind":"local","local":"Motion","exported":"Motion"}]}}},"options":{"filename":"packages/zurb:foundation-sites/js/foundation.util.motion.js","filenameRelative":"packages/zurb:foundation-sites/js/foundation.util.motion.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/js/foundation.util.motion.js.map","sourceFileName":"packages/zurb:foundation-sites/js/foundation.util.motion.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"foundation.util.motion"},"ignored":false,"code":"'use strict';\n\nvar module1 = module;\nmodule1.export({\n  Move: function () {\n    return Move;\n  },\n  Motion: function () {\n    return Motion;\n  }\n});\nvar $ = void 0;\nmodule1.watch(require(\"jquery\"), {\n  \"default\": function (v) {\n    $ = v;\n  }\n}, 0);\nvar transitionend = void 0;\nmodule1.watch(require(\"./foundation.util.core\"), {\n  transitionend: function (v) {\n    transitionend = v;\n  }\n}, 1);\n/**\n * Motion module.\n * @module foundation.motion\n */var initClasses = ['mui-enter', 'mui-leave'];\nvar activeClasses = ['mui-enter-active', 'mui-leave-active'];\nvar Motion = {\n  animateIn: function (element, animation, cb) {\n    animate(true, element, animation, cb);\n  },\n  animateOut: function (element, animation, cb) {\n    animate(false, element, animation, cb);\n  }\n};\n\nfunction Move(duration, elem, fn) {\n  var anim,\n      prog,\n      start = null; // console.log('called');\n\n  if (duration === 0) {\n    fn.apply(elem);\n    elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    return;\n  }\n\n  function move(ts) {\n    if (!start) start = ts; // console.log(start, ts);\n\n    prog = ts - start;\n    fn.apply(elem);\n\n    if (prog < duration) {\n      anim = window.requestAnimationFrame(move, elem);\n    } else {\n      window.cancelAnimationFrame(anim);\n      elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    }\n  }\n\n  anim = window.requestAnimationFrame(move);\n} /**\n   * Animates an element in or out using a CSS transition class.\n   * @function\n   * @private\n   * @param {Boolean} isIn - Defines if the animation is in or out.\n   * @param {Object} element - jQuery or HTML object to animate.\n   * @param {String} animation - CSS class to use.\n   * @param {Function} cb - Callback to run when animation is finished.\n   */\n\nfunction animate(isIn, element, animation, cb) {\n  element = $(element).eq(0);\n  if (!element.length) return;\n  var initClass = isIn ? initClasses[0] : initClasses[1];\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1]; // Set up the animation\n\n  reset();\n  element.addClass(animation).css('transition', 'none');\n  requestAnimationFrame(function () {\n    element.addClass(initClass);\n    if (isIn) element.show();\n  }); // Start the animation\n\n  requestAnimationFrame(function () {\n    element[0].offsetWidth;\n    element.css('transition', '').addClass(activeClass);\n  }); // Clean up the animation when it finishes\n\n  element.one(transitionend(element), finish); // Hides the element (for out animations), resets the element, and runs a callback\n\n  function finish() {\n    if (!isIn) element.hide();\n    reset();\n    if (cb) cb.apply(element);\n  } // Resets transitions and removes motion-specific classes\n\n\n  function reset() {\n    element[0].style.transitionDuration = 0;\n    element.removeClass(initClass + \" \" + activeClass + \" \" + animation);\n  }\n}","map":{"version":3,"sources":["packages/zurb:foundation-sites/js/foundation.util.motion.js"],"names":["module1","module","export","Move","Motion","$","watch","require","v","transitionend","initClasses","activeClasses","animateIn","element","animation","cb","animate","animateOut","duration","elem","fn","anim","prog","start","apply","trigger","triggerHandler","move","ts","window","requestAnimationFrame","cancelAnimationFrame","isIn","eq","length","initClass","activeClass","reset","addClass","css","show","offsetWidth","one","finish","hide","style","transitionDuration","removeClass"],"mappings":"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","file":"packages/zurb:foundation-sites/js/foundation.util.motion.js.map","sourcesContent":["'use strict';\n\nimport $ from 'jquery';\nimport { transitionend } from './foundation.util.core';\n\n/**\n * Motion module.\n * @module foundation.motion\n */\n\nconst initClasses   = ['mui-enter', 'mui-leave'];\nconst activeClasses = ['mui-enter-active', 'mui-leave-active'];\n\nconst Motion = {\n  animateIn: function(element, animation, cb) {\n    animate(true, element, animation, cb);\n  },\n\n  animateOut: function(element, animation, cb) {\n    animate(false, element, animation, cb);\n  }\n}\n\nfunction Move(duration, elem, fn){\n  var anim, prog, start = null;\n  // console.log('called');\n\n  if (duration === 0) {\n    fn.apply(elem);\n    elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    return;\n  }\n\n  function move(ts){\n    if(!start) start = ts;\n    // console.log(start, ts);\n    prog = ts - start;\n    fn.apply(elem);\n\n    if(prog < duration){ anim = window.requestAnimationFrame(move, elem); }\n    else{\n      window.cancelAnimationFrame(anim);\n      elem.trigger('finished.zf.animate', [elem]).triggerHandler('finished.zf.animate', [elem]);\n    }\n  }\n  anim = window.requestAnimationFrame(move);\n}\n\n/**\n * Animates an element in or out using a CSS transition class.\n * @function\n * @private\n * @param {Boolean} isIn - Defines if the animation is in or out.\n * @param {Object} element - jQuery or HTML object to animate.\n * @param {String} animation - CSS class to use.\n * @param {Function} cb - Callback to run when animation is finished.\n */\nfunction animate(isIn, element, animation, cb) {\n  element = $(element).eq(0);\n\n  if (!element.length) return;\n\n  var initClass = isIn ? initClasses[0] : initClasses[1];\n  var activeClass = isIn ? activeClasses[0] : activeClasses[1];\n\n  // Set up the animation\n  reset();\n\n  element\n    .addClass(animation)\n    .css('transition', 'none');\n\n  requestAnimationFrame(() => {\n    element.addClass(initClass);\n    if (isIn) element.show();\n  });\n\n  // Start the animation\n  requestAnimationFrame(() => {\n    element[0].offsetWidth;\n    element\n      .css('transition', '')\n      .addClass(activeClass);\n  });\n\n  // Clean up the animation when it finishes\n  element.one(transitionend(element), finish);\n\n  // Hides the element (for out animations), resets the element, and runs a callback\n  function finish() {\n    if (!isIn) element.hide();\n    reset();\n    if (cb) cb.apply(element);\n  }\n\n  // Resets transitions and removes motion-specific classes\n  function reset() {\n    element[0].style.transitionDuration = 0;\n    element.removeClass(`${initClass} ${activeClass} ${animation}`);\n  }\n}\n\nexport {Move, Motion};\n\n"]},"hash":"a33d09076b63e0b1982465e279b3bea569296e8b"}
