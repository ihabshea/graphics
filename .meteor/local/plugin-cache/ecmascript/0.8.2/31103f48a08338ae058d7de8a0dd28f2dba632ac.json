{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/zurb:foundation-sites/gulp/tasks/test.js","filenameRelative":"packages/zurb:foundation-sites/gulp/tasks/test.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/gulp/tasks/test.js.map","sourceFileName":"packages/zurb:foundation-sites/gulp/tasks/test.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"test"},"ignored":false,"code":"var gulp = require('gulp');\n\nvar opener = require('opener');\n\nvar browser = require('browser-sync');\n\nvar concat = require('gulp-concat');\n\nvar babel = require('gulp-babel');\n\nvar onBabelError = require('./babel-error.js');\n\nvar rimraf = require('rimraf').sync;\n\nvar CONFIG = require('../config.js'); // Runs unit tests\n\n\ngulp.task('test', ['sass:foundation', 'test:transpile-js', 'watch'], function () {\n  browser.init({\n    server: {\n      baseDir: 'test/visual',\n      directory: true,\n      routes: {\n        \"/assets\": \"_build/assets\",\n        \"/motion-ui\": \"node_modules/motion-ui\"\n      }\n    }\n  });\n  gulp.watch(['test/visual/**/*'], ['test:reload']);\n});\ngulp.task('test:reload', function (done) {\n  browser.reload();\n  done();\n});\ngulp.task('test:transpile-js', ['javascript:foundation', 'javascript:deps'], function () {\n  rimraf('test/javascript/js-tests.js');\n  return gulp.src(CONFIG.TEST_JS_FILES).pipe(babel().on('error', onBabelError)).pipe(concat('js-tests.js')).pipe(gulp.dest('test/javascript'));\n});","map":{"version":3,"sources":["packages/zurb:foundation-sites/gulp/tasks/test.js"],"names":["gulp","require","opener","browser","concat","babel","onBabelError","rimraf","sync","CONFIG","task","init","server","baseDir","directory","routes","watch","done","reload","src","TEST_JS_FILES","pipe","on","dest"],"mappings":"AAAA,IAAIA,OAAOC,QAAQ,MAAR,CAAX;;AACA,IAAIC,SAASD,QAAQ,QAAR,CAAb;;AACA,IAAIE,UAAUF,QAAQ,cAAR,CAAd;;AACA,IAAIG,SAASH,QAAQ,aAAR,CAAb;;AACA,IAAII,QAAQJ,QAAQ,YAAR,CAAZ;;AACA,IAAIK,eAAeL,QAAQ,kBAAR,CAAnB;;AACA,IAAIM,SAASN,QAAQ,QAAR,EAAkBO,IAA/B;;AAEA,IAAIC,SAASR,QAAQ,cAAR,CAAb,C,CAEA;;;AACAD,KAAKU,IAAL,CAAU,MAAV,EAAkB,CAAC,iBAAD,EAAoB,mBAApB,EAAyC,OAAzC,CAAlB,EAAqE,YAAW;AAC9EP,UAAQQ,IAAR,CAAa;AACXC,YAAQ;AACNC,eAAS,aADH;AAENC,iBAAW,IAFL;AAGNC,cAAQ;AACN,mBAAW,eADL;AAEN,sBAAc;AAFR;AAHF;AADG,GAAb;AAUAf,OAAKgB,KAAL,CAAW,CAAC,kBAAD,CAAX,EAAiC,CAAC,aAAD,CAAjC;AACD,CAZD;AAcAhB,KAAKU,IAAL,CAAU,aAAV,EAAyB,UAASO,IAAT,EAAe;AACtCd,UAAQe,MAAR;AACAD;AACD,CAHD;AAKAjB,KAAKU,IAAL,CAAU,mBAAV,EAA+B,CAAC,uBAAD,EAA0B,iBAA1B,CAA/B,EAA6E,YAAW;AACtFH,SAAO,6BAAP;AAEA,SAAOP,KAAKmB,GAAL,CAASV,OAAOW,aAAhB,EACLC,IADK,CACAhB,QACJiB,EADI,CACD,OADC,EACQhB,YADR,CADA,EAGLe,IAHK,CAGAjB,OAAO,aAAP,CAHA,EAILiB,IAJK,CAIArB,KAAKuB,IAAL,CAAU,iBAAV,CAJA,CAAP;AAKD,CARD","file":"packages/zurb:foundation-sites/gulp/tasks/test.js.map","sourcesContent":["var gulp = require('gulp');\nvar opener = require('opener');\nvar browser = require('browser-sync');\nvar concat = require('gulp-concat');\nvar babel = require('gulp-babel');\nvar onBabelError = require('./babel-error.js');\nvar rimraf = require('rimraf').sync;\n\nvar CONFIG = require('../config.js');\n\n// Runs unit tests\ngulp.task('test', ['sass:foundation', 'test:transpile-js', 'watch'], function() {\n  browser.init({\n    server: { \n      baseDir: 'test/visual',\n      directory: true,\n      routes: {\n        \"/assets\": \"_build/assets\",\n        \"/motion-ui\": \"node_modules/motion-ui\"\n      }\n    }\n  });\n  gulp.watch(['test/visual/**/*'], ['test:reload']);\n});\n\ngulp.task('test:reload', function(done) {\n  browser.reload();\n  done();\n});\n\ngulp.task('test:transpile-js', ['javascript:foundation', 'javascript:deps'], function() {\n  rimraf('test/javascript/js-tests.js');\n  \n  return gulp.src(CONFIG.TEST_JS_FILES)\n  \t.pipe(babel()\n  \t\t.on('error', onBabelError))\n  \t.pipe(concat('js-tests.js'))\n  \t.pipe(gulp.dest('test/javascript'));\n});\n"]},"hash":"31103f48a08338ae058d7de8a0dd28f2dba632ac"}
