{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/zurb:foundation-sites/test/javascript/js-tests.js","filenameRelative":"packages/zurb:foundation-sites/test/javascript/js-tests.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/test/javascript/js-tests.js.map","sourceFileName":"packages/zurb:foundation-sites/test/javascript/js-tests.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"js-tests"},"ignored":false,"code":"/* jslint mocha: true */ /*global describe, it, before, beforeEach, after, afterEach, $, Foundation */describe('Abide', function () {\n  var plugin;\n  var $html;\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element & plugin options', function () {\n      $html = $('<form data-abide novalidate></form>').appendTo('body');\n      plugin = new Foundation.Abide($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('validateInput()', function () {\n    it('returns true for hidden inputs', function () {\n      $html = $(\"<form data-abide novalidate><input type='hidden' required></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n    it('returns true for inputs with [data-abide-ignore]', function () {\n      $html = $(\"<form data-abide novalidate><input type='text' required data-abide-ignore></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n    it('returns true for checked checkboxes', function () {\n      $html = $(\"<form data-abide><input type='checkbox' required checked='checked'></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n    it('returns false for unchecked checkboxes', function () {\n      $html = $(\"<form data-abide><input type='checkbox' required></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"input\")).should.equal(false);\n    });\n    it('returns true for selected select option', function () {\n      $html = $(\"<form data-abide><select required><option value=''></option><option value='One'>One</option><option value='Two' selected='selected'>Two</option></select></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"select\")).should.equal(true);\n      $html.find(\"select\").val().should.equal(\"Two\");\n    });\n    it('returns false for unselected select option', function () {\n      $html = $(\"<form data-abide><select required><option value=''></option><option value='One'>One</option><option value='Two'>Two</option></select></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n      plugin.validateInput($html.find(\"select\")).should.equal(false);\n    });\n  });\n});\ndescribe('Accordion', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"accordion\" data-accordion>\\n  <li class=\"accordion-item is-active\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 1</a>\\n    <div class=\"accordion-content\" data-tab-content >\\n      <p>Panel 1. Lorem ipsum dolor</p>\\n      <a href=\"#\">Nowhere to Go</a>\\n    </div>\\n  </li>\\n  <li class=\"accordion-item\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 2</a>\\n    <div class=\"accordion-content\" data-tab-content>\\n      <textarea></textarea>\\n      <button class=\"button\">I do nothing!</button>\\n    </div>\\n  </li>\\n  <li class=\"accordion-item\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 3</a>\\n    <div class=\"accordion-content\" data-tab-content>\\n      Pick a date!\\n      <input type=\"date\"></input>\\n    </div>\\n  </li>\\n</ul>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('up()', function (done) {\n    it('closes the targeted container if allowAllClosed is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        allowAllClosed: true\n      });\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        allowAllClosed: true\n      });\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-title').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('.accordion-title').eq(0).should.have.attr('aria-selected', 'false');\n    });\n    it('not closes the open container if allowAllClosed is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        allowAllClosed: false\n      });\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.be.visible; // Element has aria-hidden=\"false\" not set if it has not been actively toggled so far\n      // Therefor check if it has not aria-hidden=\"true\"\n\n      $html.find('.accordion-content').eq(0).should.not.have.attr('aria-hidden', 'true');\n    });\n  });\n  describe('down()', function () {\n    it('opens the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-title').eq(1).should.have.attr('aria-expanded', 'true');\n      $html.find('.accordion-title').eq(1).should.have.attr('aria-selected', 'true');\n    });\n    it('closes open container if multiExpand is false', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        multiExpand: false\n      });\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n    it('not closes open container if multiExpand is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        multiExpand: true\n      });\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(0).should.be.visible; // Element has aria-hidden=\"false\" not set if it has not been actively toggled so far\n      // Therefor check if it has not aria-hidden=\"true\"\n\n      $html.find('.accordion-content').eq(0).should.not.have.attr('aria-hidden', 'true');\n    });\n  });\n  describe('toggle()', function (done) {\n    it('closes the only open container if allowAllClosed is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        allowAllClosed: true\n      });\n      plugin.toggle($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n    it('not closes the only open container if allowAllClosed is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {\n        allowAllClosed: false\n      });\n      plugin.toggle($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.be.visible;\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'false');\n    });\n  });\n  describe('keyboard events', function () {\n    it('opens next panel on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      $html.find('.accordion-title').eq(0).focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false'); // Check if focus was moved\n\n      $html.find('.accordion-title').eq(1)[0].should.be.equal(document.activeElement);\n    });\n    it('opens previous panel on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      $html.find('.accordion-title').eq(2).focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false'); // Check if focus was moved\n\n      $html.find('.accordion-title').eq(1)[0].should.be.equal(document.activeElement);\n    });\n    it('opens related panel on ENTER', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      $html.find('.accordion-title').eq(1).focus().trigger(window.mockKeyboardEvent('ENTER'));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n    it('opens related panel on SPACE', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n      $html.find('.accordion-title').eq(1).focus().trigger(window.mockKeyboardEvent('SPACE'));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n  });\n});\ndescribe('Accordion Menu', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <ul class=\"vertical menu\">\\n      <li>\\n        <a href=\"#\">Item 1</a>\\n        <ul class=\"menu vertical nested\">\\n          <li>\\n            <a href=\"#\">Item 1A</a>\\n            <ul class=\"menu vertical nested\">\\n              <li><a href=\"#\">Item 1Ai</a></li>\\n              <li><a href=\"#\">Item 1Aii</a></li>\\n              <li><a href=\"#\">Item 1Aiii</a></li>\\n            </ul>\\n          </li>\\n          <li><a href=\"#\">Item 1B</a></li>\\n          <li><a href=\"#\">Item 1C</a></li>\\n        </ul>\\n      </li>\\n      <li>\\n        <a href=\"#\">Item 2</a>\\n        <ul class=\"menu vertical nested\">\\n          <li><a href=\"#\">Item 2A</a></li>\\n          <li><a href=\"#\">Item 2B</a></li>\\n        </ul>\\n      </li>\\n      <li><a href=\"#\">Item 3</a></li>\\n    </ul>';\n  Foundation.AccordionMenu.defaults.slideSpeed = 0;\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('up()', function () {\n    it('closes the targeted submenu', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html); // Open it first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n      setTimeout(function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n        done();\n      }, 1);\n    });\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {}); // Open it first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n    });\n    it('fires up.zf.accordionMenu event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {\n        slideSpeed: 200\n      }); // Open it first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      $html.on('up.zf.accordionMenu', function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n        done();\n      });\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n    });\n  });\n  describe('down()', function () {\n    it('opens the targeted submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n    it('toggles attributes of title of the targeted submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n    });\n    it('closes open submenu if multiOpen is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {\n        multiOpen: false\n      }); // Open another one first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n      $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n    });\n    it('not closes open submenu if multiOpen is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {\n        multiOpen: true\n      }); // Open another one first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n    it('fires down.zf.accordionMenu event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {\n        slideSpeed: 200\n      });\n      $html.on('down.zf.accordionMenu', function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n        done();\n      });\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n    });\n  });\n  describe('toggle()', function () {\n    it('opens a closed container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n      plugin.toggle($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n    it('closes an open container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {}); // Open first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.toggle($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n    });\n  });\n  describe('hideAll()', function () {\n    it('closes all accordions', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {}); // Open some first\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.down($html.find('.is-accordion-submenu').eq(1));\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n      plugin.hideAll();\n      $html.find('[data-submenu]').each(function () {\n        $(this).should.be.hidden;\n      });\n    });\n  });\n});\ndescribe('Drilldown Menu', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"menu\" data-drilldown style=\"width: 200px\" id=\"m1\">\\n    <li>\\n      <a href=\"#\">Item 1</a>\\n      <ul class=\"menu\">\\n        <li>\\n          <a href=\"#\">Item 1A</a>\\n          <ul class=\"menu\">\\n            <li><a href=\"#Item-1Aa\">Item 1Aa</a></li>\\n            <li><a href=\"#Item-1Ba\">Item 1Ba</a></li>\\n          </ul>\\n        </li>\\n        <li><a href=\"#Item-1B\">Item 1B</a></li>\\n        <li><a href=\"#Item-1C\">Item 1C</a></li>\\n      </ul>\\n    </li>\\n    <li>\\n      <a href=\"#\">Item 2</a>\\n      <ul class=\"menu\">\\n        <li><a href=\"#Item-2A\">Item 2A</a></li>\\n        <li><a href=\"#Item-2B\">Item 2B</a></li>\\n      </ul>\\n    </li>\\n    <li><a href=\"#Item-3\"> Item 3</a></li>\\n  </ul>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('stores additional elements', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$submenuAnchors.should.be.an('object');\n      plugin.$submenus.should.be.an('object');\n      plugin.$menuItems.should.be.an('object');\n    });\n  });\n  describe('prepareMenu()', function () {\n    it('wraps the submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n    });\n    it('adds ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      plugin.$element.should.have.attr('role', 'tree');\n      plugin.$element.find('[data-submenu]').each(function () {\n        $(this).should.have.attr('role', 'group');\n        $(this).should.have.attr('aria-hidden', 'true');\n      });\n      plugin.$element.find('.is-drilldown-submenu-parent').each(function () {\n        $(this).should.have.attr('aria-haspopup', 'true');\n        $(this).should.have.attr('aria-expanded', 'false');\n        $(this).should.have.attr('aria-label', $(this).children('a').first().text());\n      });\n      plugin.$element.find('li:not(.js-drilldown-back)').each(function () {\n        $(this).should.have.attr('role', 'treeitem');\n      });\n    });\n  });\n  describe('show()', function () {\n    it('shows the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0)); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'false');\n    });\n    it('fires open.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.on('open.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n        done();\n      });\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n    });\n  });\n  describe('hide()', function () {\n    it('hides the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul')); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'true');\n    });\n    it('fires hide.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.on('hide.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n        done();\n      });\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n    });\n  });\n  describe('hideAll()', function () {\n    it('hides all submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      plugin._hideAll();\n\n      $html.find('ul[data-submenu].is-active').each(function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $(this).should.have.class('is-closing');\n      });\n    });\n    it('fires closed.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      $html.one('closed.zf.drilldown', function () {\n        $html.find('ul[data-submenu].is-active').each(function () {\n          // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n          $(this).should.have.class('is-closing');\n        });\n        done();\n      });\n\n      plugin._hideAll();\n    });\n  });\n  describe('back()', function () {\n    it('hides current submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click'); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').should.have.class('is-closing');\n    });\n    it('shows parent submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open one first\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click'); // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-active');\n    });\n  });\n  describe('keyboard events', function () {\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going down', function () {\n      $html = $(template).appendTo('body');\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n\n      plugin = new Foundation.Drilldown($html, {}); // Focus last element\n\n      $dummyElement.focus();\n      $html.find('> li:last-child > a').trigger(window.mockKeyboardEvent('TAB'));\n      document.activeElement.should.not.be.equal($html.find('> li:last-child > a')[0]);\n      $dummyElement.remove();\n    }); // Currently not testable, as triggered event won't move on focus\n\n    it.skip('does not trap focus on root element going up', function () {\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Focus first element\n\n      $dummyElement.focus();\n      $html.find('> li:first-child > a').trigger(window.mockKeyboardEvent('TAB', {\n        shift: true\n      }));\n      document.activeElement.should.not.be.equal($html.find('> li:first-child > a')[0]);\n      $dummyElement.remove();\n    });\n    it('closes current sub menu using ESC', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n    it('moves focus to next element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('TAB'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('TAB', {\n        shift: true\n      }));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('moves focus to next element on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('opens child element on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-active');\n    });\n    it('closes child element on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {}); // Open it first\n\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n  });\n});\ndescribe('Dropdown', function () {\n  var plugin = void 0;\n  var $dropdownController = void 0;\n  var $dropdownContainer = void 0;\n\n  var getDropdownController = function () {\n    var buttonClasses = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return '<button class=\"' + buttonClasses + '\" type=\"button\" data-toggle=\"my-dropdown\">toggle</button>';\n  };\n\n  var getDropdownContainer = function () {\n    var dropdownClasses = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return '<div class=\"' + dropdownClasses + '\" data-dropdown id=\"my-dropdown\">Dropdown</div>';\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $dropdownController.remove();\n    $dropdownContainer.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element & plugin options', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('open()', function () {\n    it('traps focus if trapFocus option is true', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {\n        trapFocus: true\n      });\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n      plugin.open();\n      sinon.assert.called(spy);\n      Foundation.Keyboard.trapFocus.restore();\n    });\n  });\n  describe('close()', function () {\n    it('releases focus if trapFocus option is true', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {\n        trapFocus: true\n      }); // Open it first...\n\n      plugin.open();\n      var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n      plugin.close();\n      sinon.assert.called(spy);\n      Foundation.Keyboard.releaseFocus.restore();\n    });\n  });\n  describe('inferred positioning', function () {\n    it('default orientation should be bottom', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n      plugin.open();\n      plugin.position.should.equal('bottom');\n    });\n    it('gets right alignment from float-right', function () {\n      $dropdownController = $(getDropdownController('custom-style-before float-right custom-style-after')).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n      plugin.open();\n      plugin.position.should.equal('bottom');\n      plugin.alignment.should.equal('right');\n    });\n  });\n});\ndescribe('Dropdown Menu', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"dropdown menu\" data-dropdown-menu>\\n    <li>\\n      <a href=\"#Item-1\">Item 1</a>\\n      <ul class=\"menu\">\\n      <li><a href=\"#Item-1A\">Item 1A</a></li>\\n      <li>\\n        <a href=\"#Item-1B\">Item 1B</a>\\n        <ul class=\"menu\">\\n        <li><a href=\"#Item-1Bi\">Item 1B i</a></li>\\n        <li><a href=\"#Item-1Bii\">Item 1B ii</a></li>\\n        <li>\\n          <a href=\"#Item-1Biii\">Item 1B iii</a>\\n          <ul class=\"menu\">\\n          <li><a href=\"#Item-1Biiialpha\">Item 1B iii alpha</a></li>\\n          <li><a href=\"#Item-1Biiiomega\">Item 1B iii omega</a></li>\\n          </ul>\\n        </li>\\n        <li>\\n          <a href=\"#Item-1Biv\">Item 1B iv</a>\\n          <ul class=\"menu\">\\n          <li><a href=\"#Item-1Bivalpha\">Item 1B iv alpha</a></li>\\n          </ul>\\n        </li>\\n        </ul>\\n      </li>\\n      <li><a href=\"#Item-1C\">Item 1C</a></li>\\n      </ul>\\n    </li>\\n    <li>\\n      <a href=\"#Item-2\">Item 2</a>\\n      <ul class=\"menu\">\\n      <li><a href=\"#Item-2A\">Item 2A</a></li>\\n      <li><a href=\"#Item-2B\">Item 2B</a></li>\\n      </ul>\\n    </li>\\n    <li><a href=\"#Item-3\">Item 3</a></li>\\n    <li><a href=\"#Item-4\">Item 4</a></li>\\n  </ul>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.DropdownMenu($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('keyboard events', function () {\n    it('closes current sub menu using ESCAPE', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.DropdownMenu($html, {}); // Open it first\n\n      plugin._show($html.find('> li:nth-child(1) > ul'));\n\n      $html.find('> li:nth-child(1) > ul > li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n      $html.find('> li:nth-child(1)').should.not.have.class('is-active');\n      $html.find('> li:nth-child(1) > ul').should.not.have.class('js-dropdown-active');\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    describe('horizontal', function () {\n      beforeEach(function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n      });\n      it('moves focus to next tab on ARROW_RIGHT', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n      });\n      it('moves focus to previous tab on ARROW_LEFT', function () {\n        $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of tab on ARROW_DOWN', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n        $html.find('> li:nth-child(1)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('moves focus to previous sub element on ARROW_UP', function () {\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of sub menu on ARROW_RIGHT', function () {\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(1) > a')[0]);\n      });\n    });\n    describe('vertical', function () {\n      beforeEach(function () {\n        $html = $(template).addClass('vertical').appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n      });\n      it('moves focus to next tab on ARROW_DOWN', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n      });\n      it('moves focus to previous tab on ARROW_UP', function () {\n        $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of tab on ARROW_RIGHT', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n        $html.find('> li:nth-child(1)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('moves focus to previous sub element on ARROW_UP', function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {}); // Open it first\n\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of sub menu on ARROW_RIGHT', function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {}); // Open it first\n\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(1) > a')[0]);\n      });\n    });\n  });\n});\ndescribe('Equalizer', function () {\n  var plugin;\n  var $html; // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {// it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.Equalizer($html, {});\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n});\ndescribe('Interchange', function () {\n  var plugin;\n  var $html; /**\n              * Generates paths to different assets\n              * @param  {[type]} type [description]\n              * @param  {[type]} size [description]\n              * @return {[type]}      [description]\n              */\n\n  var getPath = function (type, size) {\n    switch (type) {\n      case 'image':\n      case 'background':\n        return '_build/assets/img/interchange/strip_icc()/' + size + '.jpg';\n\n      default:\n        return '_build/assets/partials/interchange-' + size + '.html';\n    }\n  }; /**\n      * Generates templates to use based on type.\n      * @param  {string} type Type to generate, image, background or template.\n      * @return {string}      Generated template.\n      */\n\n  var generateTemplate = function (type) {\n    var type = type || 'template',\n        tag = type === 'image' ? 'img' : 'div',\n        path;\n\n    switch (type) {\n      case 'image':\n        return '<img data-interchange=\"\\n            [' + getPath(type, 'small') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \">';\n\n      case 'background':\n        return '<div data-interchange=\"\\n            [' + getPath(type, 'small') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \"></div>';\n\n      default:\n        return '<div data-interchange=\"\\n            [' + getPath(type, 'default') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \"></div>';\n    }\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(generateTemplate('template')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('replace()', function () {\n    it('replaces src attribute of img', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      plugin.replace(getPath('img', 'large'));\n      $html.should.have.attr('src', getPath('img', 'large'));\n    });\n    it('replaces background style of divs', function () {\n      $html = $(generateTemplate('background')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      plugin.replace(getPath('background', 'large'));\n      $html[0].style.backgroundImage.should.contain(getPath('background', 'large').replace(/\\(/g, '%28').replace(/\\)/g, '%29'));\n    });\n    it('replaces contents of div with templates', function () {\n      $html = $(generateTemplate('template')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      var spy = sinon.spy($, 'get');\n      plugin.replace(getPath('template', 'large'));\n      sinon.assert.calledWith(spy, getPath('template', 'large'));\n      spy.restore();\n    });\n    it('fires replaced.zf.interchange event', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      var spy = sinon.spy();\n      $html.on('replaced.zf.interchange', spy);\n      plugin.replace(getPath('image', 'large'));\n      sinon.assert.called(spy);\n    });\n  });\n  describe('reflow()', function () {\n    it('calls replace for given media query', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '[image.png, (min-width: 1px)]').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      var spy = sinon.spy();\n      plugin.replace = spy;\n\n      plugin._reflow();\n\n      sinon.assert.calledWith(spy, 'image.png');\n    });\n  });\n  describe('generateRules()', function () {\n    it('extracts rules from the plugin element', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin._generateRules($html);\n\n      plugin.rules.length.should.be.equal(3);\n    });\n    it('extracts special queries from the plugin element', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '[image.png, retina]').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin._generateRules($html);\n\n      plugin.rules[0].query.should.be.equal(Foundation.Interchange.SPECIAL_QUERIES['retina']);\n    });\n  });\n  describe('addBreakpoints()', function () {\n    it('adds Foundation breakpoints to special queries', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      var specialQueriesCount = Object.keys(Foundation.Interchange.SPECIAL_QUERIES).length,\n          foundationMediaQueriesCount = Foundation.MediaQuery.queries.length;\n      Foundation.MediaQuery.queries.push({\n        name: 'test-query',\n        value: 'test-query-value'\n      });\n\n      plugin._addBreakpoints($html);\n\n      Object.keys(Foundation.Interchange.SPECIAL_QUERIES).length.should.be.equal(specialQueriesCount + 1); // Reset Foundation.MediaQueries\n\n      Foundation.MediaQuery.queries.length = foundationMediaQueriesCount;\n    });\n  });\n  describe('events()', function () {\n    it('calls reflow on viewport size change once', function (done) {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      Foundation.IHearYou();\n      var spy = sinon.spy(plugin, '_reflow');\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 1);\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 5);\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 10);\n      setTimeout(function () {\n        // Wait for third trigger...\n        sinon.assert.calledOnce(spy);\n        done();\n      }, 50);\n    });\n  });\n});\ndescribe('Magellan', function () {\n  var plugin;\n  var $html, $content;\n\n  var generateUl = function (count) {\n    var html = '';\n    html += '<ul class=\"vertical-menu\">';\n\n    for (var c = 0; c < count; c++) {\n      html += '<li><a href=\"#target-' + c + '\">Section ' + c + '</a></li>';\n    }\n\n    html += '</ul>';\n    return html;\n  };\n\n  var generateContent = function (count) {\n    var html = '';\n    html += '<div>';\n\n    for (var c = 0; c < count; c++) {\n      html += '<div id=\"target-' + c + '\" style=\"height: 1000px\";>Section ' + c + '</div>';\n    }\n\n    html += '</div>';\n    return html;\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n    $content.remove();\n  }); // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {// it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.Magellan($html, {});\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n  describe('scrollToLoc()', function () {\n    it('scrolls the selected element into viewport', function (done) {\n      var count = 5,\n          duration = 200;\n      $html = $(generateUl(count)).appendTo('body');\n      $content = $(generateContent(count)).appendTo('body');\n      plugin = new Foundation.Magellan($html, {\n        animationDuration: duration\n      }); // Jump to last section\n\n      var target = $html.find('a').eq(-1).attr('href');\n      plugin.scrollToLoc(target); // The `update` event doesn't work properly because it fires too often\n\n      setTimeout(function () {\n        var isInViewport = false;\n\n        if ($content.find('div').eq(-1).offset().top > $('body').scrollTop() && $content.offset().top < $('body').scrollTop() + $('body').innerHeight()) {\n          isInViewport = true;\n        }\n\n        isInViewport.should.equal(true);\n        done();\n      }, duration);\n    });\n    it('fails gracefully when target does not exist', function () {\n      var count = 5,\n          duration = 200;\n      $html = $(generateUl(count)).appendTo('body');\n      $content = $(generateContent(count - 1)).appendTo('body');\n      plugin = new Foundation.Magellan($html, {\n        animationDuration: duration\n      });\n      var hasError = false;\n\n      try {\n        var target = $html.find('a').eq(-1).attr('href');\n        plugin.scrollToLoc(target);\n      } catch (err) {\n        hasError = true;\n      }\n\n      hasError.should.equal(false);\n    });\n  });\n});\ndescribe('Off Canvas', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"off-canvas-wrapper\">\\n      <div class=\"off-canvas-wrapper-inner\" data-off-canvas-wrapper>\\n        <div class=\"off-canvas position-left\" id=\"offCanvas\" data-off-canvas data-content-scroll=\"false\">\\n\\n          <!-- Close button -->\\n          <button class=\"close-button\" aria-label=\"Close menu\" type=\"button\" data-close>\\n            <span aria-hidden=\"true\">&times;</span>\\n          </button>\\n\\n          <!-- Menu -->\\n          <ul class=\"vertical menu\">\\n            <li><a href=\"#\">Foundation</a></li>\\n            <li><a href=\"#\">Dot</a></li>\\n            <li><a href=\"#\">ZURB</a></li>\\n            <li><a href=\"#\">Com</a></li>\\n            <li><a href=\"#\">Slash</a></li>\\n            <li><a href=\"#\">Sites</a></li>\\n          </ul>\\n\\n        </div>\\n\\n        <div class=\"off-canvas-content\" data-off-canvas-content>\\n          <!-- Page content -->\\n          PAGE_CONTENT.\\n\\n          <!-- Triggers -->\\n          <button type=\"button\" class=\"button\" data-toggle=\"offCanvas\">Open Menu</button>\\n        </div>\\n      </div>\\n    </div>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('finds triggers for the Off Canvas', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      plugin.$triggers.length.should.be.equal(1);\n    });\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      plugin.$element.should.have.attr('aria-hidden', 'true');\n      plugin.$triggers.should.have.attr('aria-controls', plugin.$element.attr('id'));\n      plugin.$triggers.should.have.attr('aria-expanded', 'false');\n    });\n    it('closes Off Canvas on outside click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {\n        closeOnClick: true\n      });\n      plugin.$overlay.should.be.an('object');\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$overlay.trigger('click');\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      });\n      plugin.open();\n    });\n  });\n  describe('open()', function () {\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {}); //$html.one(Foundation.transitionend($html), function() {\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$triggers.should.have.attr('aria-expanded', 'true');\n        plugin.$element.should.have.attr('aria-hidden', 'false');\n        done();\n      });\n      plugin.open();\n    });\n    it('adds active classes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        setTimeout(function () {\n          plugin.$element.should.have.class('is-open');\n          $('body').should.have.class('is-off-canvas-open');\n          done();\n        }, 1);\n      });\n      plugin.open();\n    });\n    it('focusses Off Canvas if autoFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {\n        autoFocus: true\n      });\n      plugin.$element.one(Foundation.transitionend(plugin.$element), function () {\n        setTimeout(function () {\n          plugin.$element.find('a, button')[0].should.be.equal(document.activeElement);\n          done();\n        }, 1);\n      });\n      plugin.open(); // fake transitionend for console tests\n\n      plugin.$element.triggerHandler(Foundation.transitionend(plugin.$element));\n    });\n    it('traps focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {\n        trapFocus: true\n      });\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n      $html.one(Foundation.transitionend($html), function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.trapFocus.restore();\n        done();\n      });\n      plugin.open();\n    });\n    it('fires opened.zf.offcanvas event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        done();\n      });\n      plugin.open();\n    });\n  });\n  describe('close()', function () {\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.close();\n        plugin.$triggers.should.have.attr('aria-expanded', 'false');\n        plugin.$element.should.have.attr('aria-hidden', 'true');\n        done();\n      }); // Open it first\n\n      plugin.open();\n    });\n    it('removes active classes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        setTimeout(function () {\n          plugin.close();\n          plugin.$element.should.not.have.class('is-open');\n          $('body').should.not.have.class('is-off-canvas-open');\n          done();\n        }, 1);\n      }); // Open it first\n\n      plugin.open();\n    });\n    it('fires closed.zf.offcanvas event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        $html.one('closed.zf.offcanvas', function () {\n          done();\n        });\n        plugin.close();\n      }); // Open it first\n\n      plugin.open();\n    });\n    it('releases focus if trapFocus option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {\n        trapFocus: true\n      });\n      $html.one(Foundation.transitionend($html), function () {\n        var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n        plugin.close();\n        sinon.assert.called(spy);\n        Foundation.Keyboard.releaseFocus.restore();\n      }); // Open it first...\n\n      plugin.open();\n    });\n  });\n  describe('toggle()', function () {\n    it('opens a closed Off Canvas', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$element.should.have.class('is-open');\n        done();\n      });\n      plugin.toggle();\n    });\n    it('closes an open Off Canvas', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.toggle();\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      }); // Open it first\n\n      plugin.toggle();\n    });\n  });\n  describe('keyboard events', function () {\n    it('closes Off Canvas on ESCAPE', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$element.focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      }); // Open it first\n\n      plugin.open();\n    });\n  });\n});\ndescribe('Orbit', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"orbit\" role=\"region\" aria-label=\"Favorite Space Pictures\" data-orbit>\\n    <ul class=\"orbit-container\">\\n      <button class=\"orbit-previous\"><span class=\"show-for-sr\">Previous Slide</span>&#9664;&#xFE0E;</button>\\n      <button class=\"orbit-next\"><span class=\"show-for-sr\">Next Slide</span>&#9654;&#xFE0E;</button>\\n      <li class=\"is-active orbit-slide\">\\n        Slide #1 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #2 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #3 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #4 content.\\n      </li>\\n    </ul>\\n    <nav class=\"orbit-bullets\">\\n      <button class=\"is-active\" data-slide=\"0\"><span class=\"show-for-sr\">First slide details.</span><span class=\"show-for-sr\">Current Slide</span></button>\\n      <button data-slide=\"1\"><span class=\"show-for-sr\">Second slide details.</span></button>\\n      <button data-slide=\"2\"><span class=\"show-for-sr\">Third slide details.</span></button>\\n      <button data-slide=\"3\"><span class=\"show-for-sr\">Fourth slide details.</span></button>\\n    </nav>\\n  </div>';\n  Foundation.Orbit.defaults.useMUI = false;\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.$wrapper.should.be.an('object');\n      plugin.$slides.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('shows the first slide', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-slide').eq(0).should.be.visible;\n    });\n    it('hides all slides except the first one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-slide').each(function (index) {\n        if (index === 0) {\n          return;\n        } // Not for the first one as this is visible\n\n\n        $(this).should.be.hidden;\n      });\n    });\n    it('makes slide with is-active class active initially', function () {\n      $html = $(template).appendTo('body');\n      $html.find('.orbit-slide.is-active').removeClass('is-active');\n      $html.find('.orbit-slide').eq(2).addClass('is-active');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n  });\n  describe('loadBullets()', function () {\n    it('stores the bullets', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.$bullets.should.be.an('object');\n    });\n  });\n  describe('changeSlide()', function () {\n    it('changes slides to the next one for ltr is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.changeSlide(true);\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(1).should.be.visible;\n    });\n    it('changes slides to the last one for ltr is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.changeSlide(false);\n      $html.find('.orbit-slide').eq(0).should.not.have.class('is-active');\n      $html.find('.orbit-slide').eq(-1).should.have.class('is-active');\n    });\n    it('changes slides to the chosen one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.changeSlide(true, $html.find('.orbit-slide').eq(2), 2);\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.changeSlide(true);\n      $html.find('.orbit-slide').eq(0).should.not.have.attr('aria-live');\n      $html.find('.orbit-slide').eq(1).should.have.attr('aria-live', 'polite');\n    });\n    it('fires beforeslidechange.zf.orbit event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.on('beforeslidechange.zf.orbit', function () {\n        // Old slide should still be active\n        $html.find('.orbit-slide').eq(0).should.be.visible;\n        done();\n      });\n      plugin.changeSlide(true);\n    });\n    it('fires slidechange.zf.orbit event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.on('slidechange.zf.orbit', function () {\n        // New slide is already active\n        $html.find('.orbit-slide').eq(1).should.be.visible;\n        done();\n      });\n      plugin.changeSlide(true);\n    });\n  });\n  describe('updateBullets()', function () {\n    it('updates the bullets', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      plugin.changeSlide(true);\n      $html.find('.orbit-bullets [data-slide]').eq(0).should.not.have.class('is-active');\n      $html.find('.orbit-bullets [data-slide]').eq(1).should.have.class('is-active');\n    });\n  });\n  describe('events()', function () {\n    it('changes slides on bullet click', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-bullets [data-slide]').eq(2).trigger('click');\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n    it('changes slides to the previous one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-previous').trigger('click');\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(-1).should.be.visible;\n    });\n    it('changes slides to the next one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      $html.find('.orbit-next').trigger('click');\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(1).should.be.visible;\n    });\n  });\n  describe('geoSync()', function () {\n    it('changes slides automatically based on timerDelay option', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {\n        timerDelay: 200\n      });\n      setTimeout(function () {\n        $html.find('.orbit-slide').eq(0).should.be.hidden;\n        $html.find('.orbit-slide').eq(1).should.be.visible;\n        done();\n      }, 201);\n    });\n  });\n  describe('keyboard events', function () {\n    it('moves switches to next slide using ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      var spy = sinon.spy(plugin, 'changeSlide');\n      plugin.$wrapper.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n      sinon.assert.calledWith(spy, true);\n    });\n    it('moves switches to previous slide using ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      var spy = sinon.spy(plugin, 'changeSlide');\n      plugin.$wrapper.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n      sinon.assert.calledWith(spy, false);\n    });\n  });\n});\ndescribe('Responsive Menu', function () {\n  var plugin;\n  var $html; // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {// it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.ResponsiveMenu($html, {});\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n});\ndescribe('Responsive Toggle', function () {\n  var plugin;\n  var $html; // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {// it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.ResponsiveToggle($html, {});\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n});\ndescribe('Reveal', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"reveal\" id=\"exampleModal1\" data-reveal>\\n\\t  Modal content\\n\\t  <button class=\"close-button\" data-close aria-label=\"Close modal\" type=\"button\">\\n\\t    <span aria-hidden=\"true\">&times;</span>\\n\\t  </button>\\n\\t</div>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('sets ARIA attributes for modal', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.should.have.attr('aria-hidden', 'true');\n      $html.should.have.attr('role', 'dialog');\n    });\n    it('detects anchor if one exists', function () {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      plugin.$anchor[0].should.be.equal($anchor[0]);\n      $anchor.remove();\n    });\n    it('sets ARIA attributes for anchor if one exists', function () {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $anchor.should.have.attr('aria-haspopup', 'true');\n      $anchor.should.have.attr('aria-controls', $html.attr('id'));\n      $anchor.remove();\n    });\n  });\n  describe('makeOverlay()', function () {\n    it('creates an overlay if overlay option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true\n      });\n      plugin.$overlay.should.be.an('object');\n      plugin.$overlay.should.have.class('reveal-overlay');\n      $.contains(document.body, plugin.$overlay[0]).should.be.true;\n    });\n  });\n  describe('open()', function () {\n    it('opens the modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.on('open.zf.reveal', function () {\n        $html.should.be.visible;\n        done();\n      });\n      plugin.open();\n    });\n    it('opens the overlay', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true\n      });\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        done();\n      });\n      plugin.open();\n    });\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.on('open.zf.reveal', function () {\n        $html.should.have.attr('aria-hidden', 'false');\n        $html.should.have.attr('tabindex', '-1');\n        done();\n      });\n      plugin.open();\n    });\n    it('adds class to body', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.on('open.zf.reveal', function () {\n        $('body').should.have.class('is-reveal-open');\n        done();\n      });\n      plugin.open();\n    });\n    it('adds optional overlay classes overlay element', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        additionalOverlayClasses: 'default'\n      });\n      $html.on('open.zf.reveal', function () {\n        $('.reveal-overlay').should.have.class('default');\n        done();\n      });\n      plugin.open();\n    }); // TODO: Check if  this.$element.trigger('closeme.zf.reveal', this.id) is correctly used.\n    // it('closes previously opened modal if multipleOpened option is false', function(done) {\n    //   $html = $(template).appendTo('body');\n    //   $html2 = $(template).attr('id', 'exampleModal2').appendTo('body');\n    //   plugin = new Foundation.Reveal($html, {multipleOpened: false});\n    //   plugin2 = new Foundation.Reveal($html2, {multipleOpened: false});\n    //   plugin.open();\n    //   plugin2.open();\n    //   $html.should.be.hidden;\n    //   plugin2.destroy();\n    //   $html2.remove();\n    // });\n\n    it('fires open.zf.reveal event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.on('open.zf.reveal', function () {\n        $html.should.be.visible;\n        done();\n      });\n      plugin.open();\n    });\n    it('traps focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        trapFocus: true\n      });\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n      $html.on('open.zf.reveal', function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.trapFocus.restore();\n        done();\n      });\n      plugin.open();\n    });\n  });\n  describe('close()', function () {\n    it('closes the modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n      plugin.close();\n    });\n    it('closes the overlay', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true\n      }); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        plugin.$overlay.should.be.hidden;\n        done();\n      });\n      plugin.close();\n    });\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.have.attr('aria-hidden', 'true');\n        done();\n      });\n      plugin.close();\n    });\n    it('removes class from body', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $('body').should.not.have.class('is-reveal-open');\n        done();\n      });\n      plugin.close();\n    });\n    it('does not remove class from body if another reveal is open', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        multipleOpened: true\n      });\n      var $html2 = $(template).attr('id', 'exampleModal2').appendTo('body');\n      var plugin2 = new Foundation.Reveal($html2, {\n        multipleOpened: true,\n        vOffset: 10\n      }); // Open both first\n\n      plugin.open();\n      plugin2.open();\n      $html.on('closed.zf.reveal', function () {\n        $('body').should.have.class('is-reveal-open');\n        plugin2.destroy();\n        $html2.remove();\n        done();\n      });\n      plugin.close();\n    });\n    it('fires closed.zf.reveal event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n      plugin.close();\n    });\n    it('releases focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        trapFocus: true\n      }); // Open it first\n\n      plugin.open();\n      var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n      $html.on('closed.zf.reveal', function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.releaseFocus.restore();\n        done();\n      });\n      plugin.close();\n    });\n    it('sets focus to anchor', function (done) {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        setTimeout(function () {\n          $anchor[0].should.be.equal(document.activeElement);\n          $anchor.remove();\n          done();\n        }, 0);\n      });\n      plugin.close();\n    });\n  });\n  describe('toggle()', function () {\n    it('opens a closed modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true\n      });\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        done();\n      });\n      plugin.open();\n    });\n    it('closes an open modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n      plugin.close();\n    });\n  });\n  describe('events()', function () {\n    it('opens the modal on anchor click', function (done) {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        $anchor.remove();\n        done();\n      });\n      $anchor.trigger('click');\n    });\n    it('closes a modal on overlay click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true,\n        closeOnClick: true\n      }); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n      plugin.$overlay.trigger('click');\n    });\n    it('not closes a modal on overlay click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {\n        overlay: true,\n        closeOnClick: false\n      }); // Open it first\n\n      plugin.open();\n      plugin.$overlay.trigger('click'); // Add timeout to make sure it does not close\n      // Timeout is required because closed event will not be fired\n\n      setTimeout(function () {\n        $html.should.be.visible;\n        done();\n      }, 10);\n    });\n    it('closes Reveal with click on close button', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {}); // Open it first\n\n      plugin.open();\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n      $html.find('[data-close]').focus().trigger('click');\n    });\n  });\n});\ndescribe('Slider', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"slider\" data-slider>\\n      <span class=\"slider-handle\" data-slider-handle role=\"slider\" tabindex=\"1\"></span>\\n      <span class=\"slider-fill\" data-slider-fill></span>\\n      <input type=\"hidden\">\\n    </div>';\n  Foundation.Slider.defaults.moveTime = 0;\n  Foundation.Slider.defaults.changedDelay = 0;\n  afterEach(function (done) {\n    // Timeout needed because even with changeDelay = 0 the changed.zf.slider event may be fired after this hook\n    plugin.destroy();\n    $html.remove();\n    done();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('stores handle, inout and fill elements', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n      plugin.$handle.should.be.an('object');\n      plugin.$input.should.be.an('object');\n      plugin.$fill.should.be.an('object');\n    });\n    it('stores two handle and input elements for two sided slider', function () {\n      $html = $(template).append('<span class=\"slider-handle\" data-slider-handle role=\"slider\" tabindex=\"1\"></span><input type=\"hidden\">').appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        doubleSided: true\n      });\n      plugin.$handle2.should.be.an('object');\n      plugin.$input2.should.be.an('object');\n    });\n    it('is disabled when disable option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        disabled: true\n      });\n      $html.should.have.class('disabled');\n    });\n  });\n  describe('setHandlePos()', function () {\n    it('positions the handle', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setHandlePos(plugin.$handle, 10, true);\n\n      plugin.$handle[0].style.left.should.not.be.equal('');\n    });\n    it('does nothing if disabled option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        disabled: true\n      });\n\n      plugin._setHandlePos(plugin.$handle, 10, true);\n\n      plugin.$handle[0].style.left.should.be.equal('');\n    });\n    it('fires changed.zf.slider event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        changedDelay: 50\n      });\n      $html.on('changed.zf.slider', function (e, $handle) {\n        $handle[0].should.be.equal(plugin.$handle[0]);\n        done();\n      }); // Rapidly change to see if event fires only once\n\n      var _loop = function (i) {\n        setTimeout(function () {\n          plugin._setHandlePos(plugin.$handle, i * 10, true);\n        }, i * 20);\n      };\n\n      for (var i = 0; i < 5; i++) {\n        _loop(i);\n      }\n    });\n    it('fires moved.zf.slider event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n      var timesCallbackCalled = 0;\n      $html.on('moved.zf.slider', function (e, $handle) {\n        if (++timesCallbackCalled === 5) {\n          $handle[0].should.be.equal(plugin.$handle[0]);\n          done();\n        }\n      }); // Rapidly change to see if event fires multiple times\n\n      var _loop2 = function (i) {\n        setTimeout(function () {\n          plugin._setHandlePos(plugin.$handle, i * 10, true);\n        }, i * 20);\n      };\n\n      for (var i = 0; i < 5; i++) {\n        _loop2(i);\n      }\n    });\n  });\n  describe('setValues()', function () {\n    it('updates ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setValues(plugin.$handle, 10);\n\n      plugin.$handle.should.have.attr('aria-valuenow', '10');\n    });\n    it('updates input value', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setValues(plugin.$handle, 10);\n\n      plugin.$input.val().should.have.be.equal('10');\n    });\n  });\n  describe('setInitAttr()', function () {\n    it('adds ARIA attributes to handle', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 50,\n        end: 70,\n        start: 20,\n        vertical: true\n      });\n      plugin.$handle.should.have.attr('role', 'slider');\n      plugin.$handle.should.have.attr('aria-controls', plugin.$handle.attr('id'));\n      plugin.$handle.should.have.attr('aria-valuemax', '70');\n      plugin.$handle.should.have.attr('aria-valuemin', '20');\n      plugin.$handle.should.have.attr('aria-valuenow', '50');\n      plugin.$handle.should.have.attr('aria-orientation', 'vertical');\n      plugin.$handle.should.have.attr('tabindex', '0');\n    });\n    it('adds attributes to input', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n      plugin.$input.should.have.attr('max', '100');\n      plugin.$input.should.have.attr('min', '0');\n      plugin.$input.should.have.attr('step', '1');\n    });\n  });\n  describe('keyboard events', function () {\n    it('sets value to minimum using HOME', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('HOME'));\n      plugin.$handle.should.have.attr('aria-valuenow', plugin.$handle.attr('aria-valuemin'));\n    });\n    it('increases value by step size on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1).toString());\n    });\n    it('increases value by step size on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1).toString());\n    });\n    it('decreases value by step size on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1).toString());\n    });\n    it('decreases value by step size on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1).toString());\n    });\n    it('decreases value by step size times 10 on SHIFT_ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT', {\n        shift: true\n      }));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1 * 10).toString());\n    });\n    it('decreases value by step size times 10 on SHIFT_ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT', {\n        shift: true\n      }));\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1 * 10).toString());\n    });\n  });\n});\ndescribe('Sticky', function () {\n  var plugin;\n  var $html; // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {// it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.Sticky($html, {});\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n});\ndescribe('Tabs', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <div>\\n      <ul class=\"tabs\" data-tabs id=\"example-tabs\">\\n        <li class=\"tabs-title is-active\"><a href=\"#panel1\" aria-selected=\"true\">Tab 1</a></li>\\n        <li class=\"tabs-title\"><a href=\"#panel2\">Tab 2</a></li>\\n        <li class=\"tabs-title\"><a data-tabs-target=\"panel3\" href=\"#/panel3\">Tab 3</a></li>\\n      </ul>\\n\\n      <div class=\"tabs-content\" data-tabs-content=\"example-tabs\">\\n        <div class=\"tabs-panel is-active\" id=\"panel1\">\\n          <p>one</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n        <div class=\"tabs-panel\" id=\"panel2\">\\n          <p>two</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n        <div class=\"tabs-panel\" id=\"panel3\">\\n          <p>three</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n      </div>\\n    </div>';\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {}); // Panels\n\n      $html.find('#panel1').should.have.attr('role', 'tabpanel');\n      $html.find('#panel1').should.have.attr('aria-labelledby', $html.find('[href=\"#panel1\"]').attr('id'));\n      $html.find('#panel1').should.not.have.attr('aria-hidden');\n      $html.find('#panel2').should.have.attr('aria-hidden', 'true'); // Links\n\n      $html.find('[href=\"#panel1\"]').should.have.attr('role', 'tab');\n      $html.find('[href=\"#panel1\"]').should.have.attr('aria-controls', $html.find('panel1').attr('id'));\n      $html.find('[href=\"#panel1\"]').should.have.attr('aria-selected', 'true');\n      $html.find('[href=\"#panel2\"]').should.have.attr('aria-selected', 'false'); // Tab list items\n\n      $html.find('[href=\"#panel1\"]').parent().should.have.attr('role', 'presentation');\n    });\n  });\n  describe('selectTab()', function () {\n    it('opens the selected tab via jQuery element', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab($html.find('#panel2'));\n      $html.find('#panel2').should.be.visible;\n    });\n    it('opens the selected tab via id string', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.be.visible;\n    });\n    it('opens the selected tab with data-tabs-target attribute', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#/panel3');\n      $html.find('#panel3').should.be.visible;\n    });\n  });\n  describe('_handleTabChange()', function () {\n    it('opens the selected tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n    it('sets ARIA attributes for open tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.have.not.attr('aria-hidden');\n      $html.find('[href=\"#panel2\"]').should.have.attr('aria-selected', 'true');\n    });\n    it('hides the open tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#panel2');\n      $html.find('#panel1').should.be.hidden;\n      $html.find('#panel1').should.not.have.class('is-active');\n    });\n    it('sets ARIA attributes for closed tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      plugin.selectTab('#panel2');\n      $html.find('#panel1').should.be.have.attr('aria-hidden', 'true');\n      $html.find('[href=\"#panel1\"]').should.be.have.attr('aria-selected', 'false');\n    });\n    it('fires change.zf.tabs event with target as data', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      $html.one('change.zf.tabs', function (e, $target) {\n        e.stopPropagation();\n        $html.find('[href=\"#panel2\"]').parent()[0].should.be.equal($target[0]);\n        done();\n      });\n      plugin.selectTab('#panel2');\n    });\n  });\n  describe('keyboard events', function () {\n    it('switches to next tab on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      $html.find('[href=\"#panel1\"]').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n    it('switches to next tab on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      $html.find('[href=\"#panel1\"]').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n    it('switches to previous tab on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      $html.find('[href=\"#panel2\"]').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n      $html.find('#panel1').should.be.visible;\n      $html.find('#panel1').should.have.class('is-active');\n    });\n    it('switches to previous tab on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n      $html.find('[href=\"#panel2\"]').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n      $html.find('#panel1').should.be.visible;\n      $html.find('#panel1').should.have.class('is-active');\n    });\n  });\n});\ndescribe('Toggler', function () {\n  var plugin;\n  var $html;\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('stores the class defined on the data-toggler attribute', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      plugin.className.should.equal('class');\n    });\n    it('stores the class defined on the data-toggler attribute (with leading dot)', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\".class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      plugin.className.should.equal('class');\n    });\n    it('stores defined animation classes', function () {\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      plugin.animationIn.should.equal('fade-in');\n      plugin.animationOut.should.equal('fade-out');\n    });\n    it('adds Aria attributes to click triggers', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      var $triggers = $('<div>\\n          <a data-open=\"toggler\">Open</a>\\n          <a data-close=\"toggler\">Close</a>\\n          <a data-toggle=\"toggler\">Toggle</a>\\n        </div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      $triggers.find('[data-open]').should.have.attr('aria-controls', 'toggler');\n      $triggers.find('[data-close]').should.have.attr('aria-controls', 'toggler');\n      $triggers.find('[data-toggle]').should.have.attr('aria-controls', 'toggler');\n      $triggers.remove();\n    });\n    it('sets aria-expanded to true if the element is visible', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      $('#toggler').should.have.attr('aria-expanded', 'true');\n    });\n    it('sets aria-expanded to false if the element is invisible', function () {\n      var $css = $('<style>#toggler { display: none }</style>').appendTo('body');\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      $('#toggler').should.have.attr('aria-expanded', 'false');\n      $css.remove();\n    });\n  });\n  describe('toggle()', function () {\n    it('calls Toggler._toggleClass() if the element toggles with a class');\n    it('calls Toggler._toggleAnimate() if the element toggles with animation');\n  });\n  describe('toggleClass()', function () {\n    it('toggles a class on the element', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin._toggleClass();\n\n      $('#toggler').should.have.class('class');\n\n      plugin._toggleClass();\n\n      $('#toggler').should.not.have.class('class');\n    });\n    it('updates aria-expanded after the class is toggled', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin._toggleClass();\n\n      $('#toggler').should.have.attr('aria-expanded', 'true');\n\n      plugin._toggleClass();\n\n      $('#toggler').should.have.attr('aria-expanded', 'false');\n    });\n  }); // [TODO] Re-enable this if you can get it working in PhantomJS\n\n  xdescribe('toggleAnimate()', function () {\n    it('animates an invisible element in', function (done) {\n      var $css = $('<style>#toggler { display: none; }</style>').appendTo('body');\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      $html.on('on.zf.toggler', function () {\n        $('#toggler').should.be.visible;\n        $('#toggler').should.have.attr('aria-expanded', 'true');\n        $css.remove();\n        done();\n      });\n\n      plugin._toggleAnimate();\n    });\n    it('animates an visible element out', function (done) {\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n      $html.on('off.zf.toggler', function () {\n        $('#toggler').should.be.hidden;\n        $('#toggler').should.have.attr('aria-expanded', 'false');\n        done();\n      });\n\n      plugin._toggleAnimate();\n    });\n  });\n});\ndescribe('Tooltip', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" tabindex=\"1\" title=\"TOOLTIP_CONTENT\">\\n      TEXT\\n    </span>';\n  Foundation.Tooltip.defaults.showOn = 'all';\n  Foundation.Tooltip.defaults.fadeOutDuration = 0;\n  Foundation.Tooltip.defaults.fadeInDuration = 0;\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n  describe('init()', function () {\n    it('has value of title attribute as content', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      plugin.template.text().should.equal('TOOLTIP_CONTENT');\n    });\n    it('has value of tipText option as content', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {\n        tipText: 'TOOLTIP_CONTENT_OPTION'\n      });\n      plugin.template.text().should.equal('TOOLTIP_CONTENT_OPTION');\n    });\n    it('uses value of template option as template', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {\n        template: '<div class=\"TEMPLATE_OPTION\"></div>'\n      });\n      plugin.template.should.have.class('TEMPLATE_OPTION');\n    });\n    it('uses value of triggerClass option as trigger class', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {\n        triggerClass: 'TRIGGER_CLASS_OPTION'\n      });\n      plugin.$element.should.have.class('TRIGGER_CLASS_OPTION');\n    });\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      plugin.$element.should.have.attr('aria-describedby', plugin.template.attr('id'));\n      plugin.template.should.have.attr('aria-hidden', 'true');\n      plugin.template.should.have.attr('role', 'tooltip');\n    });\n  });\n  describe('buildTemplate()', function () {\n    it('uses value of templateClasses option as template class', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {\n        templateClasses: 'TOOLTIP_CLASS_OPTION'\n      });\n      plugin.template.should.have.class('TOOLTIP_CLASS_OPTION');\n    });\n  });\n  describe('show()', function () {\n    it('shows the tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      plugin.show();\n      plugin.template.should.be.visible;\n      plugin.template.should.have.attr('aria-hidden', 'false');\n    });\n    it('fires show.zf.tooltip event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      $html.on('show.zf.tooltip', function () {\n        plugin.template.should.be.visible;\n        done();\n      });\n      plugin.show();\n    });\n  });\n  describe('hide()', function () {\n    it('hides the tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {}); // Show first\n\n      plugin.show();\n      plugin.hide();\n      plugin.template.should.be.hidden;\n      plugin.template.should.have.attr('aria-hidden', 'true');\n    });\n    it('fires hide.zf.tooltip event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {}); // Open it first\n\n      plugin.show();\n      $html.on('hide.zf.tooltip', function () {\n        plugin.template.should.be.hidden;\n        done();\n      });\n      plugin.hide();\n    });\n  });\n  describe('toggle()', function () {\n    it('shows a hidden tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n      plugin.toggle();\n      plugin.template.should.be.visible;\n      plugin.template.should.have.attr('aria-hidden', 'false');\n    });\n    it('hides a visible tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {}); // Show first\n\n      plugin.show();\n      plugin.toggle();\n      plugin.template.should.be.hidden;\n      plugin.template.should.have.attr('aria-hidden', 'true');\n    });\n  });\n});\ndescribe('Foundation box', function () {\n  var $html;\n  afterEach(function () {\n    if ($html) {\n      $html.remove();\n    }\n  });\n  describe('GetDimensions()', function () {\n    it('should be unable to get dimensions for window', function (done) {\n      try {\n        Foundation.Box.GetDimensions($(\"window\"));\n        should.fail();\n      } catch (err) {\n        done();\n      }\n    });\n    it('should be unable to get dimensions for document', function (done) {\n      try {\n        Foundation.Box.GetDimensions($(\"document\"));\n        should.fail();\n      } catch (err) {\n        done();\n      }\n    });\n    it('height and width of element', function () {\n      $html = $('<div id=\"rect-test\" style=\"height: 100px;width:200px;\"></div>').appendTo('body');\n      var dims = Foundation.Box.GetDimensions($(\"#rect-test\"));\n      dims.width.should.equal(200);\n      dims.height.should.equal(100);\n    });\n    it('parent height of element', function () {\n      $html = $('<div style=\"height: 200px;\"><div id=\"rect-test-parent\" style=\"height: 100px;width:200px;\"></div></div>').appendTo('body');\n      var dims = Foundation.Box.GetDimensions($(\"#rect-test-parent\"));\n      dims.width.should.equal(200);\n      dims.height.should.equal(100);\n      dims.parentDims.height.should.equal(200);\n    });\n  });\n});\ndescribe('Foundation core', function () {\n  it('exists on the window', function () {\n    window.Foundation.should.be.an('object');\n  });\n  it('is a jQuery prototype function', function () {\n    $.fn.foundation.should.to.be.a('function');\n  });\n  describe('rtl()', function () {\n    it('detects the text direction on the document', function () {\n      Foundation.rtl().should.be.false;\n      $('html').attr('dir', 'rtl');\n      Foundation.rtl().should.be.true;\n      $('html').attr('dir', 'ltr');\n    });\n  });\n  describe('plugin()', function () {\n    afterEach(function () {\n      delete Foundation._plugins['plugin'];\n      delete Foundation.Plugin;\n    });\n    it('adds Foundation plugins', function () {\n      function Plugin() {}\n\n      Foundation.plugin(Plugin, 'Plugin');\n\n      Foundation._plugins['plugin'].should.be.a('function');\n\n      Foundation.Plugin.should.be.a('function');\n    });\n    it('uses the name of the Plugin class/function if one is not provided', function () {\n      function Plugin() {}\n\n      Foundation.plugin(Plugin);\n\n      Foundation._plugins['plugin'].should.be.a('function');\n\n      Foundation.Plugin.should.be.a('function');\n    });\n  });\n  describe('registerPlugin()', function () {\n    it('registers a new instance of a plugin');\n  });\n  describe('unregisterPlugin()', function () {\n    it('un-registers a plugin being destroyed');\n  });\n  xdescribe('reInit()', function () {});\n  describe('GetYoDigits()', function () {\n    it('generates a random ID matching a given length', function () {\n      var id = Foundation.GetYoDigits(6);\n      id.should.be.a('string');\n      id.should.have.lengthOf(6);\n    });\n    it('can append a namespace to the number', function () {\n      var id = Foundation.GetYoDigits(6, 'plugin');\n      id.should.be.a('string');\n      id.should.have.lengthOf(6 + '-plugin'.length);\n      id.should.contain('-plugin');\n    });\n  });\n  describe('reflow()', function () {});\n  describe('getFnName()', function () {});\n  describe('transitionEnd()', function () {});\n  describe('throttle()', function () {});\n});\ndescribe('Keyboard util', function () {\n  /**\n   * Creates a dummy event to parse.\n   * Uses jQuery Event class constructor.\n   * @param  {number} keyCode Key code of the key that is simulated.\n   * @param  {object} opts    Options that say if modifiers are pressed.\n   * @return {Event}          Event to use.\n   */var createEvent = window.mockKeyboardEvent;\n  var keyCodes = {\n    'A': 65,\n    'TAB': 9,\n    'ENTER': 13,\n    'ESCAPE': 27,\n    'SPACE': 32,\n    'ARROW_LEFT': 37,\n    'ARROW_UP': 38,\n    'ARROW_RIGHT': 39,\n    'ARROW_DOWN': 40\n  };\n  it('exists on the Foundation API', function () {\n    window.Foundation.Keyboard.should.be.an('object');\n  });\n  describe('parseKey()', function () {\n    it('returns the character pressed for a normal key', function () {\n      var event = createEvent(keyCodes['A']),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n      parsedKey.should.be.equal('A');\n    });\n    it('returns the character pressed for special keys', function () {\n      for (var key in meteorBabelHelpers.sanitizeForInObject(keyCodes)) {\n        var keyCode = keyCodes[key];\n        var event = createEvent(keyCode),\n            parsedKey = Foundation.Keyboard.parseKey(event);\n        parsedKey.should.be.equal(key);\n      }\n    });\n    it('recognizes if CTRL was pressed', function () {\n      var event = createEvent(keyCodes['A'], {\n        ctrl: true\n      }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n      parsedKey.should.be.equal('CTRL_A');\n    });\n    it('recognizes if ALT was pressed', function () {\n      var event = createEvent(keyCodes['A'], {\n        alt: true\n      }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n      parsedKey.should.be.equal('ALT_A');\n    });\n    it('recognizes if SHIFT was pressed', function () {\n      var event = createEvent(keyCodes['A'], {\n        shift: true\n      }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n      parsedKey.should.be.equal('SHIFT_A');\n    });\n    it('recognizes if multiple modifiers were pressed', function () {\n      var event = createEvent(keyCodes['A'], {\n        shift: true,\n        alt: true,\n        ctrl: true\n      }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n      parsedKey.should.be.equal('ALT_CTRL_SHIFT_A');\n    });\n  });\n  describe('handleKey()', function () {\n    it('executes callback for given key event', function () {\n      var spy = sinon.spy(); // Register component\n\n      Foundation.Keyboard.register('MyComponent', {\n        'ESCAPE': 'close'\n      });\n      var event = createEvent(keyCodes['ESCAPE']);\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        close: function () {\n          spy();\n        }\n      });\n      spy.called.should.be.true;\n    });\n    it('executes handled callback for given key event', function () {\n      var spy = sinon.spy(); // Register component\n\n      Foundation.Keyboard.register('MyComponent', {\n        'ESCAPE': 'close'\n      });\n      var event = createEvent(keyCodes['ESCAPE']);\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        close: function () {// stuff\n        },\n        handled: function () {\n          spy();\n        }\n      });\n      spy.called.should.be.true;\n    });\n    it('executes unhandled callback for given key event', function () {\n      var spy = sinon.spy(); // Register component\n\n      Foundation.Keyboard.register('MyComponent', {});\n      var event = createEvent(keyCodes['ESCAPE']);\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        unhandled: function () {\n          spy();\n        }\n      });\n      spy.called.should.be.true;\n    });\n  });\n  describe('findFocusable()', function () {\n    it('finds focusable elements inside a container', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link</a>\\n            <button>Button</button>\\n          </div>').appendTo('body');\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n      $focusable.length.should.be.equal(2);\n      $html.remove();\n    });\n    it('does not find hidden focusable elements', function () {\n      var $html = $('<div>\\n            <a style=\"display: none;\" href=\"#\">Link</a>\\n            <button style=\"display: none;\">Button</button>\\n          </div>').appendTo('body');\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n      $focusable.length.should.be.equal(0);\n      $html.remove();\n    });\n    it('does not find disabled focusable elements', function () {\n      var $html = $('<div>\\n            <button disabled>Button</button>\\n          </div>').appendTo('body');\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n      $focusable.length.should.be.equal(0);\n      $html.remove();\n    });\n    it('does not find focusable elements with negative tabindex', function () {\n      var $html = $('<div>\\n            <button tabindex=\"-1\">Button</button>\\n          </div>').appendTo('body');\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n      $focusable.length.should.be.equal(0);\n      $html.remove();\n    });\n  });\n  describe('trapFocus()', function () {\n    it('moves the focus to the first focusable element', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').last().focus();\n      var event = createEvent(keyCodes['TAB']);\n      $(document.activeElement).trigger(event);\n      document.activeElement.should.be.equal($html.find('a').eq(0)[0]);\n      $html.remove();\n    });\n    it('moves the focus to the last focusable element', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').first().focus();\n      var event = createEvent(keyCodes['TAB'], {\n        shift: true\n      });\n      $(document.activeElement).trigger(event);\n      document.activeElement.should.be.equal($html.find('a').eq(2)[0]);\n      $html.remove();\n    });\n  });\n  describe('releaseFocus()', function () {\n    it('stops trapping the focus at the end', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').last().focus();\n      Foundation.Keyboard.releaseFocus($html);\n      var event = createEvent(keyCodes['TAB']);\n      $(document.activeElement).trigger(event);\n      document.activeElement.should.not.be.equal($html.find('a').eq(0)[0]);\n      $html.remove();\n    });\n    it('stops trapping the focus at the top', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').first().focus();\n      Foundation.Keyboard.releaseFocus($html);\n      var event = createEvent(createEvent(keyCodes['TAB'], {\n        shift: true\n      }));\n      $(document.activeElement).trigger(event);\n      document.activeElement.should.not.be.equal($html.find('a').eq(2)[0]);\n      $html.remove();\n    });\n  });\n});","map":{"version":3,"sources":["packages/zurb:foundation-sites/test/javascript/js-tests.js"],"names":["describe","plugin","$html","afterEach","destroy","remove","it","$","appendTo","Foundation","Abide","$element","should","be","an","options","validateInput","find","equal","val","template","Accordion","done","allowAllClosed","up","eq","have","attr","on","hidden","visible","not","down","multiExpand","toggle","focus","trigger","window","mockKeyboardEvent","document","activeElement","AccordionMenu","defaults","slideSpeed","setTimeout","multiOpen","hideAll","each","Drilldown","$submenuAnchors","$submenus","$menuItems","children","first","text","_show","class","_hide","_hideAll","one","skip","$dummyElement","shift","$dropdownController","$dropdownContainer","getDropdownController","buttonClasses","arguments","length","undefined","getDropdownContainer","dropdownClasses","Dropdown","trapFocus","spy","sinon","Keyboard","open","assert","called","restore","close","releaseFocus","position","alignment","DropdownMenu","beforeEach","addClass","getPath","type","size","generateTemplate","tag","path","Interchange","replace","style","backgroundImage","contain","calledWith","_reflow","_generateRules","rules","query","SPECIAL_QUERIES","specialQueriesCount","Object","keys","foundationMediaQueriesCount","MediaQuery","queries","push","name","value","_addBreakpoints","IHearYou","calledOnce","$content","generateUl","count","html","c","generateContent","duration","Magellan","animationDuration","target","scrollToLoc","isInViewport","offset","top","scrollTop","innerHeight","hasError","err","OffCanvas","$triggers","closeOnClick","$overlay","autoFocus","transitionend","triggerHandler","Orbit","useMUI","$wrapper","$slides","index","removeClass","$bullets","changeSlide","timerDelay","Reveal","$anchor","overlay","contains","body","true","additionalOverlayClasses","multipleOpened","$html2","plugin2","vOffset","Slider","moveTime","changedDelay","$handle","$input","$fill","append","doubleSided","$handle2","$input2","disabled","_setHandlePos","left","e","_loop","i","timesCallbackCalled","_loop2","_setValues","initialStart","end","start","vertical","step","toString","Tabs","parent","selectTab","$target","stopPropagation","Toggler","className","animationIn","animationOut","$css","_toggleClass","xdescribe","_toggleAnimate","Tooltip","showOn","fadeOutDuration","fadeInDuration","tipText","triggerClass","templateClasses","show","hide","Box","GetDimensions","fail","dims","width","height","parentDims","fn","foundation","to","a","rtl","false","_plugins","Plugin","id","GetYoDigits","lengthOf","createEvent","keyCodes","event","parsedKey","parseKey","key","keyCode","ctrl","alt","register","handleKey","handled","unhandled","$focusable","findFocusable","last"],"mappings":"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","file":"packages/zurb:foundation-sites/test/javascript/js-tests.js.map","sourcesContent":["/* jslint mocha: true */\n/*global describe, it, before, beforeEach, after, afterEach, $, Foundation */\n\ndescribe('Abide', function () {\n  var plugin;\n  var $html;\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element & plugin options', function () {\n      $html = $('<form data-abide novalidate></form>').appendTo('body');\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('validateInput()', function () {\n    it('returns true for hidden inputs', function () {\n      $html = $(\"<form data-abide novalidate><input type='hidden' required></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n\n    it('returns true for inputs with [data-abide-ignore]', function () {\n      $html = $(\"<form data-abide novalidate><input type='text' required data-abide-ignore></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n\n    it('returns true for checked checkboxes', function () {\n      $html = $(\"<form data-abide><input type='checkbox' required checked='checked'></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"input\")).should.equal(true);\n    });\n\n    it('returns false for unchecked checkboxes', function () {\n      $html = $(\"<form data-abide><input type='checkbox' required></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"input\")).should.equal(false);\n    });\n\n    it('returns true for selected select option', function () {\n      $html = $(\"<form data-abide><select required><option value=''></option><option value='One'>One</option><option value='Two' selected='selected'>Two</option></select></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"select\")).should.equal(true);\n      $html.find(\"select\").val().should.equal(\"Two\");\n    });\n\n    it('returns false for unselected select option', function () {\n      $html = $(\"<form data-abide><select required><option value=''></option><option value='One'>One</option><option value='Two'>Two</option></select></form>\").appendTo(\"body\");\n      plugin = new Foundation.Abide($html, {});\n\n      plugin.validateInput($html.find(\"select\")).should.equal(false);\n    });\n  });\n});\ndescribe('Accordion', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"accordion\" data-accordion>\\n  <li class=\"accordion-item is-active\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 1</a>\\n    <div class=\"accordion-content\" data-tab-content >\\n      <p>Panel 1. Lorem ipsum dolor</p>\\n      <a href=\"#\">Nowhere to Go</a>\\n    </div>\\n  </li>\\n  <li class=\"accordion-item\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 2</a>\\n    <div class=\"accordion-content\" data-tab-content>\\n      <textarea></textarea>\\n      <button class=\"button\">I do nothing!</button>\\n    </div>\\n  </li>\\n  <li class=\"accordion-item\" data-accordion-item>\\n    <a href=\"#\" class=\"accordion-title\">Accordion 3</a>\\n    <div class=\"accordion-content\" data-tab-content>\\n      Pick a date!\\n      <input type=\"date\"></input>\\n    </div>\\n  </li>\\n</ul>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('up()', function (done) {\n    it('closes the targeted container if allowAllClosed is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { allowAllClosed: true });\n\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { allowAllClosed: true });\n\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-title').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('.accordion-title').eq(0).should.have.attr('aria-selected', 'false');\n    });\n\n    it('not closes the open container if allowAllClosed is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { allowAllClosed: false });\n\n      plugin.up($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.be.visible;\n      // Element has aria-hidden=\"false\" not set if it has not been actively toggled so far\n      // Therefor check if it has not aria-hidden=\"true\"\n      $html.find('.accordion-content').eq(0).should.not.have.attr('aria-hidden', 'true');\n    });\n  });\n\n  describe('down()', function () {\n    it('opens the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-title').eq(1).should.have.attr('aria-expanded', 'true');\n      $html.find('.accordion-title').eq(1).should.have.attr('aria-selected', 'true');\n    });\n\n    it('closes open container if multiExpand is false', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { multiExpand: false });\n\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n\n    it('not closes open container if multiExpand is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { multiExpand: true });\n\n      plugin.down($html.find('.accordion-content').eq(1));\n      $html.find('.accordion-content').eq(0).should.be.visible;\n      // Element has aria-hidden=\"false\" not set if it has not been actively toggled so far\n      // Therefor check if it has not aria-hidden=\"true\"\n      $html.find('.accordion-content').eq(0).should.not.have.attr('aria-hidden', 'true');\n    });\n  });\n\n  describe('toggle()', function (done) {\n    it('closes the only open container if allowAllClosed is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { allowAllClosed: true });\n\n      plugin.toggle($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'true');\n      $html.on('up.zf.accordion', function () {\n        $html.find('.accordion-content').eq(0).should.be.hidden;\n        done();\n      });\n    });\n\n    it('not closes the only open container if allowAllClosed is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, { allowAllClosed: false });\n\n      plugin.toggle($html.find('.accordion-content').eq(0));\n      $html.find('.accordion-content').eq(0).should.be.visible;\n      $html.find('.accordion-content').eq(0).should.have.attr('aria-hidden', 'false');\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('opens next panel on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      $html.find('.accordion-title').eq(0).focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n      // Check if focus was moved\n      $html.find('.accordion-title').eq(1)[0].should.be.equal(document.activeElement);\n    });\n    it('opens previous panel on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      $html.find('.accordion-title').eq(2).focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n      // Check if focus was moved\n      $html.find('.accordion-title').eq(1)[0].should.be.equal(document.activeElement);\n    });\n    it('opens related panel on ENTER', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      $html.find('.accordion-title').eq(1).focus().trigger(window.mockKeyboardEvent('ENTER'));\n\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n    it('opens related panel on SPACE', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Accordion($html, {});\n\n      $html.find('.accordion-title').eq(1).focus().trigger(window.mockKeyboardEvent('SPACE'));\n\n      $html.find('.accordion-content').eq(1).should.be.visible;\n      $html.find('.accordion-content').eq(1).should.have.attr('aria-hidden', 'false');\n    });\n  });\n});\ndescribe('Accordion Menu', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <ul class=\"vertical menu\">\\n      <li>\\n        <a href=\"#\">Item 1</a>\\n        <ul class=\"menu vertical nested\">\\n          <li>\\n            <a href=\"#\">Item 1A</a>\\n            <ul class=\"menu vertical nested\">\\n              <li><a href=\"#\">Item 1Ai</a></li>\\n              <li><a href=\"#\">Item 1Aii</a></li>\\n              <li><a href=\"#\">Item 1Aiii</a></li>\\n            </ul>\\n          </li>\\n          <li><a href=\"#\">Item 1B</a></li>\\n          <li><a href=\"#\">Item 1C</a></li>\\n        </ul>\\n      </li>\\n      <li>\\n        <a href=\"#\">Item 2</a>\\n        <ul class=\"menu vertical nested\">\\n          <li><a href=\"#\">Item 2A</a></li>\\n          <li><a href=\"#\">Item 2B</a></li>\\n        </ul>\\n      </li>\\n      <li><a href=\"#\">Item 3</a></li>\\n    </ul>';\n  Foundation.AccordionMenu.defaults.slideSpeed = 0;\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('up()', function () {\n    it('closes the targeted submenu', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html);\n\n      // Open it first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n      setTimeout(function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n        done();\n      }, 1);\n    });\n\n    it('toggles attributes of title of the targeted container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      // Open it first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n    });\n\n    it('fires up.zf.accordionMenu event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, { slideSpeed: 200 });\n\n      // Open it first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      $html.on('up.zf.accordionMenu', function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n        done();\n      });\n      plugin.up($html.find('.is-accordion-submenu').eq(0));\n    });\n  });\n\n  describe('down()', function () {\n    it('opens the targeted submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n\n    it('toggles attributes of title of the targeted submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n    });\n\n    it('closes open submenu if multiOpen is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, { multiOpen: false });\n\n      // Open another one first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n      $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n    });\n\n    it('not closes open submenu if multiOpen is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, { multiOpen: true });\n\n      // Open another one first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n\n    it('fires down.zf.accordionMenu event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, { slideSpeed: 200 });\n\n      $html.on('down.zf.accordionMenu', function () {\n        $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n        done();\n      });\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n    });\n  });\n\n  describe('toggle()', function () {\n    it('opens a closed container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      plugin.toggle($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.visible;\n    });\n\n    it('closes an open container', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      // Open first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n\n      plugin.toggle($html.find('.is-accordion-submenu').eq(0));\n      $html.find('.is-accordion-submenu').eq(0).should.be.hidden;\n    });\n  });\n\n  describe('hideAll()', function () {\n    it('closes all accordions', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.AccordionMenu($html, {});\n\n      // Open some first\n      plugin.down($html.find('.is-accordion-submenu').eq(0));\n      plugin.down($html.find('.is-accordion-submenu').eq(1));\n      plugin.down($html.find('.is-accordion-submenu').eq(2));\n\n      plugin.hideAll();\n\n      $html.find('[data-submenu]').each(function () {\n        $(this).should.be.hidden;\n      });\n    });\n  });\n});\ndescribe('Drilldown Menu', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"menu\" data-drilldown style=\"width: 200px\" id=\"m1\">\\n    <li>\\n      <a href=\"#\">Item 1</a>\\n      <ul class=\"menu\">\\n        <li>\\n          <a href=\"#\">Item 1A</a>\\n          <ul class=\"menu\">\\n            <li><a href=\"#Item-1Aa\">Item 1Aa</a></li>\\n            <li><a href=\"#Item-1Ba\">Item 1Ba</a></li>\\n          </ul>\\n        </li>\\n        <li><a href=\"#Item-1B\">Item 1B</a></li>\\n        <li><a href=\"#Item-1C\">Item 1C</a></li>\\n      </ul>\\n    </li>\\n    <li>\\n      <a href=\"#\">Item 2</a>\\n      <ul class=\"menu\">\\n        <li><a href=\"#Item-2A\">Item 2A</a></li>\\n        <li><a href=\"#Item-2B\">Item 2B</a></li>\\n      </ul>\\n    </li>\\n    <li><a href=\"#Item-3\"> Item 3</a></li>\\n  </ul>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('stores additional elements', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$submenuAnchors.should.be.an('object');\n      plugin.$submenus.should.be.an('object');\n      plugin.$menuItems.should.be.an('object');\n    });\n  });\n\n  describe('prepareMenu()', function () {\n    it('wraps the submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n    });\n    it('adds ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin.$element.should.have.attr('role', 'tree');\n\n      plugin.$element.find('[data-submenu]').each(function () {\n        $(this).should.have.attr('role', 'group');\n        $(this).should.have.attr('aria-hidden', 'true');\n      });\n\n      plugin.$element.find('.is-drilldown-submenu-parent').each(function () {\n        $(this).should.have.attr('aria-haspopup', 'true');\n        $(this).should.have.attr('aria-expanded', 'false');\n        $(this).should.have.attr('aria-label', $(this).children('a').first().text());\n      });\n\n      plugin.$element.find('li:not(.js-drilldown-back)').each(function () {\n        $(this).should.have.attr('role', 'treeitem');\n      });\n    });\n  });\n\n  describe('show()', function () {\n    it('shows the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'true');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'false');\n    });\n    it('fires open.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.on('open.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).find('ul').should.have.class('is-active');\n        done();\n      });\n\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n    });\n  });\n\n  describe('hide()', function () {\n    it('hides the given submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(0).should.have.attr('aria-expanded', 'false');\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.attr('aria-hidden', 'true');\n    });\n    it('fires hide.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(0));\n\n      $html.on('hide.zf.drilldown', function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-closing');\n        done();\n      });\n\n      plugin._hide($html.find('li.is-drilldown-submenu-parent').eq(0).children('ul'));\n    });\n  });\n\n  describe('hideAll()', function () {\n    it('hides all submenus', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      plugin._hideAll();\n\n      $html.find('ul[data-submenu].is-active').each(function () {\n        // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n        $(this).should.have.class('is-closing');\n      });\n    });\n    it('fires closed.zf.drilldown event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(2));\n\n      $html.one('closed.zf.drilldown', function () {\n        $html.find('ul[data-submenu].is-active').each(function () {\n          // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n          $(this).should.have.class('is-closing');\n        });\n        done();\n      });\n\n      plugin._hideAll();\n    });\n  });\n\n  describe('back()', function () {\n    it('hides current submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click');\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').should.have.class('is-closing');\n    });\n    it('shows parent submenu', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open one first\n      plugin._show($html.find('li.is-drilldown-submenu-parent').eq(1));\n\n      $html.find('li.is-drilldown-submenu-parent').eq(1).children('ul').children('.js-drilldown-back').trigger('click');\n\n      // Checking with .be.hidden is not possible because they don't have display: block but z-index: -1\n      $html.find('li.is-drilldown-submenu-parent').eq(0).children('ul').should.have.class('is-active');\n    });\n  });\n\n  describe('keyboard events', function () {\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going down', function () {\n      $html = $(template).appendTo('body');\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Focus last element\n      $dummyElement.focus();\n      $html.find('> li:last-child > a').trigger(window.mockKeyboardEvent('TAB'));\n\n      document.activeElement.should.not.be.equal($html.find('> li:last-child > a')[0]);\n\n      $dummyElement.remove();\n    });\n    // Currently not testable, as triggered event won't move on focus\n    it.skip('does not trap focus on root element going up', function () {\n      var $dummyElement = $('<a tabindex=\"0\">Dummy</a>').appendTo('body'); // Dummy target to see if focus is not trapped\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Focus first element\n      $dummyElement.focus();\n      $html.find('> li:first-child > a').trigger(window.mockKeyboardEvent('TAB', { shift: true }));\n\n      document.activeElement.should.not.be.equal($html.find('> li:first-child > a')[0]);\n\n      $dummyElement.remove();\n    });\n    it('closes current sub menu using ESC', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n    it('moves focus to next element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('TAB'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on TAB', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('TAB', { shift: true }));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('moves focus to next element on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n    });\n    it('moves focus to previous element on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    it('opens child element on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-active');\n    });\n    it('closes child element on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Drilldown($html, {});\n\n      // Open it first\n      plugin._show($html.find('> li:nth-child(1)'));\n\n      $html.find('> li:nth-child(1) > ul > li:first-child > a').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n      $html.find('> li:nth-child(1) > ul').should.have.class('is-closing');\n    });\n  });\n});\ndescribe('Dropdown', function () {\n  var plugin = void 0;\n  var $dropdownController = void 0;\n  var $dropdownContainer = void 0;\n\n  var getDropdownController = function () {\n    var buttonClasses = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return '<button class=\"' + buttonClasses + '\" type=\"button\" data-toggle=\"my-dropdown\">toggle</button>';\n  };\n  var getDropdownContainer = function () {\n    var dropdownClasses = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    return '<div class=\"' + dropdownClasses + '\" data-dropdown id=\"my-dropdown\">Dropdown</div>';\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $dropdownController.remove();\n    $dropdownContainer.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element & plugin options', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('open()', function () {\n    it('traps focus if trapFocus option is true', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, { trapFocus: true });\n\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n      plugin.open();\n\n      sinon.assert.called(spy);\n      Foundation.Keyboard.trapFocus.restore();\n    });\n  });\n\n  describe('close()', function () {\n    it('releases focus if trapFocus option is true', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, { trapFocus: true });\n\n      // Open it first...\n      plugin.open();\n\n      var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n      plugin.close();\n\n      sinon.assert.called(spy);\n      Foundation.Keyboard.releaseFocus.restore();\n    });\n  });\n\n  describe('inferred positioning', function () {\n    it('default orientation should be bottom', function () {\n      $dropdownController = $(getDropdownController()).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n\n      plugin.open();\n      plugin.position.should.equal('bottom');\n    });\n\n    it('gets right alignment from float-right', function () {\n      $dropdownController = $(getDropdownController('custom-style-before float-right custom-style-after')).appendTo('body');\n      $dropdownContainer = $(getDropdownContainer()).appendTo('body');\n      plugin = new Foundation.Dropdown($dropdownContainer, {});\n\n      plugin.open();\n      plugin.position.should.equal('bottom');\n      plugin.alignment.should.equal('right');\n    });\n  });\n});\ndescribe('Dropdown Menu', function () {\n  var plugin;\n  var $html;\n  var template = '<ul class=\"dropdown menu\" data-dropdown-menu>\\n    <li>\\n      <a href=\"#Item-1\">Item 1</a>\\n      <ul class=\"menu\">\\n      <li><a href=\"#Item-1A\">Item 1A</a></li>\\n      <li>\\n        <a href=\"#Item-1B\">Item 1B</a>\\n        <ul class=\"menu\">\\n        <li><a href=\"#Item-1Bi\">Item 1B i</a></li>\\n        <li><a href=\"#Item-1Bii\">Item 1B ii</a></li>\\n        <li>\\n          <a href=\"#Item-1Biii\">Item 1B iii</a>\\n          <ul class=\"menu\">\\n          <li><a href=\"#Item-1Biiialpha\">Item 1B iii alpha</a></li>\\n          <li><a href=\"#Item-1Biiiomega\">Item 1B iii omega</a></li>\\n          </ul>\\n        </li>\\n        <li>\\n          <a href=\"#Item-1Biv\">Item 1B iv</a>\\n          <ul class=\"menu\">\\n          <li><a href=\"#Item-1Bivalpha\">Item 1B iv alpha</a></li>\\n          </ul>\\n        </li>\\n        </ul>\\n      </li>\\n      <li><a href=\"#Item-1C\">Item 1C</a></li>\\n      </ul>\\n    </li>\\n    <li>\\n      <a href=\"#Item-2\">Item 2</a>\\n      <ul class=\"menu\">\\n      <li><a href=\"#Item-2A\">Item 2A</a></li>\\n      <li><a href=\"#Item-2B\">Item 2B</a></li>\\n      </ul>\\n    </li>\\n    <li><a href=\"#Item-3\">Item 3</a></li>\\n    <li><a href=\"#Item-4\">Item 4</a></li>\\n  </ul>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.DropdownMenu($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('closes current sub menu using ESCAPE', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.DropdownMenu($html, {});\n\n      // Open it first\n      plugin._show($html.find('> li:nth-child(1) > ul'));\n\n      $html.find('> li:nth-child(1) > ul > li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n\n      $html.find('> li:nth-child(1)').should.not.have.class('is-active');\n      $html.find('> li:nth-child(1) > ul').should.not.have.class('js-dropdown-active');\n      document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n    });\n    describe('horizontal', function () {\n      beforeEach(function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n      });\n      it('moves focus to next tab on ARROW_RIGHT', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n      });\n      it('moves focus to previous tab on ARROW_LEFT', function () {\n        $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of tab on ARROW_DOWN', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n        $html.find('> li:nth-child(1)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('moves focus to previous sub element on ARROW_UP', function () {\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of sub menu on ARROW_RIGHT', function () {\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(1) > a')[0]);\n      });\n    });\n    describe('vertical', function () {\n      beforeEach(function () {\n        $html = $(template).addClass('vertical').appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n      });\n      it('moves focus to next tab on ARROW_DOWN', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(2) > a')[0]);\n      });\n      it('moves focus to previous tab on ARROW_UP', function () {\n        $html.find('> li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of tab on ARROW_RIGHT', function () {\n        $html.find('> li:nth-child(1) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n        $html.find('> li:nth-child(1)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('moves focus to previous sub element on ARROW_UP', function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(1) > a')[0]);\n      });\n      it('opens child element of sub menu on ARROW_RIGHT', function () {\n        $html = $(template).appendTo('body');\n        plugin = new Foundation.DropdownMenu($html, {});\n\n        // Open it first\n        plugin._show($html.find('> li:nth-child(1) > ul'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > a').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2)').should.have.class('is-active');\n        $html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul').should.have.class('js-dropdown-active');\n        document.activeElement.should.be.equal($html.find('> li:nth-child(1) > ul > li:nth-child(2) > ul > li:nth-child(1) > a')[0]);\n      });\n    });\n  });\n});\ndescribe('Equalizer', function () {\n\tvar plugin;\n\tvar $html;\n\n\t// afterEach(function() {\n\t// \tplugin.destroy();\n\t// \t$html.remove();\n\t// });\n\n\tdescribe('constructor()', function () {\n\t\t// it('', function() {\n\t\t// \t$html = $('').appendTo('body');\n\t\t// \tplugin = new Foundation.Equalizer($html, {});\n\n\t\t// \tplugin.$element.should.be.an('object');\n\t\t// \tplugin.options.should.be.an('object');\n\t\t// });\n\t});\n});\ndescribe('Interchange', function () {\n  var plugin;\n  var $html;\n\n  /**\n   * Generates paths to different assets\n   * @param  {[type]} type [description]\n   * @param  {[type]} size [description]\n   * @return {[type]}      [description]\n   */\n  var getPath = function (type, size) {\n    switch (type) {\n      case 'image':\n      case 'background':\n        return '_build/assets/img/interchange/strip_icc()/' + size + '.jpg';\n      default:\n        return '_build/assets/partials/interchange-' + size + '.html';\n    }\n  };\n  /**\n   * Generates templates to use based on type.\n   * @param  {string} type Type to generate, image, background or template.\n   * @return {string}      Generated template.\n   */\n  var generateTemplate = function (type) {\n    var type = type || 'template',\n        tag = type === 'image' ? 'img' : 'div',\n        path;\n    switch (type) {\n      case 'image':\n        return '<img data-interchange=\"\\n            [' + getPath(type, 'small') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \">';\n      case 'background':\n        return '<div data-interchange=\"\\n            [' + getPath(type, 'small') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \"></div>';\n      default:\n        return '<div data-interchange=\"\\n            [' + getPath(type, 'default') + ', small],\\n            [' + getPath(type, 'medium') + ', medium],\\n            [' + getPath(type, 'large') + ', large]\\n          \"></div>';\n    }\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(generateTemplate('template')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('replace()', function () {\n    it('replaces src attribute of img', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin.replace(getPath('img', 'large'));\n\n      $html.should.have.attr('src', getPath('img', 'large'));\n    });\n\n    it('replaces background style of divs', function () {\n      $html = $(generateTemplate('background')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin.replace(getPath('background', 'large'));\n\n      $html[0].style.backgroundImage.should.contain(getPath('background', 'large').replace(/\\(/g, '%28').replace(/\\)/g, '%29'));\n    });\n\n    it('replaces contents of div with templates', function () {\n      $html = $(generateTemplate('template')).attr('data-interchange', '').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      var spy = sinon.spy($, 'get');\n\n      plugin.replace(getPath('template', 'large'));\n\n      sinon.assert.calledWith(spy, getPath('template', 'large'));\n\n      spy.restore();\n    });\n\n    it('fires replaced.zf.interchange event', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      var spy = sinon.spy();\n      $html.on('replaced.zf.interchange', spy);\n\n      plugin.replace(getPath('image', 'large'));\n\n      sinon.assert.called(spy);\n    });\n  });\n\n  describe('reflow()', function () {\n    it('calls replace for given media query', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '[image.png, (min-width: 1px)]').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      var spy = sinon.spy();\n      plugin.replace = spy;\n\n      plugin._reflow();\n\n      sinon.assert.calledWith(spy, 'image.png');\n    });\n  });\n\n  describe('generateRules()', function () {\n    it('extracts rules from the plugin element', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin._generateRules($html);\n\n      plugin.rules.length.should.be.equal(3);\n    });\n\n    it('extracts special queries from the plugin element', function () {\n      $html = $(generateTemplate('image')).attr('data-interchange', '[image.png, retina]').appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      plugin._generateRules($html);\n\n      plugin.rules[0].query.should.be.equal(Foundation.Interchange.SPECIAL_QUERIES['retina']);\n    });\n  });\n\n  describe('addBreakpoints()', function () {\n    it('adds Foundation breakpoints to special queries', function () {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n\n      var specialQueriesCount = Object.keys(Foundation.Interchange.SPECIAL_QUERIES).length,\n          foundationMediaQueriesCount = Foundation.MediaQuery.queries.length;\n\n      Foundation.MediaQuery.queries.push({\n        name: 'test-query',\n        value: 'test-query-value'\n      });\n\n      plugin._addBreakpoints($html);\n\n      Object.keys(Foundation.Interchange.SPECIAL_QUERIES).length.should.be.equal(specialQueriesCount + 1);\n\n      // Reset Foundation.MediaQueries\n      Foundation.MediaQuery.queries.length = foundationMediaQueriesCount;\n    });\n  });\n\n  describe('events()', function () {\n    it('calls reflow on viewport size change once', function (done) {\n      $html = $(generateTemplate('image')).appendTo('body');\n      plugin = new Foundation.Interchange($html, {});\n      Foundation.IHearYou();\n      var spy = sinon.spy(plugin, '_reflow');\n\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 1);\n\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 5);\n\n      setTimeout(function () {\n        $(window).trigger('resize');\n      }, 10);\n\n      setTimeout(function () {\n        // Wait for third trigger...\n        sinon.assert.calledOnce(spy);\n        done();\n      }, 50);\n    });\n  });\n});\ndescribe('Magellan', function () {\n  var plugin;\n  var $html, $content;\n\n  var generateUl = function (count) {\n    var html = '';\n    html += '<ul class=\"vertical-menu\">';\n    for (var c = 0; c < count; c++) {\n      html += '<li><a href=\"#target-' + c + '\">Section ' + c + '</a></li>';\n    }\n    html += '</ul>';\n    return html;\n  };\n  var generateContent = function (count) {\n    var html = '';\n    html += '<div>';\n    for (var c = 0; c < count; c++) {\n      html += '<div id=\"target-' + c + '\" style=\"height: 1000px\";>Section ' + c + '</div>';\n    }\n    html += '</div>';\n    return html;\n  };\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n    $content.remove();\n  });\n\n  // afterEach(function() {\n  // \tplugin.destroy();\n  // \t$html.remove();\n  // });\n\n  describe('constructor()', function () {\n    // it('', function() {\n    // \t$html = $('').appendTo('body');\n    // \tplugin = new Foundation.Magellan($html, {});\n\n    // \tplugin.$element.should.be.an('object');\n    // \tplugin.options.should.be.an('object');\n    // });\n  });\n\n  describe('scrollToLoc()', function () {\n    it('scrolls the selected element into viewport', function (done) {\n      var count = 5,\n          duration = 200;\n      $html = $(generateUl(count)).appendTo('body');\n      $content = $(generateContent(count)).appendTo('body');\n      plugin = new Foundation.Magellan($html, {\n        animationDuration: duration\n      });\n\n      // Jump to last section\n      var target = $html.find('a').eq(-1).attr('href');\n      plugin.scrollToLoc(target);\n\n      // The `update` event doesn't work properly because it fires too often\n      setTimeout(function () {\n        var isInViewport = false;\n        if ($content.find('div').eq(-1).offset().top > $('body').scrollTop() && $content.offset().top < $('body').scrollTop() + $('body').innerHeight()) {\n          isInViewport = true;\n        }\n        isInViewport.should.equal(true);\n        done();\n      }, duration);\n    });\n\n    it('fails gracefully when target does not exist', function () {\n      var count = 5,\n          duration = 200;\n      $html = $(generateUl(count)).appendTo('body');\n      $content = $(generateContent(count - 1)).appendTo('body');\n      plugin = new Foundation.Magellan($html, {\n        animationDuration: duration\n      });\n\n      var hasError = false;\n      try {\n        var target = $html.find('a').eq(-1).attr('href');\n        plugin.scrollToLoc(target);\n      } catch (err) {\n        hasError = true;\n      }\n      hasError.should.equal(false);\n    });\n  });\n});\ndescribe('Off Canvas', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"off-canvas-wrapper\">\\n      <div class=\"off-canvas-wrapper-inner\" data-off-canvas-wrapper>\\n        <div class=\"off-canvas position-left\" id=\"offCanvas\" data-off-canvas data-content-scroll=\"false\">\\n\\n          <!-- Close button -->\\n          <button class=\"close-button\" aria-label=\"Close menu\" type=\"button\" data-close>\\n            <span aria-hidden=\"true\">&times;</span>\\n          </button>\\n\\n          <!-- Menu -->\\n          <ul class=\"vertical menu\">\\n            <li><a href=\"#\">Foundation</a></li>\\n            <li><a href=\"#\">Dot</a></li>\\n            <li><a href=\"#\">ZURB</a></li>\\n            <li><a href=\"#\">Com</a></li>\\n            <li><a href=\"#\">Slash</a></li>\\n            <li><a href=\"#\">Sites</a></li>\\n          </ul>\\n\\n        </div>\\n\\n        <div class=\"off-canvas-content\" data-off-canvas-content>\\n          <!-- Page content -->\\n          PAGE_CONTENT.\\n\\n          <!-- Triggers -->\\n          <button type=\"button\" class=\"button\" data-toggle=\"offCanvas\">Open Menu</button>\\n        </div>\\n      </div>\\n    </div>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('finds triggers for the Off Canvas', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      plugin.$triggers.length.should.be.equal(1);\n    });\n\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      plugin.$element.should.have.attr('aria-hidden', 'true');\n      plugin.$triggers.should.have.attr('aria-controls', plugin.$element.attr('id'));\n      plugin.$triggers.should.have.attr('aria-expanded', 'false');\n    });\n\n    it('closes Off Canvas on outside click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), { closeOnClick: true });\n\n      plugin.$overlay.should.be.an('object');\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$overlay.trigger('click');\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      });\n\n      plugin.open();\n    });\n  });\n\n  describe('open()', function () {\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      //$html.one(Foundation.transitionend($html), function() {\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$triggers.should.have.attr('aria-expanded', 'true');\n        plugin.$element.should.have.attr('aria-hidden', 'false');\n        done();\n      });\n\n      plugin.open();\n    });\n\n    it('adds active classes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        setTimeout(function () {\n          plugin.$element.should.have.class('is-open');\n          $('body').should.have.class('is-off-canvas-open');\n          done();\n        }, 1);\n      });\n\n      plugin.open();\n    });\n\n    it('focusses Off Canvas if autoFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), { autoFocus: true });\n\n      plugin.$element.one(Foundation.transitionend(plugin.$element), function () {\n        setTimeout(function () {\n          plugin.$element.find('a, button')[0].should.be.equal(document.activeElement);\n          done();\n        }, 1);\n      });\n\n      plugin.open();\n      // fake transitionend for console tests\n      plugin.$element.triggerHandler(Foundation.transitionend(plugin.$element));\n    });\n\n    it('traps focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), { trapFocus: true });\n\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n\n      $html.one(Foundation.transitionend($html), function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.trapFocus.restore();\n        done();\n      });\n\n      plugin.open();\n    });\n\n    it('fires opened.zf.offcanvas event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        done();\n      });\n\n      plugin.open();\n    });\n  });\n\n  describe('close()', function () {\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.close();\n\n        plugin.$triggers.should.have.attr('aria-expanded', 'false');\n        plugin.$element.should.have.attr('aria-hidden', 'true');\n        done();\n      });\n\n      // Open it first\n      plugin.open();\n    });\n\n    it('removes active classes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        setTimeout(function () {\n          plugin.close();\n\n          plugin.$element.should.not.have.class('is-open');\n          $('body').should.not.have.class('is-off-canvas-open');\n          done();\n        }, 1);\n      });\n\n      // Open it first\n      plugin.open();\n    });\n\n    it('fires closed.zf.offcanvas event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        $html.one('closed.zf.offcanvas', function () {\n          done();\n        });\n\n        plugin.close();\n      });\n\n      // Open it first\n      plugin.open();\n    });\n\n    it('releases focus if trapFocus option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), { trapFocus: true });\n\n      $html.one(Foundation.transitionend($html), function () {\n        var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n\n        plugin.close();\n\n        sinon.assert.called(spy);\n        Foundation.Keyboard.releaseFocus.restore();\n      });\n\n      // Open it first...\n      plugin.open();\n    });\n  });\n\n  describe('toggle()', function () {\n    it('opens a closed Off Canvas', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$element.should.have.class('is-open');\n        done();\n      });\n\n      plugin.toggle();\n    });\n\n    it('closes an open Off Canvas', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.toggle();\n\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      });\n\n      // Open it first\n      plugin.toggle();\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('closes Off Canvas on ESCAPE', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.OffCanvas($html.find('[data-off-canvas]'), {});\n\n      $html.one('opened.zf.offcanvas', function () {\n        plugin.$element.focus().trigger(window.mockKeyboardEvent('ESCAPE'));\n\n        plugin.$element.should.not.have.class('is-open');\n        done();\n      });\n\n      // Open it first\n      plugin.open();\n    });\n  });\n});\ndescribe('Orbit', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"orbit\" role=\"region\" aria-label=\"Favorite Space Pictures\" data-orbit>\\n    <ul class=\"orbit-container\">\\n      <button class=\"orbit-previous\"><span class=\"show-for-sr\">Previous Slide</span>&#9664;&#xFE0E;</button>\\n      <button class=\"orbit-next\"><span class=\"show-for-sr\">Next Slide</span>&#9654;&#xFE0E;</button>\\n      <li class=\"is-active orbit-slide\">\\n        Slide #1 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #2 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #3 content.\\n      </li>\\n      <li class=\"orbit-slide\">\\n        Slide #4 content.\\n      </li>\\n    </ul>\\n    <nav class=\"orbit-bullets\">\\n      <button class=\"is-active\" data-slide=\"0\"><span class=\"show-for-sr\">First slide details.</span><span class=\"show-for-sr\">Current Slide</span></button>\\n      <button data-slide=\"1\"><span class=\"show-for-sr\">Second slide details.</span></button>\\n      <button data-slide=\"2\"><span class=\"show-for-sr\">Third slide details.</span></button>\\n      <button data-slide=\"3\"><span class=\"show-for-sr\">Fourth slide details.</span></button>\\n    </nav>\\n  </div>';\n  Foundation.Orbit.defaults.useMUI = false;\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.$wrapper.should.be.an('object');\n      plugin.$slides.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('shows the first slide', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-slide').eq(0).should.be.visible;\n    });\n    it('hides all slides except the first one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-slide').each(function (index) {\n        if (index === 0) {\n          return;\n        } // Not for the first one as this is visible\n        $(this).should.be.hidden;\n      });\n    });\n    it('makes slide with is-active class active initially', function () {\n      $html = $(template).appendTo('body');\n      $html.find('.orbit-slide.is-active').removeClass('is-active');\n      $html.find('.orbit-slide').eq(2).addClass('is-active');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n  });\n\n  describe('loadBullets()', function () {\n    it('stores the bullets', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.$bullets.should.be.an('object');\n    });\n  });\n\n  describe('changeSlide()', function () {\n    it('changes slides to the next one for ltr is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.changeSlide(true);\n\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(1).should.be.visible;\n    });\n    it('changes slides to the last one for ltr is false', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.changeSlide(false);\n\n      $html.find('.orbit-slide').eq(0).should.not.have.class('is-active');\n      $html.find('.orbit-slide').eq(-1).should.have.class('is-active');\n    });\n    it('changes slides to the chosen one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.changeSlide(true, $html.find('.orbit-slide').eq(2), 2);\n\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n    it('toggles ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.changeSlide(true);\n\n      $html.find('.orbit-slide').eq(0).should.not.have.attr('aria-live');\n      $html.find('.orbit-slide').eq(1).should.have.attr('aria-live', 'polite');\n    });\n    it('fires beforeslidechange.zf.orbit event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.on('beforeslidechange.zf.orbit', function () {\n        // Old slide should still be active\n        $html.find('.orbit-slide').eq(0).should.be.visible;\n        done();\n      });\n      plugin.changeSlide(true);\n    });\n    it('fires slidechange.zf.orbit event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.on('slidechange.zf.orbit', function () {\n        // New slide is already active\n        $html.find('.orbit-slide').eq(1).should.be.visible;\n        done();\n      });\n      plugin.changeSlide(true);\n    });\n  });\n\n  describe('updateBullets()', function () {\n    it('updates the bullets', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      plugin.changeSlide(true);\n\n      $html.find('.orbit-bullets [data-slide]').eq(0).should.not.have.class('is-active');\n      $html.find('.orbit-bullets [data-slide]').eq(1).should.have.class('is-active');\n    });\n  });\n\n  describe('events()', function () {\n    it('changes slides on bullet click', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-bullets [data-slide]').eq(2).trigger('click');\n\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(2).should.be.visible;\n    });\n    it('changes slides to the previous one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-previous').trigger('click');\n\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(-1).should.be.visible;\n    });\n    it('changes slides to the next one', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n\n      $html.find('.orbit-next').trigger('click');\n\n      $html.find('.orbit-slide').eq(0).should.be.hidden;\n      $html.find('.orbit-slide').eq(1).should.be.visible;\n    });\n  });\n\n  describe('geoSync()', function () {\n    it('changes slides automatically based on timerDelay option', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, { timerDelay: 200 });\n\n      setTimeout(function () {\n        $html.find('.orbit-slide').eq(0).should.be.hidden;\n        $html.find('.orbit-slide').eq(1).should.be.visible;\n        done();\n      }, 201);\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('moves switches to next slide using ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      var spy = sinon.spy(plugin, 'changeSlide');\n\n      plugin.$wrapper.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n      sinon.assert.calledWith(spy, true);\n    });\n    it('moves switches to previous slide using ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Orbit($html, {});\n      var spy = sinon.spy(plugin, 'changeSlide');\n\n      plugin.$wrapper.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n      sinon.assert.calledWith(spy, false);\n    });\n  });\n});\ndescribe('Responsive Menu', function () {\n\tvar plugin;\n\tvar $html;\n\n\t// afterEach(function() {\n\t// \tplugin.destroy();\n\t// \t$html.remove();\n\t// });\n\n\tdescribe('constructor()', function () {\n\t\t// it('', function() {\n\t\t// \t$html = $('').appendTo('body');\n\t\t// \tplugin = new Foundation.ResponsiveMenu($html, {});\n\n\t\t// \tplugin.$element.should.be.an('object');\n\t\t// \tplugin.options.should.be.an('object');\n\t\t// });\n\t});\n});\ndescribe('Responsive Toggle', function () {\n\tvar plugin;\n\tvar $html;\n\n\t// afterEach(function() {\n\t// \tplugin.destroy();\n\t// \t$html.remove();\n\t// });\n\n\tdescribe('constructor()', function () {\n\t\t// it('', function() {\n\t\t// \t$html = $('').appendTo('body');\n\t\t// \tplugin = new Foundation.ResponsiveToggle($html, {});\n\n\t\t// \tplugin.$element.should.be.an('object');\n\t\t// \tplugin.options.should.be.an('object');\n\t\t// });\n\t});\n});\ndescribe('Reveal', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"reveal\" id=\"exampleModal1\" data-reveal>\\n\\t  Modal content\\n\\t  <button class=\"close-button\" data-close aria-label=\"Close modal\" type=\"button\">\\n\\t    <span aria-hidden=\"true\">&times;</span>\\n\\t  </button>\\n\\t</div>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('sets ARIA attributes for modal', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.should.have.attr('aria-hidden', 'true');\n      $html.should.have.attr('role', 'dialog');\n    });\n\n    it('detects anchor if one exists', function () {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      plugin.$anchor[0].should.be.equal($anchor[0]);\n\n      $anchor.remove();\n    });\n\n    it('sets ARIA attributes for anchor if one exists', function () {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $anchor.should.have.attr('aria-haspopup', 'true');\n      $anchor.should.have.attr('aria-controls', $html.attr('id'));\n\n      $anchor.remove();\n    });\n  });\n\n  describe('makeOverlay()', function () {\n    it('creates an overlay if overlay option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true });\n\n      plugin.$overlay.should.be.an('object');\n      plugin.$overlay.should.have.class('reveal-overlay');\n      $.contains(document.body, plugin.$overlay[0]).should.be.true;\n    });\n  });\n\n  describe('open()', function () {\n    it('opens the modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.on('open.zf.reveal', function () {\n        $html.should.be.visible;\n        done();\n      });\n\n      plugin.open();\n    });\n    it('opens the overlay', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true });\n\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        done();\n      });\n\n      plugin.open();\n    });\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.on('open.zf.reveal', function () {\n        $html.should.have.attr('aria-hidden', 'false');\n        $html.should.have.attr('tabindex', '-1');\n        done();\n      });\n\n      plugin.open();\n    });\n    it('adds class to body', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.on('open.zf.reveal', function () {\n        $('body').should.have.class('is-reveal-open');\n        done();\n      });\n\n      plugin.open();\n    });\n    it('adds optional overlay classes overlay element', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { additionalOverlayClasses: 'default' });\n\n      $html.on('open.zf.reveal', function () {\n        $('.reveal-overlay').should.have.class('default');\n        done();\n      });\n\n      plugin.open();\n    });\n    // TODO: Check if  this.$element.trigger('closeme.zf.reveal', this.id) is correctly used.\n\n    // it('closes previously opened modal if multipleOpened option is false', function(done) {\n    //   $html = $(template).appendTo('body');\n    //   $html2 = $(template).attr('id', 'exampleModal2').appendTo('body');\n\n    //   plugin = new Foundation.Reveal($html, {multipleOpened: false});\n    //   plugin2 = new Foundation.Reveal($html2, {multipleOpened: false});\n\n    //   plugin.open();\n\n    //   plugin2.open();\n\n    //   $html.should.be.hidden;\n\n    //   plugin2.destroy();\n    //   $html2.remove();\n    // });\n    it('fires open.zf.reveal event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.on('open.zf.reveal', function () {\n        $html.should.be.visible;\n        done();\n      });\n\n      plugin.open();\n    });\n\n    it('traps focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { trapFocus: true });\n\n      var spy = sinon.spy(Foundation.Keyboard, 'trapFocus');\n\n      $html.on('open.zf.reveal', function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.trapFocus.restore();\n        done();\n      });\n\n      plugin.open();\n    });\n  });\n\n  describe('close()', function () {\n    it('closes the modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n\n      plugin.close();\n    });\n    it('closes the overlay', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true });\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        plugin.$overlay.should.be.hidden;\n        done();\n      });\n\n      plugin.close();\n    });\n    it('toggles ARIA attributes', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.have.attr('aria-hidden', 'true');\n        done();\n      });\n\n      plugin.close();\n    });\n    it('removes class from body', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $('body').should.not.have.class('is-reveal-open');\n        done();\n      });\n\n      plugin.close();\n    });\n    it('does not remove class from body if another reveal is open', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { multipleOpened: true });\n\n      var $html2 = $(template).attr('id', 'exampleModal2').appendTo('body');\n      var plugin2 = new Foundation.Reveal($html2, { multipleOpened: true, vOffset: 10 });\n\n      // Open both first\n      plugin.open();\n      plugin2.open();\n\n      $html.on('closed.zf.reveal', function () {\n\n        $('body').should.have.class('is-reveal-open');\n        plugin2.destroy();\n        $html2.remove();\n        done();\n      });\n\n      plugin.close();\n    });\n    it('fires closed.zf.reveal event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n\n      plugin.close();\n    });\n\n    it('releases focus if trapFocus option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { trapFocus: true });\n\n      // Open it first\n      plugin.open();\n\n      var spy = sinon.spy(Foundation.Keyboard, 'releaseFocus');\n\n      $html.on('closed.zf.reveal', function () {\n        sinon.assert.called(spy);\n        Foundation.Keyboard.releaseFocus.restore();\n        done();\n      });\n\n      plugin.close();\n    });\n    it('sets focus to anchor', function (done) {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        setTimeout(function () {\n          $anchor[0].should.be.equal(document.activeElement);\n          $anchor.remove();\n          done();\n        }, 0);\n      });\n\n      plugin.close();\n    });\n  });\n\n  describe('toggle()', function () {\n    it('opens a closed modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true });\n\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        done();\n      });\n\n      plugin.open();\n    });\n    it('closes an open modal', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n\n      plugin.close();\n    });\n  });\n\n  describe('events()', function () {\n    it('opens the modal on anchor click', function (done) {\n      $html = $(template).appendTo('body');\n      var $anchor = $('<button data-open=\"exampleModal1\">Open</button>').appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      $html.on('open.zf.reveal', function () {\n        plugin.$overlay.should.be.visible;\n        $anchor.remove();\n        done();\n      });\n\n      $anchor.trigger('click');\n    });\n    it('closes a modal on overlay click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true, closeOnClick: true });\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n\n      plugin.$overlay.trigger('click');\n    });\n    it('not closes a modal on overlay click if closeOnClick option is true', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, { overlay: true, closeOnClick: false });\n\n      // Open it first\n      plugin.open();\n\n      plugin.$overlay.trigger('click');\n\n      // Add timeout to make sure it does not close\n      // Timeout is required because closed event will not be fired\n      setTimeout(function () {\n        $html.should.be.visible;\n        done();\n      }, 10);\n    });\n    it('closes Reveal with click on close button', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Reveal($html, {});\n\n      // Open it first\n      plugin.open();\n\n      $html.on('closed.zf.reveal', function () {\n        $html.should.be.hidden;\n        done();\n      });\n\n      $html.find('[data-close]').focus().trigger('click');\n    });\n  });\n});\ndescribe('Slider', function () {\n  var plugin;\n  var $html;\n  var template = '<div class=\"slider\" data-slider>\\n      <span class=\"slider-handle\" data-slider-handle role=\"slider\" tabindex=\"1\"></span>\\n      <span class=\"slider-fill\" data-slider-fill></span>\\n      <input type=\"hidden\">\\n    </div>';\n\n  Foundation.Slider.defaults.moveTime = 0;\n  Foundation.Slider.defaults.changedDelay = 0;\n\n  afterEach(function (done) {\n    // Timeout needed because even with changeDelay = 0 the changed.zf.slider event may be fired after this hook\n    plugin.destroy();\n    $html.remove();\n    done();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('stores handle, inout and fill elements', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin.$handle.should.be.an('object');\n      plugin.$input.should.be.an('object');\n      plugin.$fill.should.be.an('object');\n    });\n    it('stores two handle and input elements for two sided slider', function () {\n      $html = $(template).append('<span class=\"slider-handle\" data-slider-handle role=\"slider\" tabindex=\"1\"></span><input type=\"hidden\">').appendTo('body');\n      plugin = new Foundation.Slider($html, { doubleSided: true });\n\n      plugin.$handle2.should.be.an('object');\n      plugin.$input2.should.be.an('object');\n    });\n    it('is disabled when disable option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, { disabled: true });\n\n      $html.should.have.class('disabled');\n    });\n  });\n\n  describe('setHandlePos()', function () {\n    it('positions the handle', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setHandlePos(plugin.$handle, 10, true);\n\n      plugin.$handle[0].style.left.should.not.be.equal('');\n    });\n    it('does nothing if disabled option is true', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, { disabled: true });\n\n      plugin._setHandlePos(plugin.$handle, 10, true);\n\n      plugin.$handle[0].style.left.should.be.equal('');\n    });\n    it('fires changed.zf.slider event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, { changedDelay: 50 });\n\n      $html.on('changed.zf.slider', function (e, $handle) {\n        $handle[0].should.be.equal(plugin.$handle[0]);\n        done();\n      });\n\n      // Rapidly change to see if event fires only once\n\n      var _loop = function (i) {\n        setTimeout(function () {\n          plugin._setHandlePos(plugin.$handle, i * 10, true);\n        }, i * 20);\n      };\n\n      for (var i = 0; i < 5; i++) {\n        _loop(i);\n      }\n    });\n    it('fires moved.zf.slider event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      var timesCallbackCalled = 0;\n      $html.on('moved.zf.slider', function (e, $handle) {\n        if (++timesCallbackCalled === 5) {\n          $handle[0].should.be.equal(plugin.$handle[0]);\n          done();\n        }\n      });\n\n      // Rapidly change to see if event fires multiple times\n\n      var _loop2 = function (i) {\n        setTimeout(function () {\n          plugin._setHandlePos(plugin.$handle, i * 10, true);\n        }, i * 20);\n      };\n\n      for (var i = 0; i < 5; i++) {\n        _loop2(i);\n      }\n    });\n  });\n\n  describe('setValues()', function () {\n    it('updates ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setValues(plugin.$handle, 10);\n\n      plugin.$handle.should.have.attr('aria-valuenow', '10');\n    });\n    it('updates input value', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin._setValues(plugin.$handle, 10);\n\n      plugin.$input.val().should.have.be.equal('10');\n    });\n  });\n\n  describe('setInitAttr()', function () {\n    it('adds ARIA attributes to handle', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 50,\n        end: 70,\n        start: 20,\n        vertical: true\n      });\n\n      plugin.$handle.should.have.attr('role', 'slider');\n      plugin.$handle.should.have.attr('aria-controls', plugin.$handle.attr('id'));\n      plugin.$handle.should.have.attr('aria-valuemax', '70');\n      plugin.$handle.should.have.attr('aria-valuemin', '20');\n      plugin.$handle.should.have.attr('aria-valuenow', '50');\n      plugin.$handle.should.have.attr('aria-orientation', 'vertical');\n      plugin.$handle.should.have.attr('tabindex', '0');\n    });\n    it('adds attributes to input', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin.$input.should.have.attr('max', '100');\n      plugin.$input.should.have.attr('min', '0');\n      plugin.$input.should.have.attr('step', '1');\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('sets value to minimum using HOME', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {});\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('HOME'));\n\n      plugin.$handle.should.have.attr('aria-valuenow', plugin.$handle.attr('aria-valuemin'));\n    });\n    it('increases value by step size on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1).toString());\n    });\n    it('increases value by step size on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1).toString());\n    });\n    it('decreases value by step size on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1).toString());\n    });\n    it('decreases value by step size on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1).toString());\n    });\n    it('decreases value by step size times 10 on SHIFT_ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT', { shift: true }));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 + 1 * 10).toString());\n    });\n    it('decreases value by step size times 10 on SHIFT_ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Slider($html, {\n        initialStart: 10,\n        step: 1\n      });\n\n      plugin.$handle.focus().trigger(window.mockKeyboardEvent('ARROW_LEFT', { shift: true }));\n\n      plugin.$handle.should.have.attr('aria-valuenow', (10 - 1 * 10).toString());\n    });\n  });\n});\ndescribe('Sticky', function () {\n\tvar plugin;\n\tvar $html;\n\n\t// afterEach(function() {\n\t// \tplugin.destroy();\n\t// \t$html.remove();\n\t// });\n\n\tdescribe('constructor()', function () {\n\t\t// it('', function() {\n\t\t// \t$html = $('').appendTo('body');\n\t\t// \tplugin = new Foundation.Sticky($html, {});\n\n\t\t// \tplugin.$element.should.be.an('object');\n\t\t// \tplugin.options.should.be.an('object');\n\t\t// });\n\t});\n});\ndescribe('Tabs', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <div>\\n      <ul class=\"tabs\" data-tabs id=\"example-tabs\">\\n        <li class=\"tabs-title is-active\"><a href=\"#panel1\" aria-selected=\"true\">Tab 1</a></li>\\n        <li class=\"tabs-title\"><a href=\"#panel2\">Tab 2</a></li>\\n        <li class=\"tabs-title\"><a data-tabs-target=\"panel3\" href=\"#/panel3\">Tab 3</a></li>\\n      </ul>\\n\\n      <div class=\"tabs-content\" data-tabs-content=\"example-tabs\">\\n        <div class=\"tabs-panel is-active\" id=\"panel1\">\\n          <p>one</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n        <div class=\"tabs-panel\" id=\"panel2\">\\n          <p>two</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n        <div class=\"tabs-panel\" id=\"panel3\">\\n          <p>three</p>\\n          <p>Check me out! I\\'m a super cool Tab panel with text content!</p>\\n        </div>\\n      </div>\\n    </div>';\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      // Panels\n      $html.find('#panel1').should.have.attr('role', 'tabpanel');\n      $html.find('#panel1').should.have.attr('aria-labelledby', $html.find('[href=\"#panel1\"]').attr('id'));\n      $html.find('#panel1').should.not.have.attr('aria-hidden');\n      $html.find('#panel2').should.have.attr('aria-hidden', 'true');\n\n      // Links\n      $html.find('[href=\"#panel1\"]').should.have.attr('role', 'tab');\n      $html.find('[href=\"#panel1\"]').should.have.attr('aria-controls', $html.find('panel1').attr('id'));\n      $html.find('[href=\"#panel1\"]').should.have.attr('aria-selected', 'true');\n      $html.find('[href=\"#panel2\"]').should.have.attr('aria-selected', 'false');\n\n      // Tab list items\n      $html.find('[href=\"#panel1\"]').parent().should.have.attr('role', 'presentation');\n    });\n  });\n\n  describe('selectTab()', function () {\n    it('opens the selected tab via jQuery element', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab($html.find('#panel2'));\n      $html.find('#panel2').should.be.visible;\n    });\n\n    it('opens the selected tab via id string', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.be.visible;\n    });\n    it('opens the selected tab with data-tabs-target attribute', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#/panel3');\n      $html.find('#panel3').should.be.visible;\n    });\n  });\n\n  describe('_handleTabChange()', function () {\n    it('opens the selected tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n\n    it('sets ARIA attributes for open tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#panel2');\n      $html.find('#panel2').should.have.not.attr('aria-hidden');\n      $html.find('[href=\"#panel2\"]').should.have.attr('aria-selected', 'true');\n    });\n\n    it('hides the open tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#panel2');\n      $html.find('#panel1').should.be.hidden;\n      $html.find('#panel1').should.not.have.class('is-active');\n    });\n\n    it('sets ARIA attributes for closed tab', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      plugin.selectTab('#panel2');\n      $html.find('#panel1').should.be.have.attr('aria-hidden', 'true');\n      $html.find('[href=\"#panel1\"]').should.be.have.attr('aria-selected', 'false');\n    });\n\n    it('fires change.zf.tabs event with target as data', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      $html.one('change.zf.tabs', function (e, $target) {\n        e.stopPropagation();\n        $html.find('[href=\"#panel2\"]').parent()[0].should.be.equal($target[0]);\n        done();\n      });\n\n      plugin.selectTab('#panel2');\n    });\n  });\n\n  describe('keyboard events', function () {\n    it('switches to next tab on ARROW_RIGHT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      $html.find('[href=\"#panel1\"]').focus().trigger(window.mockKeyboardEvent('ARROW_RIGHT'));\n\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n    it('switches to next tab on ARROW_DOWN', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      $html.find('[href=\"#panel1\"]').focus().trigger(window.mockKeyboardEvent('ARROW_DOWN'));\n\n      $html.find('#panel2').should.be.visible;\n      $html.find('#panel2').should.have.class('is-active');\n    });\n    it('switches to previous tab on ARROW_LEFT', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      $html.find('[href=\"#panel2\"]').focus().trigger(window.mockKeyboardEvent('ARROW_LEFT'));\n\n      $html.find('#panel1').should.be.visible;\n      $html.find('#panel1').should.have.class('is-active');\n    });\n    it('switches to previous tab on ARROW_UP', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tabs($html.find('[data-tabs]'), {});\n\n      $html.find('[href=\"#panel2\"]').focus().trigger(window.mockKeyboardEvent('ARROW_UP'));\n\n      $html.find('#panel1').should.be.visible;\n      $html.find('#panel1').should.have.class('is-active');\n    });\n  });\n});\ndescribe('Toggler', function () {\n  var plugin;\n  var $html;\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n    it('stores the class defined on the data-toggler attribute', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin.className.should.equal('class');\n    });\n\n    it('stores the class defined on the data-toggler attribute (with leading dot)', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\".class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin.className.should.equal('class');\n    });\n\n    it('stores defined animation classes', function () {\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin.animationIn.should.equal('fade-in');\n      plugin.animationOut.should.equal('fade-out');\n    });\n\n    it('adds Aria attributes to click triggers', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      var $triggers = $('<div>\\n          <a data-open=\"toggler\">Open</a>\\n          <a data-close=\"toggler\">Close</a>\\n          <a data-toggle=\"toggler\">Toggle</a>\\n        </div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      $triggers.find('[data-open]').should.have.attr('aria-controls', 'toggler');\n      $triggers.find('[data-close]').should.have.attr('aria-controls', 'toggler');\n      $triggers.find('[data-toggle]').should.have.attr('aria-controls', 'toggler');\n\n      $triggers.remove();\n    });\n\n    it('sets aria-expanded to true if the element is visible', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      $('#toggler').should.have.attr('aria-expanded', 'true');\n    });\n\n    it('sets aria-expanded to false if the element is invisible', function () {\n      var $css = $('<style>#toggler { display: none }</style>').appendTo('body');\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      $('#toggler').should.have.attr('aria-expanded', 'false');\n      $css.remove();\n    });\n  });\n\n  describe('toggle()', function () {\n    it('calls Toggler._toggleClass() if the element toggles with a class');\n    it('calls Toggler._toggleAnimate() if the element toggles with animation');\n  });\n\n  describe('toggleClass()', function () {\n    it('toggles a class on the element', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin._toggleClass();\n      $('#toggler').should.have.class('class');\n\n      plugin._toggleClass();\n      $('#toggler').should.not.have.class('class');\n    });\n\n    it('updates aria-expanded after the class is toggled', function () {\n      $html = $('<div id=\"toggler\" data-toggler=\"class\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      plugin._toggleClass();\n      $('#toggler').should.have.attr('aria-expanded', 'true');\n\n      plugin._toggleClass();\n      $('#toggler').should.have.attr('aria-expanded', 'false');\n    });\n  });\n\n  // [TODO] Re-enable this if you can get it working in PhantomJS\n  xdescribe('toggleAnimate()', function () {\n    it('animates an invisible element in', function (done) {\n      var $css = $('<style>#toggler { display: none; }</style>').appendTo('body');\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      $html.on('on.zf.toggler', function () {\n        $('#toggler').should.be.visible;\n        $('#toggler').should.have.attr('aria-expanded', 'true');\n        $css.remove();\n        done();\n      });\n\n      plugin._toggleAnimate();\n    });\n\n    it('animates an visible element out', function (done) {\n      $html = $('<div id=\"toggler\" data-toggler data-animate=\"fade-in fade-out\"></div>').appendTo('body');\n      plugin = new Foundation.Toggler($html, {});\n\n      $html.on('off.zf.toggler', function () {\n        $('#toggler').should.be.hidden;\n        $('#toggler').should.have.attr('aria-expanded', 'false');\n        done();\n      });\n\n      plugin._toggleAnimate();\n    });\n  });\n});\ndescribe('Tooltip', function () {\n  var plugin;\n  var $html;\n  var template = '\\n    <span data-tooltip aria-haspopup=\"true\" class=\"has-tip\" tabindex=\"1\" title=\"TOOLTIP_CONTENT\">\\n      TEXT\\n    </span>';\n  Foundation.Tooltip.defaults.showOn = 'all';\n  Foundation.Tooltip.defaults.fadeOutDuration = 0;\n  Foundation.Tooltip.defaults.fadeInDuration = 0;\n\n  afterEach(function () {\n    plugin.destroy();\n    $html.remove();\n  });\n\n  describe('constructor()', function () {\n    it('stores the element and plugin options', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      plugin.$element.should.be.an('object');\n      plugin.options.should.be.an('object');\n    });\n  });\n\n  describe('init()', function () {\n\n    it('has value of title attribute as content', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      plugin.template.text().should.equal('TOOLTIP_CONTENT');\n    });\n\n    it('has value of tipText option as content', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, { tipText: 'TOOLTIP_CONTENT_OPTION' });\n\n      plugin.template.text().should.equal('TOOLTIP_CONTENT_OPTION');\n    });\n\n    it('uses value of template option as template', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, { template: '<div class=\"TEMPLATE_OPTION\"></div>' });\n\n      plugin.template.should.have.class('TEMPLATE_OPTION');\n    });\n\n    it('uses value of triggerClass option as trigger class', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, { triggerClass: 'TRIGGER_CLASS_OPTION' });\n\n      plugin.$element.should.have.class('TRIGGER_CLASS_OPTION');\n    });\n\n    it('sets ARIA attributes', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      plugin.$element.should.have.attr('aria-describedby', plugin.template.attr('id'));\n      plugin.template.should.have.attr('aria-hidden', 'true');\n      plugin.template.should.have.attr('role', 'tooltip');\n    });\n  });\n\n  describe('buildTemplate()', function () {\n    it('uses value of templateClasses option as template class', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, { templateClasses: 'TOOLTIP_CLASS_OPTION' });\n\n      plugin.template.should.have.class('TOOLTIP_CLASS_OPTION');\n    });\n  });\n\n  describe('show()', function () {\n    it('shows the tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      plugin.show();\n\n      plugin.template.should.be.visible;\n      plugin.template.should.have.attr('aria-hidden', 'false');\n    });\n\n    it('fires show.zf.tooltip event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      $html.on('show.zf.tooltip', function () {\n        plugin.template.should.be.visible;\n        done();\n      });\n\n      plugin.show();\n    });\n  });\n\n  describe('hide()', function () {\n    it('hides the tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      // Show first\n      plugin.show();\n\n      plugin.hide();\n\n      plugin.template.should.be.hidden;\n      plugin.template.should.have.attr('aria-hidden', 'true');\n    });\n\n    it('fires hide.zf.tooltip event', function (done) {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      // Open it first\n      plugin.show();\n\n      $html.on('hide.zf.tooltip', function () {\n        plugin.template.should.be.hidden;\n        done();\n      });\n\n      plugin.hide();\n    });\n  });\n\n  describe('toggle()', function () {\n    it('shows a hidden tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      plugin.toggle();\n      plugin.template.should.be.visible;\n      plugin.template.should.have.attr('aria-hidden', 'false');\n    });\n    it('hides a visible tooltip', function () {\n      $html = $(template).appendTo('body');\n      plugin = new Foundation.Tooltip($html, {});\n\n      // Show first\n      plugin.show();\n\n      plugin.toggle();\n      plugin.template.should.be.hidden;\n      plugin.template.should.have.attr('aria-hidden', 'true');\n    });\n  });\n});\ndescribe('Foundation box', function () {\n  var $html;\n\n  afterEach(function () {\n    if ($html) {\n      $html.remove();\n    }\n  });\n\n  describe('GetDimensions()', function () {\n    it('should be unable to get dimensions for window', function (done) {\n      try {\n        Foundation.Box.GetDimensions($(\"window\"));\n\n        should.fail();\n      } catch (err) {\n        done();\n      }\n    });\n\n    it('should be unable to get dimensions for document', function (done) {\n      try {\n        Foundation.Box.GetDimensions($(\"document\"));\n\n        should.fail();\n      } catch (err) {\n        done();\n      }\n    });\n\n    it('height and width of element', function () {\n      $html = $('<div id=\"rect-test\" style=\"height: 100px;width:200px;\"></div>').appendTo('body');\n\n      var dims = Foundation.Box.GetDimensions($(\"#rect-test\"));\n\n      dims.width.should.equal(200);\n      dims.height.should.equal(100);\n    });\n\n    it('parent height of element', function () {\n      $html = $('<div style=\"height: 200px;\"><div id=\"rect-test-parent\" style=\"height: 100px;width:200px;\"></div></div>').appendTo('body');\n\n      var dims = Foundation.Box.GetDimensions($(\"#rect-test-parent\"));\n\n      dims.width.should.equal(200);\n      dims.height.should.equal(100);\n\n      dims.parentDims.height.should.equal(200);\n    });\n  });\n});\ndescribe('Foundation core', function () {\n  it('exists on the window', function () {\n    window.Foundation.should.be.an('object');\n  });\n\n  it('is a jQuery prototype function', function () {\n    $.fn.foundation.should.to.be.a('function');\n  });\n\n  describe('rtl()', function () {\n    it('detects the text direction on the document', function () {\n      Foundation.rtl().should.be.false;\n      $('html').attr('dir', 'rtl');\n\n      Foundation.rtl().should.be.true;\n      $('html').attr('dir', 'ltr');\n    });\n  });\n\n  describe('plugin()', function () {\n    afterEach(function () {\n      delete Foundation._plugins['plugin'];\n      delete Foundation.Plugin;\n    });\n\n    it('adds Foundation plugins', function () {\n      function Plugin() {}\n      Foundation.plugin(Plugin, 'Plugin');\n\n      Foundation._plugins['plugin'].should.be.a('function');\n      Foundation.Plugin.should.be.a('function');\n    });\n\n    it('uses the name of the Plugin class/function if one is not provided', function () {\n      function Plugin() {}\n      Foundation.plugin(Plugin);\n\n      Foundation._plugins['plugin'].should.be.a('function');\n      Foundation.Plugin.should.be.a('function');\n    });\n  });\n\n  describe('registerPlugin()', function () {\n    it('registers a new instance of a plugin');\n  });\n\n  describe('unregisterPlugin()', function () {\n    it('un-registers a plugin being destroyed');\n  });\n\n  xdescribe('reInit()', function () {});\n\n  describe('GetYoDigits()', function () {\n    it('generates a random ID matching a given length', function () {\n      var id = Foundation.GetYoDigits(6);\n\n      id.should.be.a('string');\n      id.should.have.lengthOf(6);\n    });\n\n    it('can append a namespace to the number', function () {\n      var id = Foundation.GetYoDigits(6, 'plugin');\n\n      id.should.be.a('string');\n      id.should.have.lengthOf(6 + '-plugin'.length);\n      id.should.contain('-plugin');\n    });\n  });\n\n  describe('reflow()', function () {});\n\n  describe('getFnName()', function () {});\n\n  describe('transitionEnd()', function () {});\n\n  describe('throttle()', function () {});\n});\ndescribe('Keyboard util', function () {\n  /**\n   * Creates a dummy event to parse.\n   * Uses jQuery Event class constructor.\n   * @param  {number} keyCode Key code of the key that is simulated.\n   * @param  {object} opts    Options that say if modifiers are pressed.\n   * @return {Event}          Event to use.\n   */\n  var createEvent = window.mockKeyboardEvent;\n  var keyCodes = {\n    'A': 65,\n    'TAB': 9,\n    'ENTER': 13,\n    'ESCAPE': 27,\n    'SPACE': 32,\n    'ARROW_LEFT': 37,\n    'ARROW_UP': 38,\n    'ARROW_RIGHT': 39,\n    'ARROW_DOWN': 40\n  };\n\n  it('exists on the Foundation API', function () {\n    window.Foundation.Keyboard.should.be.an('object');\n  });\n\n  describe('parseKey()', function () {\n    it('returns the character pressed for a normal key', function () {\n      var event = createEvent(keyCodes['A']),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n\n      parsedKey.should.be.equal('A');\n    });\n    it('returns the character pressed for special keys', function () {\n      for (var key in keyCodes) {\n        var keyCode = keyCodes[key];\n        var event = createEvent(keyCode),\n            parsedKey = Foundation.Keyboard.parseKey(event);\n\n        parsedKey.should.be.equal(key);\n      }\n    });\n    it('recognizes if CTRL was pressed', function () {\n      var event = createEvent(keyCodes['A'], { ctrl: true }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n\n      parsedKey.should.be.equal('CTRL_A');\n    });\n    it('recognizes if ALT was pressed', function () {\n      var event = createEvent(keyCodes['A'], { alt: true }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n\n      parsedKey.should.be.equal('ALT_A');\n    });\n    it('recognizes if SHIFT was pressed', function () {\n      var event = createEvent(keyCodes['A'], { shift: true }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n\n      parsedKey.should.be.equal('SHIFT_A');\n    });\n    it('recognizes if multiple modifiers were pressed', function () {\n      var event = createEvent(keyCodes['A'], { shift: true, alt: true, ctrl: true }),\n          parsedKey = Foundation.Keyboard.parseKey(event);\n\n      parsedKey.should.be.equal('ALT_CTRL_SHIFT_A');\n    });\n  });\n  describe('handleKey()', function () {\n    it('executes callback for given key event', function () {\n      var spy = sinon.spy();\n\n      // Register component\n      Foundation.Keyboard.register('MyComponent', {\n        'ESCAPE': 'close'\n      });\n\n      var event = createEvent(keyCodes['ESCAPE']);\n\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        close: function () {\n          spy();\n        }\n      });\n\n      spy.called.should.be.true;\n    });\n    it('executes handled callback for given key event', function () {\n      var spy = sinon.spy();\n\n      // Register component\n      Foundation.Keyboard.register('MyComponent', {\n        'ESCAPE': 'close'\n      });\n\n      var event = createEvent(keyCodes['ESCAPE']);\n\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        close: function () {\n          // stuff\n        },\n        handled: function () {\n          spy();\n        }\n      });\n\n      spy.called.should.be.true;\n    });\n    it('executes unhandled callback for given key event', function () {\n      var spy = sinon.spy();\n\n      // Register component\n      Foundation.Keyboard.register('MyComponent', {});\n\n      var event = createEvent(keyCodes['ESCAPE']);\n\n      Foundation.Keyboard.handleKey(event, 'MyComponent', {\n        unhandled: function () {\n          spy();\n        }\n      });\n\n      spy.called.should.be.true;\n    });\n  });\n\n  describe('findFocusable()', function () {\n    it('finds focusable elements inside a container', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link</a>\\n            <button>Button</button>\\n          </div>').appendTo('body');\n\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n\n      $focusable.length.should.be.equal(2);\n\n      $html.remove();\n    });\n\n    it('does not find hidden focusable elements', function () {\n      var $html = $('<div>\\n            <a style=\"display: none;\" href=\"#\">Link</a>\\n            <button style=\"display: none;\">Button</button>\\n          </div>').appendTo('body');\n\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n\n      $focusable.length.should.be.equal(0);\n\n      $html.remove();\n    });\n\n    it('does not find disabled focusable elements', function () {\n      var $html = $('<div>\\n            <button disabled>Button</button>\\n          </div>').appendTo('body');\n\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n\n      $focusable.length.should.be.equal(0);\n\n      $html.remove();\n    });\n\n    it('does not find focusable elements with negative tabindex', function () {\n      var $html = $('<div>\\n            <button tabindex=\"-1\">Button</button>\\n          </div>').appendTo('body');\n\n      var $focusable = Foundation.Keyboard.findFocusable($html);\n\n      $focusable.length.should.be.equal(0);\n\n      $html.remove();\n    });\n  });\n\n  describe('trapFocus()', function () {\n    it('moves the focus to the first focusable element', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').last().focus();\n\n      var event = createEvent(keyCodes['TAB']);\n      $(document.activeElement).trigger(event);\n\n      document.activeElement.should.be.equal($html.find('a').eq(0)[0]);\n\n      $html.remove();\n    });\n\n    it('moves the focus to the last focusable element', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').first().focus();\n\n      var event = createEvent(keyCodes['TAB'], { shift: true });\n      $(document.activeElement).trigger(event);\n\n      document.activeElement.should.be.equal($html.find('a').eq(2)[0]);\n\n      $html.remove();\n    });\n  });\n\n  describe('releaseFocus()', function () {\n    it('stops trapping the focus at the end', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').last().focus();\n\n      Foundation.Keyboard.releaseFocus($html);\n\n      var event = createEvent(keyCodes['TAB']);\n      $(document.activeElement).trigger(event);\n\n      document.activeElement.should.not.be.equal($html.find('a').eq(0)[0]);\n\n      $html.remove();\n    });\n\n    it('stops trapping the focus at the top', function () {\n      var $html = $('<div>\\n            <a href=\"#\">Link1</a>\\n            <a href=\"#\">Link2</a>\\n            <a href=\"#\">Link3</a>\\n          </div>').appendTo('body');\n\n      Foundation.Keyboard.trapFocus($html);\n      $html.find('a').first().focus();\n\n      Foundation.Keyboard.releaseFocus($html);\n\n      var event = createEvent(createEvent(keyCodes['TAB'], { shift: true }));\n      $(document.activeElement).trigger(event);\n\n      document.activeElement.should.not.be.equal($html.find('a').eq(2)[0]);\n\n      $html.remove();\n    });\n  });\n});"]},"hash":"af53e22eceda49e1dbe47e957890f5931c8f402e"}
