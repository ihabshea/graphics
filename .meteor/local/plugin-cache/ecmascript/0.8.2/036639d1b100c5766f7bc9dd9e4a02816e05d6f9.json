{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"jquery","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"$"}]},{"source":"./foundation.util.keyboard","imported":["Keyboard"],"specifiers":[{"kind":"named","imported":"Keyboard","local":"Keyboard"}]},{"source":"./foundation.util.nest","imported":["Nest"],"specifiers":[{"kind":"named","imported":"Nest","local":"Nest"}]},{"source":"./foundation.util.core","imported":["GetYoDigits"],"specifiers":[{"kind":"named","imported":"GetYoDigits","local":"GetYoDigits"}]},{"source":"./foundation.plugin","imported":["Plugin"],"specifiers":[{"kind":"named","imported":"Plugin","local":"Plugin"}]}],"exports":{"exported":["AccordionMenu"],"specifiers":[{"kind":"local","local":"AccordionMenu","exported":"AccordionMenu"}]}}},"options":{"filename":"packages/zurb:foundation-sites/js/foundation.accordionMenu.js","filenameRelative":"packages/zurb:foundation-sites/js/foundation.accordionMenu.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/js/foundation.accordionMenu.js.map","sourceFileName":"packages/zurb:foundation-sites/js/foundation.accordionMenu.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"foundation.accordionMenu"},"ignored":false,"code":"'use strict';\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar module1 = module;\nmodule1.export({\n  AccordionMenu: function () {\n    return AccordionMenu;\n  }\n});\nvar $ = void 0;\nmodule1.watch(require(\"jquery\"), {\n  \"default\": function (v) {\n    $ = v;\n  }\n}, 0);\nvar Keyboard = void 0;\nmodule1.watch(require(\"./foundation.util.keyboard\"), {\n  Keyboard: function (v) {\n    Keyboard = v;\n  }\n}, 1);\nvar Nest = void 0;\nmodule1.watch(require(\"./foundation.util.nest\"), {\n  Nest: function (v) {\n    Nest = v;\n  }\n}, 2);\nvar GetYoDigits = void 0;\nmodule1.watch(require(\"./foundation.util.core\"), {\n  GetYoDigits: function (v) {\n    GetYoDigits = v;\n  }\n}, 3);\nvar Plugin = void 0;\nmodule1.watch(require(\"./foundation.plugin\"), {\n  Plugin: function (v) {\n    Plugin = v;\n  }\n}, 4);\n\n/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.nest\n */var AccordionMenu = function (_Plugin) {\n  (0, _inherits3.default)(AccordionMenu, _Plugin);\n\n  function AccordionMenu() {\n    (0, _classCallCheck3.default)(this, AccordionMenu);\n    return (0, _possibleConstructorReturn3.default)(this, _Plugin.apply(this, arguments));\n  }\n\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @name AccordionMenu\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */AccordionMenu.prototype._setup = function () {\n    function _setup(element, options) {\n      this.$element = element;\n      this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n      this.className = 'AccordionMenu'; // ie9 back compat\n\n      Nest.Feather(this.$element, 'accordion');\n\n      this._init();\n\n      Keyboard.register('AccordionMenu', {\n        'ENTER': 'toggle',\n        'SPACE': 'toggle',\n        'ARROW_RIGHT': 'open',\n        'ARROW_UP': 'up',\n        'ARROW_DOWN': 'down',\n        'ARROW_LEFT': 'close',\n        'ESCAPE': 'closeAll'\n      });\n    }\n\n    return _setup;\n  }(); /**\n        * Initializes the accordion menu by hiding all nested menus.\n        * @private\n        */\n\n  AccordionMenu.prototype._init = function () {\n    function _init() {\n      var _this = this;\n\n      this.$element.find('[data-submenu]').not('.is-active').slideUp(0); //.find('a').css('padding-left', '1rem');\n\n      this.$element.attr({\n        'role': 'tree',\n        'aria-multiselectable': this.options.multiOpen\n      });\n      this.$menuLinks = this.$element.find('.is-accordion-submenu-parent');\n      this.$menuLinks.each(function () {\n        var linkId = this.id || GetYoDigits(6, 'acc-menu-link'),\n            $elem = $(this),\n            $sub = $elem.children('[data-submenu]'),\n            subId = $sub[0].id || GetYoDigits(6, 'acc-menu'),\n            isActive = $sub.hasClass('is-active');\n\n        if (_this.options.submenuToggle) {\n          $elem.addClass('has-submenu-toggle');\n          $elem.children('a').after('<button id=\"' + linkId + '\" class=\"submenu-toggle\" aria-controls=\"' + subId + '\" aria-expanded=\"' + isActive + '\" title=\"' + _this.options.submenuToggleText + '\"><span class=\"submenu-toggle-text\">' + _this.options.submenuToggleText + '</span></button>');\n        } else {\n          $elem.attr({\n            'aria-controls': subId,\n            'aria-expanded': isActive,\n            'id': linkId\n          });\n        }\n\n        $sub.attr({\n          'aria-labelledby': linkId,\n          'aria-hidden': !isActive,\n          'role': 'group',\n          'id': subId\n        });\n      });\n      this.$element.find('li').attr({\n        'role': 'treeitem'\n      });\n      var initPanes = this.$element.find('.is-active');\n\n      if (initPanes.length) {\n        var _this = this;\n\n        initPanes.each(function () {\n          _this.down($(this));\n        });\n      }\n\n      this._events();\n    }\n\n    return _init;\n  }(); /**\n        * Adds event handlers for items within the menu.\n        * @private\n        */\n\n  AccordionMenu.prototype._events = function () {\n    function _events() {\n      var _this = this;\n\n      this.$element.find('li').each(function () {\n        var $submenu = $(this).children('[data-submenu]');\n\n        if ($submenu.length) {\n          if (_this.options.submenuToggle) {\n            $(this).children('.submenu-toggle').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function (e) {\n              _this.toggle($submenu);\n            });\n          } else {\n            $(this).children('a').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function (e) {\n              e.preventDefault();\n\n              _this.toggle($submenu);\n            });\n          }\n        }\n      }).on('keydown.zf.accordionmenu', function (e) {\n        var $element = $(this),\n            $elements = $element.parent('ul').children('li'),\n            $prevElement,\n            $nextElement,\n            $target = $element.children('[data-submenu]');\n        $elements.each(function (i) {\n          if ($(this).is($element)) {\n            $prevElement = $elements.eq(Math.max(0, i - 1)).find('a').first();\n            $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1)).find('a').first();\n\n            if ($(this).children('[data-submenu]:visible').length) {\n              // has open sub menu\n              $nextElement = $element.find('li:first-child').find('a').first();\n            }\n\n            if ($(this).is(':first-child')) {\n              // is first element of sub menu\n              $prevElement = $element.parents('li').first().find('a').first();\n            } else if ($prevElement.parents('li').first().children('[data-submenu]:visible').length) {\n              // if previous element has open sub menu\n              $prevElement = $prevElement.parents('li').find('li:last-child').find('a').first();\n            }\n\n            if ($(this).is(':last-child')) {\n              // is last element of sub menu\n              $nextElement = $element.parents('li').first().next('li').find('a').first();\n            }\n\n            return;\n          }\n        });\n        Keyboard.handleKey(e, 'AccordionMenu', {\n          open: function () {\n            if ($target.is(':hidden')) {\n              _this.down($target);\n\n              $target.find('li').first().find('a').first().focus();\n            }\n          },\n          close: function () {\n            if ($target.length && !$target.is(':hidden')) {\n              // close active sub of this item\n              _this.up($target);\n            } else if ($element.parent('[data-submenu]').length) {\n              // close currently open sub\n              _this.up($element.parent('[data-submenu]'));\n\n              $element.parents('li').first().find('a').first().focus();\n            }\n          },\n          up: function () {\n            $prevElement.focus();\n            return true;\n          },\n          down: function () {\n            $nextElement.focus();\n            return true;\n          },\n          toggle: function () {\n            if (_this.options.submenuToggle) {\n              return false;\n            }\n\n            if ($element.children('[data-submenu]').length) {\n              _this.toggle($element.children('[data-submenu]'));\n\n              return true;\n            }\n          },\n          closeAll: function () {\n            _this.hideAll();\n          },\n          handled: function (preventDefault) {\n            if (preventDefault) {\n              e.preventDefault();\n            }\n\n            e.stopImmediatePropagation();\n          }\n        });\n      }); //.attr('tabindex', 0);\n    }\n\n    return _events;\n  }(); /**\n        * Closes all panes of the menu.\n        * @function\n        */\n\n  AccordionMenu.prototype.hideAll = function () {\n    function hideAll() {\n      this.up(this.$element.find('[data-submenu]'));\n    }\n\n    return hideAll;\n  }(); /**\n        * Opens all panes of the menu.\n        * @function\n        */\n\n  AccordionMenu.prototype.showAll = function () {\n    function showAll() {\n      this.down(this.$element.find('[data-submenu]'));\n    }\n\n    return showAll;\n  }(); /**\n        * Toggles the open/close state of a submenu.\n        * @function\n        * @param {jQuery} $target - the submenu to toggle\n        */\n\n  AccordionMenu.prototype.toggle = function () {\n    function toggle($target) {\n      if (!$target.is(':animated')) {\n        if (!$target.is(':hidden')) {\n          this.up($target);\n        } else {\n          this.down($target);\n        }\n      }\n    }\n\n    return toggle;\n  }(); /**\n        * Opens the sub-menu defined by `$target`.\n        * @param {jQuery} $target - Sub-menu to open.\n        * @fires AccordionMenu#down\n        */\n\n  AccordionMenu.prototype.down = function () {\n    function down($target) {\n      var _this = this;\n\n      if (!this.options.multiOpen) {\n        this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element).add($target)));\n      }\n\n      $target.addClass('is-active').attr({\n        'aria-hidden': false\n      });\n\n      if (this.options.submenuToggle) {\n        $target.prev('.submenu-toggle').attr({\n          'aria-expanded': true\n        });\n      } else {\n        $target.parent('.is-accordion-submenu-parent').attr({\n          'aria-expanded': true\n        });\n      }\n\n      $target.slideDown(_this.options.slideSpeed, function () {\n        /**\n         * Fires when the menu is done opening.\n         * @event AccordionMenu#down\n         */_this.$element.trigger('down.zf.accordionMenu', [$target]);\n      });\n    }\n\n    return down;\n  }(); /**\n        * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n        * @param {jQuery} $target - Sub-menu to close.\n        * @fires AccordionMenu#up\n        */\n\n  AccordionMenu.prototype.up = function () {\n    function up($target) {\n      var _this = this;\n\n      $target.slideUp(_this.options.slideSpeed, function () {\n        /**\n         * Fires when the menu is done collapsing up.\n         * @event AccordionMenu#up\n         */_this.$element.trigger('up.zf.accordionMenu', [$target]);\n      });\n      var $menus = $target.find('[data-submenu]').slideUp(0).addBack().attr('aria-hidden', true);\n\n      if (this.options.submenuToggle) {\n        $menus.prev('.submenu-toggle').attr('aria-expanded', false);\n      } else {\n        $menus.parent('.is-accordion-submenu-parent').attr('aria-expanded', false);\n      }\n    }\n\n    return up;\n  }(); /**\n        * Destroys an instance of accordion menu.\n        * @fires AccordionMenu#destroyed\n        */\n\n  AccordionMenu.prototype._destroy = function () {\n    function _destroy() {\n      this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n      this.$element.find('a').off('click.zf.accordionMenu');\n\n      if (this.options.submenuToggle) {\n        this.$element.find('.has-submenu-toggle').removeClass('has-submenu-toggle');\n        this.$element.find('.submenu-toggle').remove();\n      }\n\n      Nest.Burn(this.$element, 'accordion');\n    }\n\n    return _destroy;\n  }();\n\n  return AccordionMenu;\n}(Plugin);\n\nAccordionMenu.defaults = {\n  /**\n   * Amount of time to animate the opening of a submenu in ms.\n   * @option\n   * @type {number}\n   * @default 250\n   */slideSpeed: 250,\n  /**\n   * Adds a separate submenu toggle button. This allows the parent item to have a link.\n   * @option\n   * @example true\n   */submenuToggle: false,\n  /**\n   * The text used for the submenu toggle if enabled. This is used for screen readers only.\n   * @option\n   * @example true\n   */submenuToggleText: 'Toggle menu',\n  /**\n   * Allow the menu to have multiple open panes.\n   * @option\n   * @type {boolean}\n   * @default true\n   */multiOpen: true\n};","map":{"version":3,"sources":["packages/zurb:foundation-sites/js/foundation.accordionMenu.js"],"names":["module1","module","export","AccordionMenu","$","watch","require","v","Keyboard","Nest","GetYoDigits","Plugin","_setup","element","options","$element","extend","defaults","data","className","Feather","_init","register","_this","find","not","slideUp","attr","multiOpen","$menuLinks","each","linkId","id","$elem","$sub","children","subId","isActive","hasClass","submenuToggle","addClass","after","submenuToggleText","initPanes","length","down","_events","$submenu","off","on","e","toggle","preventDefault","$elements","parent","$prevElement","$nextElement","$target","i","is","eq","Math","max","first","min","parents","next","handleKey","open","focus","close","up","closeAll","hideAll","handled","stopImmediatePropagation","showAll","parentsUntil","add","prev","slideDown","slideSpeed","trigger","$menus","addBack","_destroy","css","removeClass","remove","Burn"],"mappings":"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","file":"packages/zurb:foundation-sites/js/foundation.accordionMenu.js.map","sourcesContent":["'use strict';\n\n\nimport $ from 'jquery';\nimport { Keyboard } from './foundation.util.keyboard';\nimport { Nest } from './foundation.util.nest';\nimport { GetYoDigits } from './foundation.util.core';\nimport { Plugin } from './foundation.plugin';\n\n/**\n * AccordionMenu module.\n * @module foundation.accordionMenu\n * @requires foundation.util.keyboard\n * @requires foundation.util.nest\n */\n\nclass AccordionMenu extends Plugin {\n  /**\n   * Creates a new instance of an accordion menu.\n   * @class\n   * @name AccordionMenu\n   * @fires AccordionMenu#init\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  _setup(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, AccordionMenu.defaults, this.$element.data(), options);\n    this.className = 'AccordionMenu'; // ie9 back compat\n\n    Nest.Feather(this.$element, 'accordion');\n\n    this._init();\n\n    Keyboard.register('AccordionMenu', {\n      'ENTER': 'toggle',\n      'SPACE': 'toggle',\n      'ARROW_RIGHT': 'open',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'close',\n      'ESCAPE': 'closeAll'\n    });\n  }\n\n\n\n  /**\n   * Initializes the accordion menu by hiding all nested menus.\n   * @private\n   */\n  _init() {\n    var _this = this;\n\n    this.$element.find('[data-submenu]').not('.is-active').slideUp(0);//.find('a').css('padding-left', '1rem');\n    this.$element.attr({\n      'role': 'tree',\n      'aria-multiselectable': this.options.multiOpen\n    });\n\n    this.$menuLinks = this.$element.find('.is-accordion-submenu-parent');\n    this.$menuLinks.each(function(){\n      var linkId = this.id || GetYoDigits(6, 'acc-menu-link'),\n          $elem = $(this),\n          $sub = $elem.children('[data-submenu]'),\n          subId = $sub[0].id || GetYoDigits(6, 'acc-menu'),\n          isActive = $sub.hasClass('is-active');\n\n\n      if(_this.options.submenuToggle) {\n        $elem.addClass('has-submenu-toggle');\n        $elem.children('a').after('<button id=\"' + linkId + '\" class=\"submenu-toggle\" aria-controls=\"' + subId + '\" aria-expanded=\"' + isActive + '\" title=\"' + _this.options.submenuToggleText + '\"><span class=\"submenu-toggle-text\">' + _this.options.submenuToggleText + '</span></button>');\n      } else {\n        $elem.attr({\n          'aria-controls': subId,\n          'aria-expanded': isActive,\n          'id': linkId\n        });\n      }\n      $sub.attr({\n        'aria-labelledby': linkId,\n        'aria-hidden': !isActive,\n        'role': 'group',\n        'id': subId\n      });\n    });\n    this.$element.find('li').attr({\n      'role': 'treeitem'\n    });\n    var initPanes = this.$element.find('.is-active');\n    if(initPanes.length){\n      var _this = this;\n      initPanes.each(function(){\n        _this.down($(this));\n      });\n    }\n    this._events();\n  }\n\n  /**\n   * Adds event handlers for items within the menu.\n   * @private\n   */\n  _events() {\n    var _this = this;\n\n    this.$element.find('li').each(function() {\n      var $submenu = $(this).children('[data-submenu]');\n\n      if ($submenu.length) {\n        if(_this.options.submenuToggle) {\n          $(this).children('.submenu-toggle').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function(e) {\n            _this.toggle($submenu);\n          });\n        } else {\n            $(this).children('a').off('click.zf.accordionMenu').on('click.zf.accordionMenu', function(e) {\n              e.preventDefault();\n              _this.toggle($submenu);\n            });\n        }\n      }\n    }).on('keydown.zf.accordionmenu', function(e){\n      var $element = $(this),\n          $elements = $element.parent('ul').children('li'),\n          $prevElement,\n          $nextElement,\n          $target = $element.children('[data-submenu]');\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1)).find('a').first();\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1)).find('a').first();\n\n          if ($(this).children('[data-submenu]:visible').length) { // has open sub menu\n            $nextElement = $element.find('li:first-child').find('a').first();\n          }\n          if ($(this).is(':first-child')) { // is first element of sub menu\n            $prevElement = $element.parents('li').first().find('a').first();\n          } else if ($prevElement.parents('li').first().children('[data-submenu]:visible').length) { // if previous element has open sub menu\n            $prevElement = $prevElement.parents('li').find('li:last-child').find('a').first();\n          }\n          if ($(this).is(':last-child')) { // is last element of sub menu\n            $nextElement = $element.parents('li').first().next('li').find('a').first();\n          }\n\n          return;\n        }\n      });\n\n      Keyboard.handleKey(e, 'AccordionMenu', {\n        open: function() {\n          if ($target.is(':hidden')) {\n            _this.down($target);\n            $target.find('li').first().find('a').first().focus();\n          }\n        },\n        close: function() {\n          if ($target.length && !$target.is(':hidden')) { // close active sub of this item\n            _this.up($target);\n          } else if ($element.parent('[data-submenu]').length) { // close currently open sub\n            _this.up($element.parent('[data-submenu]'));\n            $element.parents('li').first().find('a').first().focus();\n          }\n        },\n        up: function() {\n          $prevElement.focus();\n          return true;\n        },\n        down: function() {\n          $nextElement.focus();\n          return true;\n        },\n        toggle: function() {\n          if (_this.options.submenuToggle) {\n            return false;\n          }\n          if ($element.children('[data-submenu]').length) {\n            _this.toggle($element.children('[data-submenu]'));\n            return true;\n          }\n        },\n        closeAll: function() {\n          _this.hideAll();\n        },\n        handled: function(preventDefault) {\n          if (preventDefault) {\n            e.preventDefault();\n          }\n          e.stopImmediatePropagation();\n        }\n      });\n    });//.attr('tabindex', 0);\n  }\n\n  /**\n   * Closes all panes of the menu.\n   * @function\n   */\n  hideAll() {\n    this.up(this.$element.find('[data-submenu]'));\n  }\n\n  /**\n   * Opens all panes of the menu.\n   * @function\n   */\n  showAll() {\n    this.down(this.$element.find('[data-submenu]'));\n  }\n\n  /**\n   * Toggles the open/close state of a submenu.\n   * @function\n   * @param {jQuery} $target - the submenu to toggle\n   */\n  toggle($target){\n    if(!$target.is(':animated')) {\n      if (!$target.is(':hidden')) {\n        this.up($target);\n      }\n      else {\n        this.down($target);\n      }\n    }\n  }\n\n  /**\n   * Opens the sub-menu defined by `$target`.\n   * @param {jQuery} $target - Sub-menu to open.\n   * @fires AccordionMenu#down\n   */\n  down($target) {\n    var _this = this;\n\n    if(!this.options.multiOpen) {\n      this.up(this.$element.find('.is-active').not($target.parentsUntil(this.$element).add($target)));\n    }\n\n    $target.addClass('is-active').attr({'aria-hidden': false});\n\n    if(this.options.submenuToggle) {\n      $target.prev('.submenu-toggle').attr({'aria-expanded': true});\n    }\n    else {\n      $target.parent('.is-accordion-submenu-parent').attr({'aria-expanded': true});\n    }\n\n    $target.slideDown(_this.options.slideSpeed, function () {\n      /**\n       * Fires when the menu is done opening.\n       * @event AccordionMenu#down\n       */\n      _this.$element.trigger('down.zf.accordionMenu', [$target]);\n    });\n  }\n\n  /**\n   * Closes the sub-menu defined by `$target`. All sub-menus inside the target will be closed as well.\n   * @param {jQuery} $target - Sub-menu to close.\n   * @fires AccordionMenu#up\n   */\n  up($target) {\n    var _this = this;\n    $target.slideUp(_this.options.slideSpeed, function () {\n      /**\n       * Fires when the menu is done collapsing up.\n       * @event AccordionMenu#up\n       */\n      _this.$element.trigger('up.zf.accordionMenu', [$target]);\n    });\n\n    var $menus = $target.find('[data-submenu]').slideUp(0).addBack().attr('aria-hidden', true);\n\n    if(this.options.submenuToggle) {\n      $menus.prev('.submenu-toggle').attr('aria-expanded', false);\n    }\n    else {\n      $menus.parent('.is-accordion-submenu-parent').attr('aria-expanded', false);\n    }\n  }\n\n  /**\n   * Destroys an instance of accordion menu.\n   * @fires AccordionMenu#destroyed\n   */\n  _destroy() {\n    this.$element.find('[data-submenu]').slideDown(0).css('display', '');\n    this.$element.find('a').off('click.zf.accordionMenu');\n\n    if(this.options.submenuToggle) {\n      this.$element.find('.has-submenu-toggle').removeClass('has-submenu-toggle');\n      this.$element.find('.submenu-toggle').remove();\n    }\n\n    Nest.Burn(this.$element, 'accordion');\n  }\n}\n\nAccordionMenu.defaults = {\n  /**\n   * Amount of time to animate the opening of a submenu in ms.\n   * @option\n   * @type {number}\n   * @default 250\n   */\n  slideSpeed: 250,\n  /**\n   * Adds a separate submenu toggle button. This allows the parent item to have a link.\n   * @option\n   * @example true\n   */\n  submenuToggle: false,\n  /**\n   * The text used for the submenu toggle if enabled. This is used for screen readers only.\n   * @option\n   * @example true\n   */\n  submenuToggleText: 'Toggle menu',\n  /**\n   * Allow the menu to have multiple open panes.\n   * @option\n   * @type {boolean}\n   * @default true\n   */\n  multiOpen: true\n};\n\nexport {AccordionMenu};\n"]},"hash":"036639d1b100c5766f7bc9dd9e4a02816e05d6f9"}
