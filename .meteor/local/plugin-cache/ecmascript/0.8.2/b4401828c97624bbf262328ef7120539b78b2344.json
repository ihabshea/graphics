{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"jquery","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"$"}]},{"source":"./foundation.util.keyboard","imported":["Keyboard"],"specifiers":[{"kind":"named","imported":"Keyboard","local":"Keyboard"}]},{"source":"./foundation.util.nest","imported":["Nest"],"specifiers":[{"kind":"named","imported":"Nest","local":"Nest"}]},{"source":"./foundation.util.core","imported":["GetYoDigits","transitionend"],"specifiers":[{"kind":"named","imported":"GetYoDigits","local":"GetYoDigits"},{"kind":"named","imported":"transitionend","local":"transitionend"}]},{"source":"./foundation.util.box","imported":["Box"],"specifiers":[{"kind":"named","imported":"Box","local":"Box"}]},{"source":"./foundation.plugin","imported":["Plugin"],"specifiers":[{"kind":"named","imported":"Plugin","local":"Plugin"}]}],"exports":{"exported":["Drilldown"],"specifiers":[{"kind":"local","local":"Drilldown","exported":"Drilldown"}]}}},"options":{"filename":"packages/zurb:foundation-sites/js/foundation.drilldown.js","filenameRelative":"packages/zurb:foundation-sites/js/foundation.drilldown.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/js/foundation.drilldown.js.map","sourceFileName":"packages/zurb:foundation-sites/js/foundation.drilldown.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"foundation.drilldown"},"ignored":false,"code":"'use strict';\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar module1 = module;\nmodule1.export({\n  Drilldown: function () {\n    return Drilldown;\n  }\n});\nvar $ = void 0;\nmodule1.watch(require(\"jquery\"), {\n  \"default\": function (v) {\n    $ = v;\n  }\n}, 0);\nvar Keyboard = void 0;\nmodule1.watch(require(\"./foundation.util.keyboard\"), {\n  Keyboard: function (v) {\n    Keyboard = v;\n  }\n}, 1);\nvar Nest = void 0;\nmodule1.watch(require(\"./foundation.util.nest\"), {\n  Nest: function (v) {\n    Nest = v;\n  }\n}, 2);\nvar GetYoDigits = void 0,\n    transitionend = void 0;\nmodule1.watch(require(\"./foundation.util.core\"), {\n  GetYoDigits: function (v) {\n    GetYoDigits = v;\n  },\n  transitionend: function (v) {\n    transitionend = v;\n  }\n}, 3);\nvar Box = void 0;\nmodule1.watch(require(\"./foundation.util.box\"), {\n  Box: function (v) {\n    Box = v;\n  }\n}, 4);\nvar Plugin = void 0;\nmodule1.watch(require(\"./foundation.plugin\"), {\n  Plugin: function (v) {\n    Plugin = v;\n  }\n}, 5);\n\n/**\n * Drilldown module.\n * @module foundation.drilldown\n * @requires foundation.util.keyboard\n * @requires foundation.util.nest\n * @requires foundation.util.box\n */var Drilldown = function (_Plugin) {\n  (0, _inherits3.default)(Drilldown, _Plugin);\n\n  function Drilldown() {\n    (0, _classCallCheck3.default)(this, Drilldown);\n    return (0, _possibleConstructorReturn3.default)(this, _Plugin.apply(this, arguments));\n  }\n\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @name Drilldown\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */Drilldown.prototype._setup = function () {\n    function _setup(element, options) {\n      this.$element = element;\n      this.options = $.extend({}, Drilldown.defaults, this.$element.data(), options);\n      this.className = 'Drilldown'; // ie9 back compat\n\n      Nest.Feather(this.$element, 'drilldown');\n\n      this._init();\n\n      Keyboard.register('Drilldown', {\n        'ENTER': 'open',\n        'SPACE': 'open',\n        'ARROW_RIGHT': 'next',\n        'ARROW_UP': 'up',\n        'ARROW_DOWN': 'down',\n        'ARROW_LEFT': 'previous',\n        'ESCAPE': 'close',\n        'TAB': 'down',\n        'SHIFT_TAB': 'up'\n      });\n    }\n\n    return _setup;\n  }(); /**\n        * Initializes the drilldown by creating jQuery collections of elements\n        * @private\n        */\n\n  Drilldown.prototype._init = function () {\n    function _init() {\n      if (this.options.autoApplyClass) {\n        this.$element.addClass('drilldown');\n      }\n\n      this.$element.attr({\n        'role': 'tree',\n        'aria-multiselectable': false\n      });\n      this.$submenuAnchors = this.$element.find('li.is-drilldown-submenu-parent').children('a');\n      this.$submenus = this.$submenuAnchors.parent('li').children('[data-submenu]').attr('role', 'group');\n      this.$menuItems = this.$element.find('li').not('.js-drilldown-back').attr('role', 'treeitem').find('a');\n      this.$element.attr('data-mutate', this.$element.attr('data-drilldown') || GetYoDigits(6, 'drilldown'));\n\n      this._prepareMenu();\n\n      this._registerEvents();\n\n      this._keyboardEvents();\n    }\n\n    return _init;\n  }(); /**\n        * prepares drilldown menu by setting attributes to links and elements\n        * sets a min height to prevent content jumping\n        * wraps the element if not already wrapped\n        * @private\n        * @function\n        */\n\n  Drilldown.prototype._prepareMenu = function () {\n    function _prepareMenu() {\n      var _this = this; // if(!this.options.holdOpen){\n      //   this._menuLinkEvents();\n      // }\n\n\n      this.$submenuAnchors.each(function () {\n        var $link = $(this);\n        var $sub = $link.parent();\n\n        if (_this.options.parentLink) {\n          $link.clone().prependTo($sub.children('[data-submenu]')).wrap('<li class=\"is-submenu-parent-item is-submenu-item is-drilldown-submenu-item\" role=\"menu-item\"></li>');\n        }\n\n        $link.data('savedHref', $link.attr('href')).removeAttr('href').attr('tabindex', 0);\n        $link.children('[data-submenu]').attr({\n          'aria-hidden': true,\n          'tabindex': 0,\n          'role': 'group'\n        });\n\n        _this._events($link);\n      });\n      this.$submenus.each(function () {\n        var $menu = $(this),\n            $back = $menu.find('.js-drilldown-back');\n\n        if (!$back.length) {\n          switch (_this.options.backButtonPosition) {\n            case \"bottom\":\n              $menu.append(_this.options.backButton);\n              break;\n\n            case \"top\":\n              $menu.prepend(_this.options.backButton);\n              break;\n\n            default:\n              console.error(\"Unsupported backButtonPosition value '\" + _this.options.backButtonPosition + \"'\");\n          }\n        }\n\n        _this._back($menu);\n      });\n      this.$submenus.addClass('invisible');\n\n      if (!this.options.autoHeight) {\n        this.$submenus.addClass('drilldown-submenu-cover-previous');\n      } // create a wrapper on element if it doesn't exist.\n\n\n      if (!this.$element.parent().hasClass('is-drilldown')) {\n        this.$wrapper = $(this.options.wrapper).addClass('is-drilldown');\n        if (this.options.animateHeight) this.$wrapper.addClass('animate-height');\n        this.$element.wrap(this.$wrapper);\n      } // set wrapper\n\n\n      this.$wrapper = this.$element.parent();\n      this.$wrapper.css(this._getMaxDims());\n    }\n\n    return _prepareMenu;\n  }();\n\n  Drilldown.prototype._resize = function () {\n    function _resize() {\n      this.$wrapper.css({\n        'max-width': 'none',\n        'min-height': 'none'\n      }); // _getMaxDims has side effects (boo) but calling it should update all other necessary heights & widths\n\n      this.$wrapper.css(this._getMaxDims());\n    }\n\n    return _resize;\n  }(); /**\n        * Adds event handlers to elements in the menu.\n        * @function\n        * @private\n        * @param {jQuery} $elem - the current menu item to add handlers to.\n        */\n\n  Drilldown.prototype._events = function () {\n    function _events($elem) {\n      var _this = this;\n\n      $elem.off('click.zf.drilldown').on('click.zf.drilldown', function (e) {\n        if ($(e.target).parentsUntil('ul', 'li').hasClass('is-drilldown-submenu-parent')) {\n          e.stopImmediatePropagation();\n          e.preventDefault();\n        } // if(e.target !== e.currentTarget.firstElementChild){\n        //   return false;\n        // }\n\n\n        _this._show($elem.parent('li'));\n\n        if (_this.options.closeOnClick) {\n          var $body = $('body');\n          $body.off('.zf.drilldown').on('click.zf.drilldown', function (e) {\n            if (e.target === _this.$element[0] || $.contains(_this.$element[0], e.target)) {\n              return;\n            }\n\n            e.preventDefault();\n\n            _this._hideAll();\n\n            $body.off('.zf.drilldown');\n          });\n        }\n      });\n    }\n\n    return _events;\n  }(); /**\n        * Adds event handlers to the menu element.\n        * @function\n        * @private\n        */\n\n  Drilldown.prototype._registerEvents = function () {\n    function _registerEvents() {\n      if (this.options.scrollTop) {\n        this._bindHandler = this._scrollTop.bind(this);\n        this.$element.on('open.zf.drilldown hide.zf.drilldown closed.zf.drilldown', this._bindHandler);\n      }\n\n      this.$element.on('mutateme.zf.trigger', this._resize.bind(this));\n    }\n\n    return _registerEvents;\n  }(); /**\n        * Scroll to Top of Element or data-scroll-top-element\n        * @function\n        * @fires Drilldown#scrollme\n        */\n\n  Drilldown.prototype._scrollTop = function () {\n    function _scrollTop() {\n      var _this = this;\n\n      var $scrollTopElement = _this.options.scrollTopElement != '' ? $(_this.options.scrollTopElement) : _this.$element,\n          scrollPos = parseInt($scrollTopElement.offset().top + _this.options.scrollTopOffset, 10);\n      $('html, body').stop(true).animate({\n        scrollTop: scrollPos\n      }, _this.options.animationDuration, _this.options.animationEasing, function () {\n        /**\n          * Fires after the menu has scrolled\n          * @event Drilldown#scrollme\n          */if (this === $('html')[0]) _this.$element.trigger('scrollme.zf.drilldown');\n      });\n    }\n\n    return _scrollTop;\n  }(); /**\n        * Adds keydown event listener to `li`'s in the menu.\n        * @private\n        */\n\n  Drilldown.prototype._keyboardEvents = function () {\n    function _keyboardEvents() {\n      var _this = this;\n\n      this.$menuItems.add(this.$element.find('.js-drilldown-back > a, .is-submenu-parent-item > a')).on('keydown.zf.drilldown', function (e) {\n        var $element = $(this),\n            $elements = $element.parent('li').parent('ul').children('li').children('a'),\n            $prevElement,\n            $nextElement;\n        $elements.each(function (i) {\n          if ($(this).is($element)) {\n            $prevElement = $elements.eq(Math.max(0, i - 1));\n            $nextElement = $elements.eq(Math.min(i + 1, $elements.length - 1));\n            return;\n          }\n        });\n        Keyboard.handleKey(e, 'Drilldown', {\n          next: function () {\n            if ($element.is(_this.$submenuAnchors)) {\n              _this._show($element.parent('li'));\n\n              $element.parent('li').one(transitionend($element), function () {\n                $element.parent('li').find('ul li a').filter(_this.$menuItems).first().focus();\n              });\n              return true;\n            }\n          },\n          previous: function () {\n            _this._hide($element.parent('li').parent('ul'));\n\n            $element.parent('li').parent('ul').one(transitionend($element), function () {\n              setTimeout(function () {\n                $element.parent('li').parent('ul').parent('li').children('a').first().focus();\n              }, 1);\n            });\n            return true;\n          },\n          up: function () {\n            $prevElement.focus(); // Don't tap focus on first element in root ul\n\n            return !$element.is(_this.$element.find('> li:first-child > a'));\n          },\n          down: function () {\n            $nextElement.focus(); // Don't tap focus on last element in root ul\n\n            return !$element.is(_this.$element.find('> li:last-child > a'));\n          },\n          close: function () {\n            // Don't close on element in root ul\n            if (!$element.is(_this.$element.find('> li > a'))) {\n              _this._hide($element.parent().parent());\n\n              $element.parent().parent().siblings('a').focus();\n            }\n          },\n          open: function () {\n            if (!$element.is(_this.$menuItems)) {\n              // not menu item means back button\n              _this._hide($element.parent('li').parent('ul'));\n\n              $element.parent('li').parent('ul').one(transitionend($element), function () {\n                setTimeout(function () {\n                  $element.parent('li').parent('ul').parent('li').children('a').first().focus();\n                }, 1);\n              });\n              return true;\n            } else if ($element.is(_this.$submenuAnchors)) {\n              _this._show($element.parent('li'));\n\n              $element.parent('li').one(transitionend($element), function () {\n                $element.parent('li').find('ul li a').filter(_this.$menuItems).first().focus();\n              });\n              return true;\n            }\n          },\n          handled: function (preventDefault) {\n            if (preventDefault) {\n              e.preventDefault();\n            }\n\n            e.stopImmediatePropagation();\n          }\n        });\n      }); // end keyboardAccess\n    }\n\n    return _keyboardEvents;\n  }(); /**\n        * Closes all open elements, and returns to root menu.\n        * @function\n        * @fires Drilldown#closed\n        */\n\n  Drilldown.prototype._hideAll = function () {\n    function _hideAll() {\n      var $elem = this.$element.find('.is-drilldown-submenu.is-active').addClass('is-closing');\n      if (this.options.autoHeight) this.$wrapper.css({\n        height: $elem.parent().closest('ul').data('calcHeight')\n      });\n      $elem.one(transitionend($elem), function (e) {\n        $elem.removeClass('is-active is-closing');\n      }); /**\n           * Fires when the menu is fully closed.\n           * @event Drilldown#closed\n           */\n      this.$element.trigger('closed.zf.drilldown');\n    }\n\n    return _hideAll;\n  }(); /**\n        * Adds event listener for each `back` button, and closes open menus.\n        * @function\n        * @fires Drilldown#back\n        * @param {jQuery} $elem - the current sub-menu to add `back` event.\n        */\n\n  Drilldown.prototype._back = function () {\n    function _back($elem) {\n      var _this = this;\n\n      $elem.off('click.zf.drilldown');\n      $elem.children('.js-drilldown-back').on('click.zf.drilldown', function (e) {\n        e.stopImmediatePropagation(); // console.log('mouseup on back');\n\n        _this._hide($elem); // If there is a parent submenu, call show\n\n\n        var parentSubMenu = $elem.parent('li').parent('ul').parent('li');\n\n        if (parentSubMenu.length) {\n          _this._show(parentSubMenu);\n        }\n      });\n    }\n\n    return _back;\n  }(); /**\n        * Adds event listener to menu items w/o submenus to close open menus on click.\n        * @function\n        * @private\n        */\n\n  Drilldown.prototype._menuLinkEvents = function () {\n    function _menuLinkEvents() {\n      var _this = this;\n\n      this.$menuItems.not('.is-drilldown-submenu-parent').off('click.zf.drilldown').on('click.zf.drilldown', function (e) {\n        // e.stopImmediatePropagation();\n        setTimeout(function () {\n          _this._hideAll();\n        }, 0);\n      });\n    }\n\n    return _menuLinkEvents;\n  }(); /**\n        * Opens a submenu.\n        * @function\n        * @fires Drilldown#open\n        * @param {jQuery} $elem - the current element with a submenu to open, i.e. the `li` tag.\n        */\n\n  Drilldown.prototype._show = function () {\n    function _show($elem) {\n      if (this.options.autoHeight) this.$wrapper.css({\n        height: $elem.children('[data-submenu]').data('calcHeight')\n      });\n      $elem.attr('aria-expanded', true);\n      $elem.children('[data-submenu]').addClass('is-active').removeClass('invisible').attr('aria-hidden', false); /**\n                                                                                                                   * Fires when the submenu has opened.\n                                                                                                                   * @event Drilldown#open\n                                                                                                                   */\n      this.$element.trigger('open.zf.drilldown', [$elem]);\n    }\n\n    return _show;\n  }();\n\n  /**\n   * Hides a submenu\n   * @function\n   * @fires Drilldown#hide\n   * @param {jQuery} $elem - the current sub-menu to hide, i.e. the `ul` tag.\n   */Drilldown.prototype._hide = function () {\n    function _hide($elem) {\n      if (this.options.autoHeight) this.$wrapper.css({\n        height: $elem.parent().closest('ul').data('calcHeight')\n      });\n\n      var _this = this;\n\n      $elem.parent('li').attr('aria-expanded', false);\n      $elem.attr('aria-hidden', true).addClass('is-closing');\n      $elem.addClass('is-closing').one(transitionend($elem), function () {\n        $elem.removeClass('is-active is-closing');\n        $elem.blur().addClass('invisible');\n      }); /**\n           * Fires when the submenu has closed.\n           * @event Drilldown#hide\n           */\n      $elem.trigger('hide.zf.drilldown', [$elem]);\n    }\n\n    return _hide;\n  }(); /**\n        * Iterates through the nested menus to calculate the min-height, and max-width for the menu.\n        * Prevents content jumping.\n        * @function\n        * @private\n        */\n\n  Drilldown.prototype._getMaxDims = function () {\n    function _getMaxDims() {\n      var maxHeight = 0,\n          result = {},\n          _this = this;\n\n      this.$submenus.add(this.$element).each(function () {\n        var numOfElems = $(this).children('li').length;\n        var height = Box.GetDimensions(this).height;\n        maxHeight = height > maxHeight ? height : maxHeight;\n\n        if (_this.options.autoHeight) {\n          $(this).data('calcHeight', height);\n          if (!$(this).hasClass('is-drilldown-submenu')) result['height'] = height;\n        }\n      });\n      if (!this.options.autoHeight) result['min-height'] = maxHeight + \"px\";\n      result['max-width'] = this.$element[0].getBoundingClientRect().width + \"px\";\n      return result;\n    }\n\n    return _getMaxDims;\n  }(); /**\n        * Destroys the Drilldown Menu\n        * @function\n        */\n\n  Drilldown.prototype._destroy = function () {\n    function _destroy() {\n      if (this.options.scrollTop) this.$element.off('.zf.drilldown', this._bindHandler);\n\n      this._hideAll();\n\n      this.$element.off('mutateme.zf.trigger');\n      Nest.Burn(this.$element, 'drilldown');\n      this.$element.unwrap().find('.js-drilldown-back, .is-submenu-parent-item').remove().end().find('.is-active, .is-closing, .is-drilldown-submenu').removeClass('is-active is-closing is-drilldown-submenu').end().find('[data-submenu]').removeAttr('aria-hidden tabindex role');\n      this.$submenuAnchors.each(function () {\n        $(this).off('.zf.drilldown');\n      });\n      this.$submenus.removeClass('drilldown-submenu-cover-previous invisible');\n      this.$element.find('a').each(function () {\n        var $link = $(this);\n        $link.removeAttr('tabindex');\n\n        if ($link.data('savedHref')) {\n          $link.attr('href', $link.data('savedHref')).removeData('savedHref');\n        } else {\n          return;\n        }\n      });\n    }\n\n    return _destroy;\n  }();\n\n  return Drilldown;\n}(Plugin);\n\nDrilldown.defaults = {\n  /**\n   * Drilldowns depend on styles in order to function properly; in the default build of Foundation these are\n   * on the `drilldown` class. This option auto-applies this class to the drilldown upon initialization.\n   * @option\n   * @type {boolian}\n   * @default true\n   */autoApplyClass: true,\n  /**\n   * Markup used for JS generated back button. Prepended  or appended (see backButtonPosition) to submenu lists and deleted on `destroy` method, 'js-drilldown-back' class required. Remove the backslash (`\\`) if copy and pasting.\n   * @option\n   * @type {string}\n   * @default '<li class=\"js-drilldown-back\"><a tabindex=\"0\">Back</a></li>'\n   */backButton: '<li class=\"js-drilldown-back\"><a tabindex=\"0\">Back</a></li>',\n  /**\n   * Position the back button either at the top or bottom of drilldown submenus. Can be `'left'` or `'bottom'`.\n   * @option\n   * @type {string}\n   * @default top\n   */backButtonPosition: 'top',\n  /**\n   * Markup used to wrap drilldown menu. Use a class name for independent styling; the JS applied class: `is-drilldown` is required. Remove the backslash (`\\`) if copy and pasting.\n   * @option\n   * @type {string}\n   * @default '<div></div>'\n   */wrapper: '<div></div>',\n  /**\n   * Adds the parent link to the submenu.\n   * @option\n   * @type {boolean}\n   * @default false\n   */parentLink: false,\n  /**\n   * Allow the menu to return to root list on body click.\n   * @option\n   * @type {boolean}\n   * @default false\n   */closeOnClick: false,\n  /**\n   * Allow the menu to auto adjust height.\n   * @option\n   * @type {boolean}\n   * @default false\n   */autoHeight: false,\n  /**\n   * Animate the auto adjust height.\n   * @option\n   * @type {boolean}\n   * @default false\n   */animateHeight: false,\n  /**\n   * Scroll to the top of the menu after opening a submenu or navigating back using the menu back button\n   * @option\n   * @type {boolean}\n   * @default false\n   */scrollTop: false,\n  /**\n   * String jquery selector (for example 'body') of element to take offset().top from, if empty string the drilldown menu offset().top is taken\n   * @option\n   * @type {string}\n   * @default ''\n   */scrollTopElement: '',\n  /**\n   * ScrollTop offset\n   * @option\n   * @type {number}\n   * @default 0\n   */scrollTopOffset: 0,\n  /**\n   * Scroll animation duration\n   * @option\n   * @type {number}\n   * @default 500\n   */animationDuration: 500,\n  /**\n   * Scroll animation easing. Can be `'swing'` or `'linear'`.\n   * @option\n   * @type {string}\n   * @see {@link https://api.jquery.com/animate|JQuery animate}\n   * @default 'swing'\n   */animationEasing: 'swing' // holdOpen: false\n\n};","map":{"version":3,"sources":["packages/zurb:foundation-sites/js/foundation.drilldown.js"],"names":["module1","module","export","Drilldown","$","watch","require","v","Keyboard","Nest","GetYoDigits","transitionend","Box","Plugin","_setup","element","options","$element","extend","defaults","data","className","Feather","_init","register","autoApplyClass","addClass","attr","$submenuAnchors","find","children","$submenus","parent","$menuItems","not","_prepareMenu","_registerEvents","_keyboardEvents","_this","each","$link","$sub","parentLink","clone","prependTo","wrap","removeAttr","_events","$menu","$back","length","backButtonPosition","append","backButton","prepend","console","error","_back","autoHeight","hasClass","$wrapper","wrapper","animateHeight","css","_getMaxDims","_resize","$elem","off","on","e","target","parentsUntil","stopImmediatePropagation","preventDefault","_show","closeOnClick","$body","contains","_hideAll","scrollTop","_bindHandler","_scrollTop","bind","$scrollTopElement","scrollTopElement","scrollPos","parseInt","offset","top","scrollTopOffset","stop","animate","animationDuration","animationEasing","trigger","add","$elements","$prevElement","$nextElement","i","is","eq","Math","max","min","handleKey","next","one","filter","first","focus","previous","_hide","setTimeout","up","down","close","siblings","open","handled","height","closest","removeClass","parentSubMenu","_menuLinkEvents","blur","maxHeight","result","numOfElems","GetDimensions","getBoundingClientRect","width","_destroy","Burn","unwrap","remove","end","removeData"],"mappings":"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","file":"packages/zurb:foundation-sites/js/foundation.drilldown.js.map","sourcesContent":["'use strict';\n\nimport $ from 'jquery';\nimport { Keyboard } from './foundation.util.keyboard';\nimport { Nest } from './foundation.util.nest';\nimport { GetYoDigits, transitionend } from './foundation.util.core';\nimport { Box } from './foundation.util.box';\nimport { Plugin } from './foundation.plugin';\n\n/**\n * Drilldown module.\n * @module foundation.drilldown\n * @requires foundation.util.keyboard\n * @requires foundation.util.nest\n * @requires foundation.util.box\n */\n\nclass Drilldown extends Plugin {\n  /**\n   * Creates a new instance of a drilldown menu.\n   * @class\n   * @name Drilldown\n   * @param {jQuery} element - jQuery object to make into an accordion menu.\n   * @param {Object} options - Overrides to the default plugin settings.\n   */\n  _setup(element, options) {\n    this.$element = element;\n    this.options = $.extend({}, Drilldown.defaults, this.$element.data(), options);\n    this.className = 'Drilldown'; // ie9 back compat\n\n    Nest.Feather(this.$element, 'drilldown');\n\n    this._init();\n\n    Keyboard.register('Drilldown', {\n      'ENTER': 'open',\n      'SPACE': 'open',\n      'ARROW_RIGHT': 'next',\n      'ARROW_UP': 'up',\n      'ARROW_DOWN': 'down',\n      'ARROW_LEFT': 'previous',\n      'ESCAPE': 'close',\n      'TAB': 'down',\n      'SHIFT_TAB': 'up'\n    });\n  }\n\n  /**\n   * Initializes the drilldown by creating jQuery collections of elements\n   * @private\n   */\n  _init() {\n    if(this.options.autoApplyClass) {\n      this.$element.addClass('drilldown');\n    }\n\n    this.$element.attr({\n      'role': 'tree',\n      'aria-multiselectable': false\n    });\n    this.$submenuAnchors = this.$element.find('li.is-drilldown-submenu-parent').children('a');\n    this.$submenus = this.$submenuAnchors.parent('li').children('[data-submenu]').attr('role', 'group');\n    this.$menuItems = this.$element.find('li').not('.js-drilldown-back').attr('role', 'treeitem').find('a');\n    this.$element.attr('data-mutate', (this.$element.attr('data-drilldown') || GetYoDigits(6, 'drilldown')));\n\n    this._prepareMenu();\n    this._registerEvents();\n\n    this._keyboardEvents();\n  }\n\n  /**\n   * prepares drilldown menu by setting attributes to links and elements\n   * sets a min height to prevent content jumping\n   * wraps the element if not already wrapped\n   * @private\n   * @function\n   */\n  _prepareMenu() {\n    var _this = this;\n    // if(!this.options.holdOpen){\n    //   this._menuLinkEvents();\n    // }\n    this.$submenuAnchors.each(function(){\n      var $link = $(this);\n      var $sub = $link.parent();\n      if(_this.options.parentLink){\n        $link.clone().prependTo($sub.children('[data-submenu]')).wrap('<li class=\"is-submenu-parent-item is-submenu-item is-drilldown-submenu-item\" role=\"menu-item\"></li>');\n      }\n      $link.data('savedHref', $link.attr('href')).removeAttr('href').attr('tabindex', 0);\n      $link.children('[data-submenu]')\n          .attr({\n            'aria-hidden': true,\n            'tabindex': 0,\n            'role': 'group'\n          });\n      _this._events($link);\n    });\n    this.$submenus.each(function(){\n      var $menu = $(this),\n          $back = $menu.find('.js-drilldown-back');\n      if(!$back.length){\n        switch (_this.options.backButtonPosition) {\n          case \"bottom\":\n            $menu.append(_this.options.backButton);\n            break;\n          case \"top\":\n            $menu.prepend(_this.options.backButton);\n            break;\n          default:\n            console.error(\"Unsupported backButtonPosition value '\" + _this.options.backButtonPosition + \"'\");\n        }\n      }\n      _this._back($menu);\n    });\n\n    this.$submenus.addClass('invisible');\n    if(!this.options.autoHeight) {\n      this.$submenus.addClass('drilldown-submenu-cover-previous');\n    }\n\n    // create a wrapper on element if it doesn't exist.\n    if(!this.$element.parent().hasClass('is-drilldown')){\n      this.$wrapper = $(this.options.wrapper).addClass('is-drilldown');\n      if(this.options.animateHeight) this.$wrapper.addClass('animate-height');\n      this.$element.wrap(this.$wrapper);\n    }\n    // set wrapper\n    this.$wrapper = this.$element.parent();\n    this.$wrapper.css(this._getMaxDims());\n  }\n\n  _resize() {\n    this.$wrapper.css({'max-width': 'none', 'min-height': 'none'});\n    // _getMaxDims has side effects (boo) but calling it should update all other necessary heights & widths\n    this.$wrapper.css(this._getMaxDims());\n  }\n\n  /**\n   * Adds event handlers to elements in the menu.\n   * @function\n   * @private\n   * @param {jQuery} $elem - the current menu item to add handlers to.\n   */\n  _events($elem) {\n    var _this = this;\n\n    $elem.off('click.zf.drilldown')\n    .on('click.zf.drilldown', function(e){\n      if($(e.target).parentsUntil('ul', 'li').hasClass('is-drilldown-submenu-parent')){\n        e.stopImmediatePropagation();\n        e.preventDefault();\n      }\n\n      // if(e.target !== e.currentTarget.firstElementChild){\n      //   return false;\n      // }\n      _this._show($elem.parent('li'));\n\n      if(_this.options.closeOnClick){\n        var $body = $('body');\n        $body.off('.zf.drilldown').on('click.zf.drilldown', function(e){\n          if (e.target === _this.$element[0] || $.contains(_this.$element[0], e.target)) { return; }\n          e.preventDefault();\n          _this._hideAll();\n          $body.off('.zf.drilldown');\n        });\n      }\n    });\n  }\n\n  /**\n   * Adds event handlers to the menu element.\n   * @function\n   * @private\n   */\n  _registerEvents() {\n    if(this.options.scrollTop){\n      this._bindHandler = this._scrollTop.bind(this);\n      this.$element.on('open.zf.drilldown hide.zf.drilldown closed.zf.drilldown',this._bindHandler);\n    }\n    this.$element.on('mutateme.zf.trigger', this._resize.bind(this));\n  }\n\n  /**\n   * Scroll to Top of Element or data-scroll-top-element\n   * @function\n   * @fires Drilldown#scrollme\n   */\n  _scrollTop() {\n    var _this = this;\n    var $scrollTopElement = _this.options.scrollTopElement!=''?$(_this.options.scrollTopElement):_this.$element,\n        scrollPos = parseInt($scrollTopElement.offset().top+_this.options.scrollTopOffset, 10);\n    $('html, body').stop(true).animate({ scrollTop: scrollPos }, _this.options.animationDuration, _this.options.animationEasing,function(){\n      /**\n        * Fires after the menu has scrolled\n        * @event Drilldown#scrollme\n        */\n      if(this===$('html')[0])_this.$element.trigger('scrollme.zf.drilldown');\n    });\n  }\n\n  /**\n   * Adds keydown event listener to `li`'s in the menu.\n   * @private\n   */\n  _keyboardEvents() {\n    var _this = this;\n\n    this.$menuItems.add(this.$element.find('.js-drilldown-back > a, .is-submenu-parent-item > a')).on('keydown.zf.drilldown', function(e){\n      var $element = $(this),\n          $elements = $element.parent('li').parent('ul').children('li').children('a'),\n          $prevElement,\n          $nextElement;\n\n      $elements.each(function(i) {\n        if ($(this).is($element)) {\n          $prevElement = $elements.eq(Math.max(0, i-1));\n          $nextElement = $elements.eq(Math.min(i+1, $elements.length-1));\n          return;\n        }\n      });\n\n      Keyboard.handleKey(e, 'Drilldown', {\n        next: function() {\n          if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element.parent('li'));\n            $element.parent('li').one(transitionend($element), function(){\n              $element.parent('li').find('ul li a').filter(_this.$menuItems).first().focus();\n            });\n            return true;\n          }\n        },\n        previous: function() {\n          _this._hide($element.parent('li').parent('ul'));\n          $element.parent('li').parent('ul').one(transitionend($element), function(){\n            setTimeout(function() {\n              $element.parent('li').parent('ul').parent('li').children('a').first().focus();\n            }, 1);\n          });\n          return true;\n        },\n        up: function() {\n          $prevElement.focus();\n          // Don't tap focus on first element in root ul\n          return !$element.is(_this.$element.find('> li:first-child > a'));\n        },\n        down: function() {\n          $nextElement.focus();\n          // Don't tap focus on last element in root ul\n          return !$element.is(_this.$element.find('> li:last-child > a'));\n        },\n        close: function() {\n          // Don't close on element in root ul\n          if (!$element.is(_this.$element.find('> li > a'))) {\n            _this._hide($element.parent().parent());\n            $element.parent().parent().siblings('a').focus();\n          }\n        },\n        open: function() {\n          if (!$element.is(_this.$menuItems)) { // not menu item means back button\n            _this._hide($element.parent('li').parent('ul'));\n            $element.parent('li').parent('ul').one(transitionend($element), function(){\n              setTimeout(function() {\n                $element.parent('li').parent('ul').parent('li').children('a').first().focus();\n              }, 1);\n            });\n            return true;\n          } else if ($element.is(_this.$submenuAnchors)) {\n            _this._show($element.parent('li'));\n            $element.parent('li').one(transitionend($element), function(){\n              $element.parent('li').find('ul li a').filter(_this.$menuItems).first().focus();\n            });\n            return true;\n          }\n        },\n        handled: function(preventDefault) {\n          if (preventDefault) {\n            e.preventDefault();\n          }\n          e.stopImmediatePropagation();\n        }\n      });\n    }); // end keyboardAccess\n  }\n\n  /**\n   * Closes all open elements, and returns to root menu.\n   * @function\n   * @fires Drilldown#closed\n   */\n  _hideAll() {\n    var $elem = this.$element.find('.is-drilldown-submenu.is-active').addClass('is-closing');\n    if(this.options.autoHeight) this.$wrapper.css({height:$elem.parent().closest('ul').data('calcHeight')});\n    $elem.one(transitionend($elem), function(e){\n      $elem.removeClass('is-active is-closing');\n    });\n        /**\n         * Fires when the menu is fully closed.\n         * @event Drilldown#closed\n         */\n    this.$element.trigger('closed.zf.drilldown');\n  }\n\n  /**\n   * Adds event listener for each `back` button, and closes open menus.\n   * @function\n   * @fires Drilldown#back\n   * @param {jQuery} $elem - the current sub-menu to add `back` event.\n   */\n  _back($elem) {\n    var _this = this;\n    $elem.off('click.zf.drilldown');\n    $elem.children('.js-drilldown-back')\n      .on('click.zf.drilldown', function(e){\n        e.stopImmediatePropagation();\n        // console.log('mouseup on back');\n        _this._hide($elem);\n\n        // If there is a parent submenu, call show\n        let parentSubMenu = $elem.parent('li').parent('ul').parent('li');\n        if (parentSubMenu.length) {\n          _this._show(parentSubMenu);\n        }\n      });\n  }\n\n  /**\n   * Adds event listener to menu items w/o submenus to close open menus on click.\n   * @function\n   * @private\n   */\n  _menuLinkEvents() {\n    var _this = this;\n    this.$menuItems.not('.is-drilldown-submenu-parent')\n        .off('click.zf.drilldown')\n        .on('click.zf.drilldown', function(e){\n          // e.stopImmediatePropagation();\n          setTimeout(function(){\n            _this._hideAll();\n          }, 0);\n      });\n  }\n\n  /**\n   * Opens a submenu.\n   * @function\n   * @fires Drilldown#open\n   * @param {jQuery} $elem - the current element with a submenu to open, i.e. the `li` tag.\n   */\n  _show($elem) {\n    if(this.options.autoHeight) this.$wrapper.css({height:$elem.children('[data-submenu]').data('calcHeight')});\n    $elem.attr('aria-expanded', true);\n    $elem.children('[data-submenu]').addClass('is-active').removeClass('invisible').attr('aria-hidden', false);\n    /**\n     * Fires when the submenu has opened.\n     * @event Drilldown#open\n     */\n    this.$element.trigger('open.zf.drilldown', [$elem]);\n  };\n\n  /**\n   * Hides a submenu\n   * @function\n   * @fires Drilldown#hide\n   * @param {jQuery} $elem - the current sub-menu to hide, i.e. the `ul` tag.\n   */\n  _hide($elem) {\n    if(this.options.autoHeight) this.$wrapper.css({height:$elem.parent().closest('ul').data('calcHeight')});\n    var _this = this;\n    $elem.parent('li').attr('aria-expanded', false);\n    $elem.attr('aria-hidden', true).addClass('is-closing')\n    $elem.addClass('is-closing')\n         .one(transitionend($elem), function(){\n           $elem.removeClass('is-active is-closing');\n           $elem.blur().addClass('invisible');\n         });\n    /**\n     * Fires when the submenu has closed.\n     * @event Drilldown#hide\n     */\n    $elem.trigger('hide.zf.drilldown', [$elem]);\n  }\n\n  /**\n   * Iterates through the nested menus to calculate the min-height, and max-width for the menu.\n   * Prevents content jumping.\n   * @function\n   * @private\n   */\n  _getMaxDims() {\n    var  maxHeight = 0, result = {}, _this = this;\n    this.$submenus.add(this.$element).each(function(){\n      var numOfElems = $(this).children('li').length;\n      var height = Box.GetDimensions(this).height;\n      maxHeight = height > maxHeight ? height : maxHeight;\n      if(_this.options.autoHeight) {\n        $(this).data('calcHeight',height);\n        if (!$(this).hasClass('is-drilldown-submenu')) result['height'] = height;\n      }\n    });\n\n    if(!this.options.autoHeight) result['min-height'] = `${maxHeight}px`;\n\n    result['max-width'] = `${this.$element[0].getBoundingClientRect().width}px`;\n\n    return result;\n  }\n\n  /**\n   * Destroys the Drilldown Menu\n   * @function\n   */\n  _destroy() {\n    if(this.options.scrollTop) this.$element.off('.zf.drilldown',this._bindHandler);\n    this._hideAll();\n\t  this.$element.off('mutateme.zf.trigger');\n    Nest.Burn(this.$element, 'drilldown');\n    this.$element.unwrap()\n                 .find('.js-drilldown-back, .is-submenu-parent-item').remove()\n                 .end().find('.is-active, .is-closing, .is-drilldown-submenu').removeClass('is-active is-closing is-drilldown-submenu')\n                 .end().find('[data-submenu]').removeAttr('aria-hidden tabindex role');\n    this.$submenuAnchors.each(function() {\n      $(this).off('.zf.drilldown');\n    });\n\n    this.$submenus.removeClass('drilldown-submenu-cover-previous invisible');\n\n    this.$element.find('a').each(function(){\n      var $link = $(this);\n      $link.removeAttr('tabindex');\n      if($link.data('savedHref')){\n        $link.attr('href', $link.data('savedHref')).removeData('savedHref');\n      }else{ return; }\n    });\n  };\n}\n\nDrilldown.defaults = {\n  /**\n   * Drilldowns depend on styles in order to function properly; in the default build of Foundation these are\n   * on the `drilldown` class. This option auto-applies this class to the drilldown upon initialization.\n   * @option\n   * @type {boolian}\n   * @default true\n   */\n  autoApplyClass: true,\n  /**\n   * Markup used for JS generated back button. Prepended  or appended (see backButtonPosition) to submenu lists and deleted on `destroy` method, 'js-drilldown-back' class required. Remove the backslash (`\\`) if copy and pasting.\n   * @option\n   * @type {string}\n   * @default '<li class=\"js-drilldown-back\"><a tabindex=\"0\">Back</a></li>'\n   */\n  backButton: '<li class=\"js-drilldown-back\"><a tabindex=\"0\">Back</a></li>',\n  /**\n   * Position the back button either at the top or bottom of drilldown submenus. Can be `'left'` or `'bottom'`.\n   * @option\n   * @type {string}\n   * @default top\n   */\n  backButtonPosition: 'top',\n  /**\n   * Markup used to wrap drilldown menu. Use a class name for independent styling; the JS applied class: `is-drilldown` is required. Remove the backslash (`\\`) if copy and pasting.\n   * @option\n   * @type {string}\n   * @default '<div></div>'\n   */\n  wrapper: '<div></div>',\n  /**\n   * Adds the parent link to the submenu.\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  parentLink: false,\n  /**\n   * Allow the menu to return to root list on body click.\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  closeOnClick: false,\n  /**\n   * Allow the menu to auto adjust height.\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  autoHeight: false,\n  /**\n   * Animate the auto adjust height.\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  animateHeight: false,\n  /**\n   * Scroll to the top of the menu after opening a submenu or navigating back using the menu back button\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  scrollTop: false,\n  /**\n   * String jquery selector (for example 'body') of element to take offset().top from, if empty string the drilldown menu offset().top is taken\n   * @option\n   * @type {string}\n   * @default ''\n   */\n  scrollTopElement: '',\n  /**\n   * ScrollTop offset\n   * @option\n   * @type {number}\n   * @default 0\n   */\n  scrollTopOffset: 0,\n  /**\n   * Scroll animation duration\n   * @option\n   * @type {number}\n   * @default 500\n   */\n  animationDuration: 500,\n  /**\n   * Scroll animation easing. Can be `'swing'` or `'linear'`.\n   * @option\n   * @type {string}\n   * @see {@link https://api.jquery.com/animate|JQuery animate}\n   * @default 'swing'\n   */\n  animationEasing: 'swing'\n  // holdOpen: false\n};\n\nexport {Drilldown};\n"]},"hash":"b4401828c97624bbf262328ef7120539b78b2344"}
