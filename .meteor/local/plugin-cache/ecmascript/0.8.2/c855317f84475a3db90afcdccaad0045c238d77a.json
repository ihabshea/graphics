{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js","filenameRelative":"packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js.map","sourceFileName":"packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"foundation.magellan"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/******/(function (modules) {\n  // webpackBootstrap\n  /******/ // The module cache\n  /******/var installedModules = {}; /******/ /******/ // The require function\n  /******/\n\n  function __webpack_require__(moduleId) {\n    /******/ /******/ // Check if module is in cache\n    /******/if (installedModules[moduleId]) {\n      /******/return installedModules[moduleId].exports; /******/\n    } /******/ // Create a new module (and put it into the cache)\n    /******/\n\n    var module = installedModules[moduleId] = {\n      /******/i: moduleId,\n      /******/l: false,\n      /******/exports: {} /******/\n    }; /******/ /******/ // Execute the module function\n    /******/\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded\n    /******/\n    module.l = true; /******/ /******/ // Return the exports of the module\n    /******/\n    return module.exports; /******/\n  } /******/ /******/ /******/ // expose the modules object (__webpack_modules__)\n  /******/\n\n  __webpack_require__.m = modules; /******/ /******/ // expose the module cache\n  /******/\n  __webpack_require__.c = installedModules; /******/ /******/ // identity function for calling harmony imports with the correct context\n  /******/\n\n  __webpack_require__.i = function (value) {\n    return value;\n  }; /******/ /******/ // define getter function for harmony exports\n  /******/\n\n  __webpack_require__.d = function (exports, name, getter) {\n    /******/if (!__webpack_require__.o(exports, name)) {\n      /******/Object.defineProperty(exports, name, {\n        /******/configurable: false,\n        /******/enumerable: true,\n        /******/get: getter /******/\n      }); /******/\n    } /******/\n  }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules\n  /******/\n\n  __webpack_require__.n = function (module) {\n    /******/var getter = module && module.__esModule ? /******/function () {\n      function getDefault() {\n        return module['default'];\n      }\n\n      return getDefault;\n    }() : /******/function () {\n      function getModuleExports() {\n        return module;\n      }\n\n      return getModuleExports;\n    }(); /******/\n\n    __webpack_require__.d(getter, 'a', getter); /******/\n\n    return getter; /******/\n  }; /******/ /******/ // Object.prototype.hasOwnProperty.call\n  /******/\n\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  }; /******/ /******/ // __webpack_public_path__\n  /******/\n\n  __webpack_require__.p = \"\"; /******/ /******/ // Load entry module and return exports\n  /******/\n  return __webpack_require__(__webpack_require__.s = 87); /******/\n})( /************************************************************************/ /******/{\n  /***/0: /***/function (module, exports) {\n    module.exports = jQuery; /***/\n  },\n  /***/1: /***/function (module, exports) {\n    module.exports = {\n      Foundation: window.Foundation\n    }; /***/\n  },\n  /***/2: /***/function (module, exports) {\n    module.exports = {\n      Plugin: window.Foundation.Plugin\n    }; /***/\n  },\n  /***/21: /***/function (module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    Object.defineProperty(__webpack_exports__, \"__esModule\", {\n      value: true\n    }); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_0__foundation_core__ = __webpack_require__(1); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_0__foundation_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__foundation_core__); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_1__foundation_magellan__ = __webpack_require__(51);\n\n    __WEBPACK_IMPORTED_MODULE_0__foundation_core__[\"Foundation\"].plugin(__WEBPACK_IMPORTED_MODULE_1__foundation_magellan__[\"a\" /* Magellan */], 'Magellan'); /***/\n  },\n  /***/3: /***/function (module, exports) {\n    module.exports = {\n      rtl: window.Foundation.rtl,\n      GetYoDigits: window.Foundation.GetYoDigits,\n      transitionend: window.Foundation.transitionend\n    }; /***/\n  },\n  /***/51: /***/function (module, __webpack_exports__, __webpack_require__) {\n    \"use strict\"; /* harmony export (binding) */\n\n    __webpack_require__.d(__webpack_exports__, \"a\", function () {\n      return Magellan;\n    }); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(0); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core__ = __webpack_require__(3); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_2__foundation_plugin__ = __webpack_require__(2); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_2__foundation_plugin___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__foundation_plugin__); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__ = __webpack_require__(76); /* harmony import */\n\n    var __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__);\n\n    var _createClass = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n\n      return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n    }\n\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n      }\n\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    } /**\n       * Magellan module.\n       * @module foundation.magellan\n       * @requires foundation.smoothScroll\n       */\n\n    var Magellan = function (_Plugin) {\n      _inherits(Magellan, _Plugin);\n\n      function Magellan() {\n        _classCallCheck(this, Magellan);\n\n        return _possibleConstructorReturn(this, (Magellan.__proto__ || Object.getPrototypeOf(Magellan)).apply(this, arguments));\n      }\n\n      _createClass(Magellan, [{\n        key: '_setup',\n        /**\n         * Creates a new instance of Magellan.\n         * @class\n         * @name Magellan\n         * @fires Magellan#init\n         * @param {Object} element - jQuery object to add the trigger to.\n         * @param {Object} options - Overrides to the default plugin settings.\n         */value: function () {\n          function _setup(element, options) {\n            this.$element = element;\n            this.options = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend({}, Magellan.defaults, this.$element.data(), options);\n            this.className = 'Magellan'; // ie9 back compat\n\n            this._init();\n\n            this.calcPoints();\n          }\n\n          return _setup;\n        }() /**\n             * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n             * @private\n             */\n      }, {\n        key: '_init',\n        value: function () {\n          function _init() {\n            var id = this.$element[0].id || __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__[\"GetYoDigits\"])(6, 'magellan');\n\n            var _this = this;\n\n            this.$targets = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-magellan-target]');\n            this.$links = this.$element.find('a');\n            this.$element.attr({\n              'data-resize': id,\n              'data-scroll': id,\n              'id': id\n            });\n            this.$active = __WEBPACK_IMPORTED_MODULE_0_jquery___default()();\n            this.scrollPos = parseInt(window.pageYOffset, 10);\n\n            this._events();\n          }\n\n          return _init;\n        }() /**\n             * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n             * Can be invoked if new elements are added or the size of a location changes.\n             * @function\n             */\n      }, {\n        key: 'calcPoints',\n        value: function () {\n          function calcPoints() {\n            var _this = this,\n                body = document.body,\n                html = document.documentElement;\n\n            this.points = [];\n            this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\n            this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n            this.$targets.each(function () {\n              var $tar = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),\n                  pt = Math.round($tar.offset().top - _this.options.threshold);\n\n              $tar.targetPoint = pt;\n\n              _this.points.push(pt);\n            });\n          }\n\n          return calcPoints;\n        }() /**\n             * Initializes events for Magellan.\n             * @private\n             */\n      }, {\n        key: '_events',\n        value: function () {\n          function _events() {\n            var _this = this,\n                $body = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('html, body'),\n                opts = {\n              duration: _this.options.animationDuration,\n              easing: _this.options.animationEasing\n            };\n\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).one('load', function () {\n              if (_this.options.deepLinking) {\n                if (location.hash) {\n                  _this.scrollToLoc(location.hash);\n                }\n              }\n\n              _this.calcPoints();\n\n              _this._updateActive();\n            });\n\n            this.$element.on({\n              'resizeme.zf.trigger': this.reflow.bind(this),\n              'scrollme.zf.trigger': this._updateActive.bind(this)\n            }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n              e.preventDefault();\n              var arrival = this.getAttribute('href');\n\n              _this.scrollToLoc(arrival);\n            });\n\n            this._deepLinkScroll = function (e) {\n              if (_this.options.deepLinking) {\n                _this.scrollToLoc(window.location.hash);\n              }\n            };\n\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).on('popstate', this._deepLinkScroll);\n          }\n\n          return _events;\n        }() /**\n             * Function to scroll to a given location on the page.\n             * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\n             * @function\n             */\n      }, {\n        key: 'scrollToLoc',\n        value: function () {\n          function scrollToLoc(loc) {\n            this._inTransition = true;\n\n            var _this = this;\n\n            var options = {\n              animationEasing: this.options.animationEasing,\n              animationDuration: this.options.animationDuration,\n              threshold: this.options.threshold,\n              offset: this.options.offset\n            };\n\n            __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__[\"SmoothScroll\"].scrollToLoc(loc, options, function () {\n              _this._inTransition = false;\n\n              _this._updateActive();\n            });\n          }\n\n          return scrollToLoc;\n        }() /**\n             * Calls necessary functions to update Magellan upon DOM change\n             * @function\n             */\n      }, {\n        key: 'reflow',\n        value: function () {\n          function reflow() {\n            this.calcPoints();\n\n            this._updateActive();\n          }\n\n          return reflow;\n        }() /**\n             * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n             * @private\n             * @function\n             * @fires Magellan#update\n             */\n      }, {\n        key: '_updateActive',\n        value: function () {\n          function _updateActive() /*evt, elem, scrollPos*/{\n            if (this._inTransition) {\n              return;\n            }\n\n            var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n                curIdx;\n\n            if (winPos + this.winHeight === this.docHeight) {\n              curIdx = this.points.length - 1;\n            } else if (winPos < this.points[0]) {\n              curIdx = undefined;\n            } else {\n              var isDown = this.scrollPos < winPos,\n                  _this = this,\n                  curVisible = this.points.filter(function (p, i) {\n                return isDown ? p - _this.options.offset <= winPos : p - _this.options.offset - _this.options.threshold <= winPos;\n              });\n\n              curIdx = curVisible.length ? curVisible.length - 1 : 0;\n            }\n\n            this.$active.removeClass(this.options.activeClass);\n            this.$active = this.$links.filter('[href=\"#' + this.$targets.eq(curIdx).data('magellan-target') + '\"]').addClass(this.options.activeClass);\n\n            if (this.options.deepLinking) {\n              var hash = \"\";\n\n              if (curIdx != undefined) {\n                hash = this.$active[0].getAttribute('href');\n              }\n\n              if (hash !== window.location.hash) {\n                if (window.history.pushState) {\n                  window.history.pushState(null, null, hash);\n                } else {\n                  window.location.hash = hash;\n                }\n              }\n            }\n\n            this.scrollPos = winPos; /**\n                                      * Fires when magellan is finished updating to the new active element.\n                                      * @event Magellan#update\n                                      */\n            this.$element.trigger('update.zf.magellan', [this.$active]);\n          }\n\n          return _updateActive;\n        }() /**\n             * Destroys an instance of Magellan and resets the url of the window.\n             * @function\n             */\n      }, {\n        key: '_destroy',\n        value: function () {\n          function _destroy() {\n            this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n            if (this.options.deepLinking) {\n              var hash = this.$active[0].getAttribute('href');\n              window.location.hash.replace(hash, '');\n            }\n\n            __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off('popstate', this._deepLinkScroll);\n          }\n\n          return _destroy;\n        }()\n      }]);\n\n      return Magellan;\n    }(__WEBPACK_IMPORTED_MODULE_2__foundation_plugin__[\"Plugin\"]); /**\n                                                                    * Default settings for plugin\n                                                                    */\n\n    Magellan.defaults = {\n      /**\n       * Amount of time, in ms, the animated scrolling should take between locations.\n       * @option\n       * @type {number}\n       * @default 500\n       */animationDuration: 500,\n      /**\n       * Animation style to use when scrolling between locations. Can be `'swing'` or `'linear'`.\n       * @option\n       * @type {string}\n       * @default 'linear'\n       * @see {@link https://api.jquery.com/animate|Jquery animate}\n       */animationEasing: 'linear',\n      /**\n       * Number of pixels to use as a marker for location changes.\n       * @option\n       * @type {number}\n       * @default 50\n       */threshold: 50,\n      /**\n       * Class applied to the active locations link on the magellan container.\n       * @option\n       * @type {string}\n       * @default 'is-active'\n       */activeClass: 'is-active',\n      /**\n       * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n       * @option\n       * @type {boolean}\n       * @default false\n       */deepLinking: false,\n      /**\n       * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\n       * @option\n       * @type {number}\n       * @default 0\n       */offset: 0\n    }; /***/\n  },\n  /***/76: /***/function (module, exports) {\n    module.exports = {\n      SmoothScroll: window.Foundation.SmoothScroll\n    }; /***/\n  },\n  /***/87: /***/function (module, exports, __webpack_require__) {\n    module.exports = __webpack_require__(21); /***/\n  } /******/\n});","map":{"version":3,"sources":["packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","jQuery","Foundation","window","Plugin","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__foundation_core__","__WEBPACK_IMPORTED_MODULE_0__foundation_core___default","__WEBPACK_IMPORTED_MODULE_1__foundation_magellan__","plugin","rtl","GetYoDigits","transitionend","Magellan","__WEBPACK_IMPORTED_MODULE_0_jquery__","__WEBPACK_IMPORTED_MODULE_0_jquery___default","__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__","__WEBPACK_IMPORTED_MODULE_1__foundation_util_core___default","__WEBPACK_IMPORTED_MODULE_2__foundation_plugin__","__WEBPACK_IMPORTED_MODULE_2__foundation_plugin___default","__WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__","__WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll___default","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_Plugin","getPrototypeOf","apply","arguments","_setup","element","options","$element","a","extend","defaults","data","className","_init","calcPoints","id","_this","$targets","$links","find","attr","$active","scrollPos","parseInt","pageYOffset","_events","body","document","html","documentElement","points","winHeight","Math","round","max","innerHeight","clientHeight","docHeight","scrollHeight","offsetHeight","each","$tar","pt","offset","top","threshold","targetPoint","push","$body","opts","duration","animationDuration","easing","animationEasing","one","deepLinking","location","hash","scrollToLoc","_updateActive","on","reflow","bind","e","preventDefault","arrival","getAttribute","_deepLinkScroll","loc","_inTransition","winPos","curIdx","undefined","isDown","curVisible","filter","removeClass","activeClass","eq","addClass","history","pushState","trigger","_destroy","off","replace","SmoothScroll"],"mappings":";;;;;;AAAA,QAAS,CAAC,UAASA,OAAT,EAAkB;AAAE;AAC9B,UAD4B,CAClB;AACV,UAAU,IAAIC,mBAAmB,EAAvB,CAFkB,CAG5B,QAH4B,CAI5B,QAJ4B,CAIlB;AACV;;AAAU,WAASC,mBAAT,CAA6BC,QAA7B,EAAuC;AACjD,YADiD,CAEjD,QAFiD,CAEtC;AACX,YAAW,IAAGF,iBAAiBE,QAAjB,CAAH,EAA+B;AAC1C,cAAY,OAAOF,iBAAiBE,QAAjB,EAA2BC,OAAlC,CAD8B,CAE1C;AAAY,KALqC,CAMjD,QANiD,CAMtC;AACX;;AAAW,QAAIC,SAASJ,iBAAiBE,QAAjB,IAA6B;AACrD,cAAYG,GAAGH,QADsC;AAErD,cAAYI,GAAG,KAFsC;AAGrD,cAAYH,SAAS,EAHgC,CAIrD;AAJqD,KAA1C,CAPsC,CAYjD,QAZiD,CAajD,QAbiD,CAatC;AACX;AAAWJ,YAAQG,QAAR,EAAkBK,IAAlB,CAAuBH,OAAOD,OAA9B,EAAuCC,MAAvC,EAA+CA,OAAOD,OAAtD,EAA+DF,mBAA/D,EAdsC,CAejD,QAfiD,CAgBjD,QAhBiD,CAgBtC;AACX;AAAWG,WAAOE,CAAP,GAAW,IAAX,CAjBsC,CAkBjD,QAlBiD,CAmBjD,QAnBiD,CAmBtC;AACX;AAAW,WAAOF,OAAOD,OAAd,CApBsC,CAqBjD;AAAW,GA1BiB,CA2B5B,QA3B4B,CA4B5B,QA5B4B,CA6B5B,QA7B4B,CA6BlB;AACV;;AAAUF,sBAAoBO,CAApB,GAAwBT,OAAxB,CA9BkB,CA+B5B,QA/B4B,CAgC5B,QAhC4B,CAgClB;AACV;AAAUE,sBAAoBQ,CAApB,GAAwBT,gBAAxB,CAjCkB,CAkC5B,QAlC4B,CAmC5B,QAnC4B,CAmClB;AACV;;AAAUC,sBAAoBI,CAApB,GAAwB,UAASK,KAAT,EAAgB;AAAE,WAAOA,KAAP;AAAe,GAAzD,CApCkB,CAqC5B,QArC4B,CAsC5B,QAtC4B,CAsClB;AACV;;AAAUT,sBAAoBU,CAApB,GAAwB,UAASR,OAAT,EAAkBS,IAAlB,EAAwBC,MAAxB,EAAgC;AAClE,YAAW,IAAG,CAACZ,oBAAoBa,CAApB,CAAsBX,OAAtB,EAA+BS,IAA/B,CAAJ,EAA0C;AACrD,cAAYG,OAAOC,cAAP,CAAsBb,OAAtB,EAA+BS,IAA/B,EAAqC;AACjD,gBAAaK,cAAc,KADsB;AAEjD,gBAAaC,YAAY,IAFwB;AAGjD,gBAAaC,KAAKN,MAH+B,CAIjD;AAJiD,OAArC,EADyC,CAMrD;AAAY,KAPsD,CAQlE;AAAW,GARD,CAvCkB,CAgD5B,QAhD4B,CAiD5B,QAjD4B,CAiDlB;AACV;;AAAUZ,sBAAoBmB,CAApB,GAAwB,UAAShB,MAAT,EAAiB;AACnD,YAAW,IAAIS,SAAST,UAAUA,OAAOiB,UAAjB,GACxB,QADwB;AACZ,eAASC,UAAT,GAAsB;AAAE,eAAOlB,OAAO,SAAP,CAAP;AAA2B;;AADvC,aACHkB,UADG;AAAA,UAExB,QAFwB;AAEZ,eAASC,gBAAT,GAA4B;AAAE,eAAOnB,MAAP;AAAgB;;AAFlC,aAEHmB,gBAFG;AAAA,OAAb,CADwC,CAInD;;AAAWtB,wBAAoBU,CAApB,CAAsBE,MAAtB,EAA8B,GAA9B,EAAmCA,MAAnC,EAJwC,CAKnD;;AAAW,WAAOA,MAAP,CALwC,CAMnD;AAAW,GAND,CAlDkB,CAyD5B,QAzD4B,CA0D5B,QA1D4B,CA0DlB;AACV;;AAAUZ,sBAAoBa,CAApB,GAAwB,UAASU,MAAT,EAAiBC,QAAjB,EAA2B;AAAE,WAAOV,OAAOW,SAAP,CAAiBC,cAAjB,CAAgCpB,IAAhC,CAAqCiB,MAArC,EAA6CC,QAA7C,CAAP;AAAgE,GAArH,CA3DkB,CA4D5B,QA5D4B,CA6D5B,QA7D4B,CA6DlB;AACV;;AAAUxB,sBAAoB2B,CAApB,GAAwB,EAAxB,CA9DkB,CA+D5B,QA/D4B,CAgE5B,QAhE4B,CAgElB;AACV;AAAU,SAAO3B,oBAAoBA,oBAAoB4B,CAApB,GAAwB,EAA5C,CAAP,CAjEkB,CAkE5B;AAAU,CAlED,GAmET,0EAnES,CAoET,QAAU;AAEV,OAAM,GACN,KAAO,UAASzB,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,WAAOD,OAAP,GAAiB2B,MAAjB,CAFiC,CAIjC;AAAO,GAPG;AASV,OAAM,GACN,KAAO,UAAS1B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,WAAOD,OAAP,GAAiB;AAAC4B,kBAAYC,OAAOD;AAApB,KAAjB,CAFiC,CAIjC;AAAO,GAdG;AAgBV,OAAM,GACN,KAAO,UAAS3B,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,WAAOD,OAAP,GAAiB;AAAC8B,cAAQD,OAAOD,UAAP,CAAkBE;AAA3B,KAAjB,CAFiC,CAIjC;AAAO,GArBG;AAuBV,OAAM,IACN,KAAO,UAAS7B,MAAT,EAAiB8B,mBAAjB,EAAsCjC,mBAAtC,EAA2D;AAElE;;AACAc,WAAOC,cAAP,CAAsBkB,mBAAtB,EAA2C,YAA3C,EAAyD;AAAExB,aAAO;AAAT,KAAzD,EAHkE,CAIlE;;AAAqB,QAAIyB,iDAAiDlC,oBAAoB,CAApB,CAArD,CAJ6C,CAKlE;;AAAqB,QAAImC,yDAAyDnC,oBAAoBmB,CAApB,CAAsBe,8CAAtB,CAA7D,CAL6C,CAMlE;;AAAqB,QAAIE,qDAAqDpC,oBAAoB,EAApB,CAAzD;;AAIrBkC,mDAA+C,YAA/C,EAA6DG,MAA7D,CAAoED,mDAAmD,GAAnD,CAAuD,cAAvD,CAApE,EAA4I,UAA5I,EAVkE,CAYlE;AAAO,GApCG;AAsCV,OAAM,GACN,KAAO,UAASjC,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,WAAOD,OAAP,GAAiB;AAACoC,WAAKP,OAAOD,UAAP,CAAkBQ,GAAxB;AAA6BC,mBAAaR,OAAOD,UAAP,CAAkBS,WAA5D;AAAyEC,qBAAeT,OAAOD,UAAP,CAAkBU;AAA1G,KAAjB,CAFiC,CAIjC;AAAO,GA3CG;AA6CV,OAAM,IACN,KAAO,UAASrC,MAAT,EAAiB8B,mBAAjB,EAAsCjC,mBAAtC,EAA2D;AAElE,iBAFkE,CAGlE;;AAA+BA,wBAAoBU,CAApB,CAAsBuB,mBAAtB,EAA2C,GAA3C,EAAgD,YAAW;AAAE,aAAOQ,QAAP;AAAkB,KAA/E,EAHmC,CAIlE;;AAAqB,QAAIC,uCAAuC1C,oBAAoB,CAApB,CAA3C,CAJ6C,CAKlE;;AAAqB,QAAI2C,+CAA+C3C,oBAAoBmB,CAApB,CAAsBuB,oCAAtB,CAAnD,CAL6C,CAMlE;;AAAqB,QAAIE,sDAAsD5C,oBAAoB,CAApB,CAA1D,CAN6C,CAOlE;;AAAqB,QAAI6C,8DAA8D7C,oBAAoBmB,CAApB,CAAsByB,mDAAtB,CAAlE,CAP6C,CAQlE;;AAAqB,QAAIE,mDAAmD9C,oBAAoB,CAApB,CAAvD,CAR6C,CASlE;;AAAqB,QAAI+C,2DAA2D/C,oBAAoBmB,CAApB,CAAsB2B,gDAAtB,CAA/D,CAT6C,CAUlE;;AAAqB,QAAIE,yDAAyDhD,oBAAoB,EAApB,CAA7D,CAV6C,CAWlE;;AAAqB,QAAIiD,iEAAiEjD,oBAAoBmB,CAApB,CAAsB6B,sDAAtB,CAArE;;AAGrB,QAAIE,eAAe,YAAY;AAAE,eAASC,gBAAT,CAA0BC,MAA1B,EAAkCC,KAAlC,EAAyC;AAAE,aAAK,IAAIjD,IAAI,CAAb,EAAgBA,IAAIiD,MAAMC,MAA1B,EAAkClD,GAAlC,EAAuC;AAAE,cAAImD,aAAaF,MAAMjD,CAAN,CAAjB;AAA2BmD,qBAAWtC,UAAX,GAAwBsC,WAAWtC,UAAX,IAAyB,KAAjD;AAAwDsC,qBAAWvC,YAAX,GAA0B,IAA1B;AAAgC,cAAI,WAAWuC,UAAf,EAA2BA,WAAWC,QAAX,GAAsB,IAAtB;AAA4B1C,iBAAOC,cAAP,CAAsBqC,MAAtB,EAA8BG,WAAWE,GAAzC,EAA8CF,UAA9C;AAA4D;AAAE;;AAAC,aAAO,UAAUG,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,YAAID,UAAJ,EAAgBR,iBAAiBO,YAAYjC,SAA7B,EAAwCkC,UAAxC;AAAqD,YAAIC,WAAJ,EAAiBT,iBAAiBO,WAAjB,EAA8BE,WAA9B;AAA4C,eAAOF,WAAP;AAAqB,OAAhN;AAAmN,KAA9hB,EAAnB;;AAEA,aAASG,eAAT,CAAyBC,QAAzB,EAAmCJ,WAAnC,EAAgD;AAAE,UAAI,EAAEI,oBAAoBJ,WAAtB,CAAJ,EAAwC;AAAE,cAAM,IAAIK,SAAJ,CAAc,mCAAd,CAAN;AAA2D;AAAE;;AAEzJ,aAASC,0BAAT,CAAoCC,IAApC,EAA0C3D,IAA1C,EAAgD;AAAE,UAAI,CAAC2D,IAAL,EAAW;AAAE,cAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAwF;;AAAC,aAAO5D,SAAS,QAAOA,IAAP,uDAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0E2D,IAAjF;AAAwF;;AAEhP,aAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,UAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,cAAM,IAAIN,SAAJ,CAAc,qEAAoEM,UAApE,uDAAoEA,UAApE,EAAd,CAAN;AAAsG;;AAACD,eAAS3C,SAAT,GAAqBX,OAAOwD,MAAP,CAAcD,cAAcA,WAAW5C,SAAvC,EAAkD;AAAE8C,qBAAa;AAAE9D,iBAAO2D,QAAT;AAAmBnD,sBAAY,KAA/B;AAAsCuC,oBAAU,IAAhD;AAAsDxC,wBAAc;AAApE;AAAf,OAAlD,CAArB;AAAqK,UAAIqD,UAAJ,EAAgBvD,OAAO0D,cAAP,GAAwB1D,OAAO0D,cAAP,CAAsBJ,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASK,SAAT,GAAqBJ,UAA3F;AAAwG,KApB5a,CA2BlE;;;;;;AAMA,QAAI5B,WAAW,UAAUiC,OAAV,EAAmB;AAChCP,gBAAU1B,QAAV,EAAoBiC,OAApB;;AAEA,eAASjC,QAAT,GAAoB;AAClBoB,wBAAgB,IAAhB,EAAsBpB,QAAtB;;AAEA,eAAOuB,2BAA2B,IAA3B,EAAiC,CAACvB,SAASgC,SAAT,IAAsB3D,OAAO6D,cAAP,CAAsBlC,QAAtB,CAAvB,EAAwDmC,KAAxD,CAA8D,IAA9D,EAAoEC,SAApE,CAAjC,CAAP;AACD;;AAED3B,mBAAaT,QAAb,EAAuB,CAAC;AACtBgB,aAAK,QADiB;AAGtB;;;;;;;WAQAhD;AAAO,mBAASqE,MAAT,CAAgBC,OAAhB,EAAyBC,OAAzB,EAAkC;AACvC,iBAAKC,QAAL,GAAgBF,OAAhB;AACA,iBAAKC,OAAL,GAAerC,6CAA6CuC,CAA7C,CAA+CC,MAA/C,CAAsD,EAAtD,EAA0D1C,SAAS2C,QAAnE,EAA6E,KAAKH,QAAL,CAAcI,IAAd,EAA7E,EAAmGL,OAAnG,CAAf;AACA,iBAAKM,SAAL,GAAiB,UAAjB,CAHuC,CAGV;;AAE7B,iBAAKC,KAAL;;AACA,iBAAKC,UAAL;AACD;;AAPD,iBAAgBV,MAAhB;AAAA,WAXsB,CAoBtB;;;;AApBsB,OAAD,EAyBpB;AACDrB,aAAK,OADJ;AAEDhD;AAAO,mBAAS8E,KAAT,GAAiB;AACtB,gBAAIE,KAAK,KAAKR,QAAL,CAAc,CAAd,EAAiBQ,EAAjB,IAAuBzF,oBAAoBI,CAApB,CAAsBwC,oDAAoD,aAApD,CAAtB,EAA0F,CAA1F,EAA6F,UAA7F,CAAhC;;AACA,gBAAI8C,QAAQ,IAAZ;;AACA,iBAAKC,QAAL,GAAgBhD,+CAA+C,wBAA/C,CAAhB;AACA,iBAAKiD,MAAL,GAAc,KAAKX,QAAL,CAAcY,IAAd,CAAmB,GAAnB,CAAd;AACA,iBAAKZ,QAAL,CAAca,IAAd,CAAmB;AACjB,6BAAeL,EADE;AAEjB,6BAAeA,EAFE;AAGjB,oBAAMA;AAHW,aAAnB;AAKA,iBAAKM,OAAL,GAAepD,gDAAf;AACA,iBAAKqD,SAAL,GAAiBC,SAASlE,OAAOmE,WAAhB,EAA6B,EAA7B,CAAjB;;AAEA,iBAAKC,OAAL;AACD;;AAdD,iBAAgBZ,KAAhB;AAAA,WAFC,CAkBD;;;;;AAlBC,OAzBoB,EAiDpB;AACD9B,aAAK,YADJ;AAEDhD;AAAO,mBAAS+E,UAAT,GAAsB;AAC3B,gBAAIE,QAAQ,IAAZ;AAAA,gBACIU,OAAOC,SAASD,IADpB;AAAA,gBAEIE,OAAOD,SAASE,eAFpB;;AAIA,iBAAKC,MAAL,GAAc,EAAd;AACA,iBAAKC,SAAL,GAAiBC,KAAKC,KAAL,CAAWD,KAAKE,GAAL,CAAS7E,OAAO8E,WAAhB,EAA6BP,KAAKQ,YAAlC,CAAX,CAAjB;AACA,iBAAKC,SAAL,GAAiBL,KAAKC,KAAL,CAAWD,KAAKE,GAAL,CAASR,KAAKY,YAAd,EAA4BZ,KAAKa,YAAjC,EAA+CX,KAAKQ,YAApD,EAAkER,KAAKU,YAAvE,EAAqFV,KAAKW,YAA1F,CAAX,CAAjB;AAEA,iBAAKtB,QAAL,CAAcuB,IAAd,CAAmB,YAAY;AAC7B,kBAAIC,OAAOxE,+CAA+C,IAA/C,CAAX;AAAA,kBACIyE,KAAKV,KAAKC,KAAL,CAAWQ,KAAKE,MAAL,GAAcC,GAAd,GAAoB5B,MAAMV,OAAN,CAAcuC,SAA7C,CADT;;AAEAJ,mBAAKK,WAAL,GAAmBJ,EAAnB;;AACA1B,oBAAMc,MAAN,CAAaiB,IAAb,CAAkBL,EAAlB;AACD,aALD;AAMD;;AAfD,iBAAgB5B,UAAhB;AAAA,WAFC,CAmBD;;;;AAnBC,OAjDoB,EAyEpB;AACD/B,aAAK,SADJ;AAEDhD;AAAO,mBAAS0F,OAAT,GAAmB;AACxB,gBAAIT,QAAQ,IAAZ;AAAA,gBACIgC,QAAQ/E,+CAA+C,YAA/C,CADZ;AAAA,gBAEIgF,OAAO;AACTC,wBAAUlC,MAAMV,OAAN,CAAc6C,iBADf;AAETC,sBAAQpC,MAAMV,OAAN,CAAc+C;AAFb,aAFX;;AAMApF,2DAA+CZ,MAA/C,EAAuDiG,GAAvD,CAA2D,MAA3D,EAAmE,YAAY;AAC7E,kBAAItC,MAAMV,OAAN,CAAciD,WAAlB,EAA+B;AAC7B,oBAAIC,SAASC,IAAb,EAAmB;AACjBzC,wBAAM0C,WAAN,CAAkBF,SAASC,IAA3B;AACD;AACF;;AACDzC,oBAAMF,UAAN;;AACAE,oBAAM2C,aAAN;AACD,aARD;;AAUA,iBAAKpD,QAAL,CAAcqD,EAAd,CAAiB;AACf,qCAAuB,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CADR;AAEf,qCAAuB,KAAKH,aAAL,CAAmBG,IAAnB,CAAwB,IAAxB;AAFR,aAAjB,EAGGF,EAHH,CAGM,mBAHN,EAG2B,cAH3B,EAG2C,UAAUG,CAAV,EAAa;AACtDA,gBAAEC,cAAF;AACA,kBAAIC,UAAU,KAAKC,YAAL,CAAkB,MAAlB,CAAd;;AACAlD,oBAAM0C,WAAN,CAAkBO,OAAlB;AACD,aAPD;;AASA,iBAAKE,eAAL,GAAuB,UAAUJ,CAAV,EAAa;AAClC,kBAAI/C,MAAMV,OAAN,CAAciD,WAAlB,EAA+B;AAC7BvC,sBAAM0C,WAAN,CAAkBrG,OAAOmG,QAAP,CAAgBC,IAAlC;AACD;AACF,aAJD;;AAMAxF,2DAA+CZ,MAA/C,EAAuDuG,EAAvD,CAA0D,UAA1D,EAAsE,KAAKO,eAA3E;AACD;;AAjCD,iBAAgB1C,OAAhB;AAAA,WAFC,CAqCD;;;;;AArCC,OAzEoB,EAoHpB;AACD1C,aAAK,aADJ;AAEDhD;AAAO,mBAAS2H,WAAT,CAAqBU,GAArB,EAA0B;AAC/B,iBAAKC,aAAL,GAAqB,IAArB;;AACA,gBAAIrD,QAAQ,IAAZ;;AAEA,gBAAIV,UAAU;AACZ+C,+BAAiB,KAAK/C,OAAL,CAAa+C,eADlB;AAEZF,iCAAmB,KAAK7C,OAAL,CAAa6C,iBAFpB;AAGZN,yBAAW,KAAKvC,OAAL,CAAauC,SAHZ;AAIZF,sBAAQ,KAAKrC,OAAL,CAAaqC;AAJT,aAAd;;AAOArE,mEAAuD,cAAvD,EAAuEoF,WAAvE,CAAmFU,GAAnF,EAAwF9D,OAAxF,EAAiG,YAAY;AAC3GU,oBAAMqD,aAAN,GAAsB,KAAtB;;AACArD,oBAAM2C,aAAN;AACD,aAHD;AAID;;AAfD,iBAAgBD,WAAhB;AAAA,WAFC,CAmBD;;;;AAnBC,OApHoB,EA4IpB;AACD3E,aAAK,QADJ;AAEDhD;AAAO,mBAAS8H,MAAT,GAAkB;AACvB,iBAAK/C,UAAL;;AACA,iBAAK6C,aAAL;AACD;;AAHD,iBAAgBE,MAAhB;AAAA,WAFC,CAOD;;;;;;AAPC,OA5IoB,EA0JpB;AACD9E,aAAK,eADJ;AAEDhD;AAAO,mBAAS4H,aAAT,GAAyB,wBAAwB;AACtD,gBAAI,KAAKU,aAAT,EAAwB;AACtB;AACD;;AACD,gBAAIC,SAAS,gBAAgB/C,SAASlE,OAAOmE,WAAhB,EAA6B,EAA7B,CAA7B;AAAA,gBACI+C,MADJ;;AAGA,gBAAID,SAAS,KAAKvC,SAAd,KAA4B,KAAKM,SAArC,EAAgD;AAC9CkC,uBAAS,KAAKzC,MAAL,CAAYlD,MAAZ,GAAqB,CAA9B;AACD,aAFD,MAEO,IAAI0F,SAAS,KAAKxC,MAAL,CAAY,CAAZ,CAAb,EAA6B;AAClCyC,uBAASC,SAAT;AACD,aAFM,MAEA;AACL,kBAAIC,SAAS,KAAKnD,SAAL,GAAiBgD,MAA9B;AAAA,kBACItD,QAAQ,IADZ;AAAA,kBAEI0D,aAAa,KAAK5C,MAAL,CAAY6C,MAAZ,CAAmB,UAAU1H,CAAV,EAAavB,CAAb,EAAgB;AAClD,uBAAO+I,SAASxH,IAAI+D,MAAMV,OAAN,CAAcqC,MAAlB,IAA4B2B,MAArC,GAA8CrH,IAAI+D,MAAMV,OAAN,CAAcqC,MAAlB,GAA2B3B,MAAMV,OAAN,CAAcuC,SAAzC,IAAsDyB,MAA3G;AACD,eAFgB,CAFjB;;AAKAC,uBAASG,WAAW9F,MAAX,GAAoB8F,WAAW9F,MAAX,GAAoB,CAAxC,GAA4C,CAArD;AACD;;AAED,iBAAKyC,OAAL,CAAauD,WAAb,CAAyB,KAAKtE,OAAL,CAAauE,WAAtC;AACA,iBAAKxD,OAAL,GAAe,KAAKH,MAAL,CAAYyD,MAAZ,CAAmB,aAAa,KAAK1D,QAAL,CAAc6D,EAAd,CAAiBP,MAAjB,EAAyB5D,IAAzB,CAA8B,iBAA9B,CAAb,GAAgE,IAAnF,EAAyFoE,QAAzF,CAAkG,KAAKzE,OAAL,CAAauE,WAA/G,CAAf;;AAEA,gBAAI,KAAKvE,OAAL,CAAaiD,WAAjB,EAA8B;AAC5B,kBAAIE,OAAO,EAAX;;AACA,kBAAIc,UAAUC,SAAd,EAAyB;AACvBf,uBAAO,KAAKpC,OAAL,CAAa,CAAb,EAAgB6C,YAAhB,CAA6B,MAA7B,CAAP;AACD;;AACD,kBAAIT,SAASpG,OAAOmG,QAAP,CAAgBC,IAA7B,EAAmC;AACjC,oBAAIpG,OAAO2H,OAAP,CAAeC,SAAnB,EAA8B;AAC5B5H,yBAAO2H,OAAP,CAAeC,SAAf,CAAyB,IAAzB,EAA+B,IAA/B,EAAqCxB,IAArC;AACD,iBAFD,MAEO;AACLpG,yBAAOmG,QAAP,CAAgBC,IAAhB,GAAuBA,IAAvB;AACD;AACF;AACF;;AAED,iBAAKnC,SAAL,GAAiBgD,MAAjB,CArCsD,CAsCtD;;;;AAIA,iBAAK/D,QAAL,CAAc2E,OAAd,CAAsB,oBAAtB,EAA4C,CAAC,KAAK7D,OAAN,CAA5C;AACD;;AA3CD,iBAAgBsC,aAAhB;AAAA,WAFC,CA+CD;;;;AA/CC,OA1JoB,EA8MpB;AACD5E,aAAK,UADJ;AAEDhD;AAAO,mBAASoJ,QAAT,GAAoB;AACzB,iBAAK5E,QAAL,CAAc6E,GAAd,CAAkB,0BAAlB,EAA8CjE,IAA9C,CAAmD,MAAM,KAAKb,OAAL,CAAauE,WAAtE,EAAmFD,WAAnF,CAA+F,KAAKtE,OAAL,CAAauE,WAA5G;;AAEA,gBAAI,KAAKvE,OAAL,CAAaiD,WAAjB,EAA8B;AAC5B,kBAAIE,OAAO,KAAKpC,OAAL,CAAa,CAAb,EAAgB6C,YAAhB,CAA6B,MAA7B,CAAX;AACA7G,qBAAOmG,QAAP,CAAgBC,IAAhB,CAAqB4B,OAArB,CAA6B5B,IAA7B,EAAmC,EAAnC;AACD;;AACDxF,2DAA+CZ,MAA/C,EAAuD+H,GAAvD,CAA2D,UAA3D,EAAuE,KAAKjB,eAA5E;AACD;;AARD,iBAAgBgB,QAAhB;AAAA;AAFC,OA9MoB,CAAvB;;AA2NA,aAAOpH,QAAP;AACD,KArOc,CAqObK,iDAAiD,QAAjD,CArOa,CAAf,CAjCkE,CAwQlE;;;;AAKAL,aAAS2C,QAAT,GAAoB;AAClB;;;;;SAMAyC,mBAAmB,GAPD;AAQlB;;;;;;SAOAE,iBAAiB,QAfC;AAgBlB;;;;;SAMAR,WAAW,EAtBO;AAuBlB;;;;;SAMAgC,aAAa,WA7BK;AA8BlB;;;;;SAMAtB,aAAa,KApCK;AAqClB;;;;;SAMAZ,QAAQ;AA3CU,KAApB,CA7QkE,CA6TlE;AAAO,GA3WG;AA6WV,OAAM,IACN,KAAO,UAASlH,MAAT,EAAiBD,OAAjB,EAA0B;AAEjCC,WAAOD,OAAP,GAAiB;AAAC8J,oBAAcjI,OAAOD,UAAP,CAAkBkI;AAAjC,KAAjB,CAFiC,CAIjC;AAAO,GAlXG;AAoXV,OAAM,IACN,KAAO,UAAS7J,MAAT,EAAiBD,OAAjB,EAA0BF,mBAA1B,EAA+C;AAEtDG,WAAOD,OAAP,GAAiBF,oBAAoB,EAApB,CAAjB,CAFsD,CAKtD;AAAO,GA1XG,CA4XV;AA5XU,CApED","file":"packages/zurb:foundation-sites/dist/js/plugins/foundation.magellan.js.map","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 87);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports) {\n\nmodule.exports = jQuery;\n\n/***/ }),\n\n/***/ 1:\n/***/ (function(module, exports) {\n\nmodule.exports = {Foundation: window.Foundation};\n\n/***/ }),\n\n/***/ 2:\n/***/ (function(module, exports) {\n\nmodule.exports = {Plugin: window.Foundation.Plugin};\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__foundation_core__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__foundation_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__foundation_core__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__foundation_magellan__ = __webpack_require__(51);\n\n\n\n__WEBPACK_IMPORTED_MODULE_0__foundation_core__[\"Foundation\"].plugin(__WEBPACK_IMPORTED_MODULE_1__foundation_magellan__[\"a\" /* Magellan */], 'Magellan');\n\n/***/ }),\n\n/***/ 3:\n/***/ (function(module, exports) {\n\nmodule.exports = {rtl: window.Foundation.rtl, GetYoDigits: window.Foundation.GetYoDigits, transitionend: window.Foundation.transitionend};\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Magellan; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_jquery___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__foundation_plugin__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__foundation_plugin___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__foundation_plugin__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__);\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n/**\n * Magellan module.\n * @module foundation.magellan\n * @requires foundation.smoothScroll\n */\n\nvar Magellan = function (_Plugin) {\n  _inherits(Magellan, _Plugin);\n\n  function Magellan() {\n    _classCallCheck(this, Magellan);\n\n    return _possibleConstructorReturn(this, (Magellan.__proto__ || Object.getPrototypeOf(Magellan)).apply(this, arguments));\n  }\n\n  _createClass(Magellan, [{\n    key: '_setup',\n\n    /**\n     * Creates a new instance of Magellan.\n     * @class\n     * @name Magellan\n     * @fires Magellan#init\n     * @param {Object} element - jQuery object to add the trigger to.\n     * @param {Object} options - Overrides to the default plugin settings.\n     */\n    value: function _setup(element, options) {\n      this.$element = element;\n      this.options = __WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend({}, Magellan.defaults, this.$element.data(), options);\n      this.className = 'Magellan'; // ie9 back compat\n\n      this._init();\n      this.calcPoints();\n    }\n\n    /**\n     * Initializes the Magellan plugin and calls functions to get equalizer functioning on load.\n     * @private\n     */\n\n  }, {\n    key: '_init',\n    value: function _init() {\n      var id = this.$element[0].id || __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__[\"GetYoDigits\"])(6, 'magellan');\n      var _this = this;\n      this.$targets = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-magellan-target]');\n      this.$links = this.$element.find('a');\n      this.$element.attr({\n        'data-resize': id,\n        'data-scroll': id,\n        'id': id\n      });\n      this.$active = __WEBPACK_IMPORTED_MODULE_0_jquery___default()();\n      this.scrollPos = parseInt(window.pageYOffset, 10);\n\n      this._events();\n    }\n\n    /**\n     * Calculates an array of pixel values that are the demarcation lines between locations on the page.\n     * Can be invoked if new elements are added or the size of a location changes.\n     * @function\n     */\n\n  }, {\n    key: 'calcPoints',\n    value: function calcPoints() {\n      var _this = this,\n          body = document.body,\n          html = document.documentElement;\n\n      this.points = [];\n      this.winHeight = Math.round(Math.max(window.innerHeight, html.clientHeight));\n      this.docHeight = Math.round(Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight));\n\n      this.$targets.each(function () {\n        var $tar = __WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),\n            pt = Math.round($tar.offset().top - _this.options.threshold);\n        $tar.targetPoint = pt;\n        _this.points.push(pt);\n      });\n    }\n\n    /**\n     * Initializes events for Magellan.\n     * @private\n     */\n\n  }, {\n    key: '_events',\n    value: function _events() {\n      var _this = this,\n          $body = __WEBPACK_IMPORTED_MODULE_0_jquery___default()('html, body'),\n          opts = {\n        duration: _this.options.animationDuration,\n        easing: _this.options.animationEasing\n      };\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).one('load', function () {\n        if (_this.options.deepLinking) {\n          if (location.hash) {\n            _this.scrollToLoc(location.hash);\n          }\n        }\n        _this.calcPoints();\n        _this._updateActive();\n      });\n\n      this.$element.on({\n        'resizeme.zf.trigger': this.reflow.bind(this),\n        'scrollme.zf.trigger': this._updateActive.bind(this)\n      }).on('click.zf.magellan', 'a[href^=\"#\"]', function (e) {\n        e.preventDefault();\n        var arrival = this.getAttribute('href');\n        _this.scrollToLoc(arrival);\n      });\n\n      this._deepLinkScroll = function (e) {\n        if (_this.options.deepLinking) {\n          _this.scrollToLoc(window.location.hash);\n        }\n      };\n\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).on('popstate', this._deepLinkScroll);\n    }\n\n    /**\n     * Function to scroll to a given location on the page.\n     * @param {String} loc - a properly formatted jQuery id selector. Example: '#foo'\n     * @function\n     */\n\n  }, {\n    key: 'scrollToLoc',\n    value: function scrollToLoc(loc) {\n      this._inTransition = true;\n      var _this = this;\n\n      var options = {\n        animationEasing: this.options.animationEasing,\n        animationDuration: this.options.animationDuration,\n        threshold: this.options.threshold,\n        offset: this.options.offset\n      };\n\n      __WEBPACK_IMPORTED_MODULE_3__foundation_smoothScroll__[\"SmoothScroll\"].scrollToLoc(loc, options, function () {\n        _this._inTransition = false;\n        _this._updateActive();\n      });\n    }\n\n    /**\n     * Calls necessary functions to update Magellan upon DOM change\n     * @function\n     */\n\n  }, {\n    key: 'reflow',\n    value: function reflow() {\n      this.calcPoints();\n      this._updateActive();\n    }\n\n    /**\n     * Updates the visibility of an active location link, and updates the url hash for the page, if deepLinking enabled.\n     * @private\n     * @function\n     * @fires Magellan#update\n     */\n\n  }, {\n    key: '_updateActive',\n    value: function _updateActive() /*evt, elem, scrollPos*/{\n      if (this._inTransition) {\n        return;\n      }\n      var winPos = /*scrollPos ||*/parseInt(window.pageYOffset, 10),\n          curIdx;\n\n      if (winPos + this.winHeight === this.docHeight) {\n        curIdx = this.points.length - 1;\n      } else if (winPos < this.points[0]) {\n        curIdx = undefined;\n      } else {\n        var isDown = this.scrollPos < winPos,\n            _this = this,\n            curVisible = this.points.filter(function (p, i) {\n          return isDown ? p - _this.options.offset <= winPos : p - _this.options.offset - _this.options.threshold <= winPos;\n        });\n        curIdx = curVisible.length ? curVisible.length - 1 : 0;\n      }\n\n      this.$active.removeClass(this.options.activeClass);\n      this.$active = this.$links.filter('[href=\"#' + this.$targets.eq(curIdx).data('magellan-target') + '\"]').addClass(this.options.activeClass);\n\n      if (this.options.deepLinking) {\n        var hash = \"\";\n        if (curIdx != undefined) {\n          hash = this.$active[0].getAttribute('href');\n        }\n        if (hash !== window.location.hash) {\n          if (window.history.pushState) {\n            window.history.pushState(null, null, hash);\n          } else {\n            window.location.hash = hash;\n          }\n        }\n      }\n\n      this.scrollPos = winPos;\n      /**\n       * Fires when magellan is finished updating to the new active element.\n       * @event Magellan#update\n       */\n      this.$element.trigger('update.zf.magellan', [this.$active]);\n    }\n\n    /**\n     * Destroys an instance of Magellan and resets the url of the window.\n     * @function\n     */\n\n  }, {\n    key: '_destroy',\n    value: function _destroy() {\n      this.$element.off('.zf.trigger .zf.magellan').find('.' + this.options.activeClass).removeClass(this.options.activeClass);\n\n      if (this.options.deepLinking) {\n        var hash = this.$active[0].getAttribute('href');\n        window.location.hash.replace(hash, '');\n      }\n      __WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off('popstate', this._deepLinkScroll);\n    }\n  }]);\n\n  return Magellan;\n}(__WEBPACK_IMPORTED_MODULE_2__foundation_plugin__[\"Plugin\"]);\n\n/**\n * Default settings for plugin\n */\n\n\nMagellan.defaults = {\n  /**\n   * Amount of time, in ms, the animated scrolling should take between locations.\n   * @option\n   * @type {number}\n   * @default 500\n   */\n  animationDuration: 500,\n  /**\n   * Animation style to use when scrolling between locations. Can be `'swing'` or `'linear'`.\n   * @option\n   * @type {string}\n   * @default 'linear'\n   * @see {@link https://api.jquery.com/animate|Jquery animate}\n   */\n  animationEasing: 'linear',\n  /**\n   * Number of pixels to use as a marker for location changes.\n   * @option\n   * @type {number}\n   * @default 50\n   */\n  threshold: 50,\n  /**\n   * Class applied to the active locations link on the magellan container.\n   * @option\n   * @type {string}\n   * @default 'is-active'\n   */\n  activeClass: 'is-active',\n  /**\n   * Allows the script to manipulate the url of the current page, and if supported, alter the history.\n   * @option\n   * @type {boolean}\n   * @default false\n   */\n  deepLinking: false,\n  /**\n   * Number of pixels to offset the scroll of the page on item click if using a sticky nav bar.\n   * @option\n   * @type {number}\n   * @default 0\n   */\n  offset: 0\n};\n\n\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, exports) {\n\nmodule.exports = {SmoothScroll: window.Foundation.SmoothScroll};\n\n/***/ }),\n\n/***/ 87:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(21);\n\n\n/***/ })\n\n/******/ });"]},"hash":"c855317f84475a3db90afcdccaad0045c238d77a"}
